{"parse":{"title":"\u7528\u6237:\u8335\u9648/vector.js","pageid":1048,"wikitext":{"*":"//mw.loader.load('User:\u8335\u9648/js/Emoticons_for_Comment.js');\n//\u4e0d\u77e5\u4e3a\u4f55\u4e0a\u9762\u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e0d\u4e86\uff1f\n$('head').append('<style>.emos{width: 1.5em; pointer-events: none;}</style>');\n$('head').append('<style>.emolist{overflow-x: auto; position: absolute; left: 20px; bottom: 20px; width: 180px; max-height: 75px; background: #fff; box-shadow: 0 1px 4px 0 rgba(0,0,0,0.2); border-radius: 3px; transition: all 0.3s ease-out;}</style>');\n$('head').append('<style>.flowthread-btn.plus{display: inline-block; width: auto; padding: 2px; font-family: inherit;}</style>');\n$('head').append('<style>.flowthread-btn-emoticon{font-family: inherit;}</style>');\nfunction addToTextArea(n) {\n    var text= $(\".comment-body textarea\").val();\n    text+='<img clss=\"emos\" style=\"width: 1.5em; pointer-events: none;\" src=\"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon' + n + '.png\" />';\n    $(\".comment-body textarea\").val(text);\n}\nfunction emoticons() {\n    for (i=1; i<50; ++i) {\n        $(\".emolist\").prepend('<button class=\"flowthread-btn plus\" id=\"25\" onclick=\"addToTextArea(' + i + ')\"><img class=\"emos\" src=\"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon' + i + '.png\" /></button>');\n    }\n}\n$(\".comment-toolbar\").append('<button class=\"flowthread-btn flowthread-btn-emoticon\" title=\"\u8868\u60c5\">E</button>');\n$(\".flowthread-btn-emoticon\").click(function(){\n    $(this).toggleClass(\"on\");\n    if ($(this).hasClass(\"on\")) {\n        $(this).after('<div class=\"emolist\"></div>');\n        emoticons();\n    } else {\n        $(\".emolist\").hide(300);\n    }\n});\n\n(function($, mw) { \n    var str = window.location.href;\n    if (str.indexOf(\"Mainpage\") < 0)\n        $(\"body\").prepend('<a href=\"https://zh.moegirl.org\"><img class=\"topButton1\" src=\"https://i.loli.net/2017/08/07/59886347bd66f.png\"></a>');\n    $(\"body\").prepend('<a href=\"/Special:MyPage\"><img class=\"topButton2\" src=\"https://i.loli.net/2017/08/07/598863f4c1bf8.png\"></a>');\n\n    $(\"#p-personal ul\").append('<li><a href=\"/Talk:\u8ba8\u8bba\u7248\">T</a></li>');\n    $(\"#p-personal ul\").append('<li><a href=\"/Special:RecentChanges\">R</a></li>');\n    $(\"#p-personal ul\").append('<li><a href=\"/Special:SpecialPages\">S</a></li>');\n\n    if ($(\".sidebar-character\").lenth > 0)\n        $(\"#mw-head-base\").hide();\n\n    if (str.indexOf(\"?title=\") > -1) \n        str = str.substring(str.indexOf(\"?title=\") + 7);\n    else\n        str = str.substring(str.indexOf(\".org/\") + 5);\n    $(\"#footer-info-lastmod\").wrap('<a href=\"/index.php?title='+str+'&action=history\"></a>');\n    $(\"#firstHeading\").append('<span class=\"mw-editsection\" style=\"display: none;\">[<a href=\"/index.php?title='+str+'&action=edit\">\u7f16\u8f91</a>]</span>');\n\n    var topTitle = document.getElementById(\"firstHeading\");\n    topTitle = topTitle.innerText;\n    $(\"div#p-personal\").prepend('<span class=\"topTitle\" title=\"' + topTitle + '\">' + topTitle + '</span>');\n    $(\".topTitle\").before('<a href=\"https://zh.moegirl.org\" style=\"position: absolute; left: 15%;\"><img width=\"30px\" src=\"https://img.moegirl.org/enmoegirl/6/6f/Logo.svg\" alt=\"\"/></a>');\n\n    function showHide() {\n        $(\"#mw-content-text div\").each(function() {\n            if ($(this).css(\"display\") == \"none\") {\n                $(this).css({\"display\": \"inline-block\", \"background\": \"rgba(255, 255, 0, .3)\"});\n            } else if ($(this).css(\"visibility\") == \"hidden\") {\n                $(this).css({\"visibility\": \"visible\", \"background\": \"rgba(255, 255, 0, .3)\"});\n            }\n        });\n    }\n\n    if ($(\"#editform\").length === 0) showHide();\n\n    $(\"#mw-content-text img\").each(function() {\n        if (this.src == \"https://img.moegirl.org/common/thumb/d/d1/%E5%A4%A7%E8%90%8C%E5%AD%97.png/50px-%E5%A4%A7%E8%90%8C%E5%AD%97.png\") {\n            this.src = \"https://i.loli.net/2017/08/02/5981bf14372d1.png\";\n            this.srcset = \"\";\n        }\n    });\n\n    if (document.body.scrollHeight >= $(window).height() + 300) {\n        $(\"#p-personal\").hide();\n        window.onscroll = function() { \n        var len = window.scrollY; \n        if (len < 300)\n            $(\"#p-personal\").slideUp(300);\n        else\n            $(\"#p-personal\").slideDown(300);\n        }; \n    } else {\n        $(\"#p-personal\").show();\n    }\n})(jQuery, mediaWiki);"}}}