{"parse":{"title":"Widget:Bilibili","pageid":692,"wikitext":{"*":"<noinclude>\n\u540d\u79f0 Bilibili\u89c6\u9891\u63d2\u4ef6\n\n\u4f5c\u8005\uff1a\u52a0\u5927\u53f7\u7684\u732b\n\n\u4fee\u8ba2\uff1a[[User:Boxsnake|Boxsnake]]\n\n\u7248\u6743\u534f\u5b9a\uff1aMIT\n\n\u79fb\u52a8\u7248\u652f\u6301\uff1a[[User:Nbdd0121|XYZ\u6307\u793a\u7269]]\n\n\u53d1\u5e03\u65e5\u671f\uff1a2012\u5e746\u670829\u65e5\u7b2c\u4e00\u7248\u53d1\u5e03\uff0c2015\u5e742\u67086\u65e5\u66f4\u65b0\u3002\n\n\u53d1\u5e03\u5730\u5740\uff1azh.moegirl.org/Widget:Bilibili\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\u8bf7\u81ea\u884c\u66ff\u6362\u811a\u672c\u4e2d\u7684API_KEY\u53c2\u6570\u3002\u5982\u6709\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb\u4f5c\u8005\u3002\n\nBilibili\u89c6\u9891\u63d2\u4ef6\u3002\n\n\u63d2\u5165\u8bed\u6cd5\uff1a<nowiki>{{#widget:bilibili|title=\u89c6\u9891|id=294830|page=1|width=600|height=421|autoplay}}</nowiki>\n\ndemo\uff1a{{#widget:bilibili|title=\u89c6\u9891|id=2054391|page=1|autoplay}}\n== \u53c2\u6570\u89e3\u91ca ==\n* '''title''' \u89c6\u9891\u6807\u9898\uff0c\u53ef\u9009\uff0c\u5982\u679c\u6ca1\u6709\u6b64\u53c2\u6570\u6216\u53c2\u6570\u4e3a\u7a7a\uff0c\u4f1a\u81ea\u52a8\u83b7\u53d6\u89c6\u9891\u6807\u9898\n* '''id''' \u89c6\u9891\u7684av\u53f7\uff0c{{color|red|\u4e0d\u542bav\u4e24\u4e2a\u5b57\u6bcd}}\uff08{{color|red|\u5fc5\u9700\u53c2\u6570}}\uff09\n* '''page''' \u5982\u679c\u89c6\u9891\u6709\u5206\u9875\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u53c2\u6570\u6307\u5b9a\u9875\u6570\uff0c\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a1\n* '''width''' \u89c6\u9891\u5bbd\u5ea6\uff0c\u5355\u4f4d\u4e3a\u50cf\u7d20\uff0c\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a600\n* '''height''' \u89c6\u9891\u9ad8\u5ea6\uff0c\u5355\u4f4d\u4e3a\u50cf\u7d20\uff0c\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a421\n* '''autoplay''' \u662f\u5426\u81ea\u52a8\u64ad\u653e\uff0c\u81ea\u52a8\u64ad\u653e\u8bbe\u7f6e\u6b64\u503c\u4e3atrue\uff08\u4e5f\u53ef\u4ee5\u53ea\u5199autoplay\u53c2\u6570\uff09\uff0c\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u5426\n</noinclude>\n<includeonly>\n<table class=\"wikitable bilibili-video-container\" data-vid=\"<!--{$id|default:''|escape:'html'}-->\" data-page=\"<!--{$page|default:1|escape:'html'}-->\" data-title=\"<!--{$title|default:''|escape:'html'}-->\">\n<tr><th style=\"text-align: center;\"><a class=\"bilibili-title external text\" href=\"//www.bilibili.com/video/av<!--{$id|default:''|escape:'html'}-->/index_<!--{$page|default:1|escape:'html'}-->.html\" target=\"_blank\" rel=\"nofollow\" style=\"margin: 0 0.4em 0 0.2em;\"></a><input type=\"button\" class=\"bilibili-toggle\" value=\"\u663e\u793a\u89c6\u9891\" style=\"float: right;\" /></th></tr>\n<tr class=\"bilibili-video\" style=\"display: none;\"><td><embed height=\"<!--{$height|default:421|escape:'html'}-->\" width=\"<!--{$width|default:600|escape:'html'}-->\" quality=\"high\" allowfullscreen=\"true\" type=\"application/x-shockwave-flash\" src=\"https://static-s.bilibili.com/miniloader.swf?aid=<!--{$id|default:''|escape:'html'}-->&amp;page=<!--{$page|default:1|escape:'html'}-->\" flashvars=\"aid=<!--{$id|default:''|escape:'html'}-->&amp;page=<!--{$page|default:1|escape:'html'}-->&amp;autoplay=<!--{$autoplay|default:false|escape:'html'}-->\" pluginspage=\"https://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash\"></embed></td></tr>\n</table>\n<!--{if !isset($wgBilibili) || !$wgBilibili}-->\n<!--{assign var=\"wgBilibili\" value=true scope=\"global\"}-->\n<style>\n.bilibili-video-button,.bilibili-video-button:visited {\n  display: inline-block;\n  margin: 4px 5px;\n  padding: 0 25px;\n  font-size: 14px;\n  line-height: 34px;\n  text-align: center;\n  color: #fff;\n  background: #de698c;\n  border-radius: 4px;\n}\n</style>\n<script>\nwindow.RLQ.push(function() {\n    if (mw.config.get('skin') === 'minerva') {\n        $('.bilibili-video-container').each(function() {\n            element = $(this);\n            var link = element.find('a').first().attr('href');\n            var button = $('<a>').addClass('bilibili-video-button').attr('href', link).text((/av[0-9]+/.exec(link) || [''])[0]);\n            element.before(button).remove();\n        });\n    } else {\n        $('.bilibili-video-container').each(function() {\n            var id = $(this).attr('data-vid'),\n                page = $(this).attr('data-page'),\n                title = $(this).attr('data-title');\n            var title_text = $(this).find('.bilibili-title');\n            if (!title || title == '') {\n                $.ajax({\n                    url: '//api.bilibili.com/view',\n                    data: {\n                        'type': 'jsonp',\n                        'appkey': '8e9fc618fbd41e28',\n                        'id': id,\n                        'page': page\n                    },\n                    type: 'GET',\n                    dataType: 'jsonp',\n                    success: function(data) {\n                        title_text.text(data.title + (page == '1' ? '' : ' (' + page + ')'));\n                    }\n                });\n            } else {\n                title_text.text(title + (page == '1' ? '' : '(' + page + ')'));\n            }\n\n            $(this).find('.bilibili-toggle').click(function() {\n                $(this).closest('tbody').children('.bilibili-video').toggle();\n                if ($(this).val() == '\u663e\u793a\u89c6\u9891') {\n                    $(this).val('\u9690\u85cf\u89c6\u9891');\n                } else {\n                    $(this).val('\u663e\u793a\u89c6\u9891');\n                }\n            });\n        });\n    }\n});\n</script>\n<!--{/if}-->\n</includeonly>"}}}