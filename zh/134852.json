{"parse":{"title":"Widget:Mgym","pageid":160058,"wikitext":{"*":"<noinclude>{{info|\u6b64\u9875\u9762\u5305\u542b\u5927\u91cf\u590d\u6742\u4ee3\u7801\uff0c\u5e76\u4e14\u4f1a\u5bfc\u81f4\u60ac\u6302\u6b64\u63d2\u4ef6\u7684\u9875\u9762\u4ece\u641c\u7d22\u5f15\u64ce\u4e2d\u9664\u540d\u3001\u4e0d\u518d\u88ab\u66f4\u65b0\u59ec\u63a8\u9001\u3002<br />\u56e0\u6b64\uff0c\u6b64\u9875\u4ec5\u5141\u8bb8\u719f\u7ec3\u638c\u63e1css\u4e0ehtml\u4ee3\u7801\u7684\u7a0b\u5e8f\u5458\u5728\u7ba1\u7406\u5458\u76d1\u7763\u4e4b\u4e0b\u66f4\u6539\uff0c\u6216\u590d\u5236\u3002<br />\u5373\u65e5\u8d77\uff0c{{color|red|\u4efb\u4f55\u7ba1\u7406\u5458\u5728\u65e0\u7a0b\u5e8f\u5458\u6280\u672f\u652f\u63f4\u7684\u60c5\u51b5\u4e0b\u66f4\u6539\u6b64\u63d2\u4ef6\uff0c\u6216\u590d\u5236\u6b64\u63d2\u4ef6\uff0c\u5373\u523b\u56de\u9000/\u5220\u9664\u65b0\u63d2\u4ef6\uff0c\u5e76\u4e14\u79fb\u9664\u7ba1\u7406\u6743\u9650}}\u3002}}{{info|\u53e6\u63d0\u9192\uff0ccss\u524d\u7aef\u9690\u85cf\u6587\u5b57\u5bf9\u4e8e\u673a\u5668\u8bfb\u7801\u7684\u5173\u952e\u5b57\u5ba1\u67e5\u6ca1\u6709\u4efb\u4f55\u4f5c\u7528\u3002\u8bf7\u52ff\u5c06\u6b64widget\u7528\u4e8e\u5ba1\u67e5\u76ee\u7684\u3002}}</noinclude><includeonly><!--{if !isset($wgMgym) || !$wgMgym}--><!--{assign var=\"wgMgym\" value=true scope=\"global\"}--><meta name=\"robots\" content=\"NOINDEX, NOFOLLOW\" /><div id=\"mgym\" style=\"display: none;\">\n<div id=\"mgymContext\">\n<div id=\"mgymTitle\">\n<div id=\"mgymIcon\"></div>\n</div>\n<div class=\"mgymButton\"></div>\n</div>\n</div><script>\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function() {\n    $(function() {\n        $(\"#mgym, #mgymStyle\").appendTo(\"body\");\n        function dom(title, y, n, s, cb) {\n            $('body').css('overflow', 'hidden'); //\u7981\u6b62\u6eda\u5c4f\n            $('#mw-content-text').animate({\n                opacity: 0\n            }, 370); //\u7981\u6b62\u5077\u770b\u5e76\u52a0\u70b9\u52a8\u753b\n            var b = '';\n            if (y) b += '<div id=\"mgymYes\">' + y + '</div>';\n            if (n) b += '<div id=\"mgymNo\" class=\"mgymButton\">' + n + '</div>';\n            $('.mgymButton').append(b);\n            $('#mgym').show().find('#mgymTitle').append(title);\n            $('#mgym').animate({\n                opacity: 1\n            }, 370, function() {\n                if (s) $('#mw-content-text').css('height', $('#mw-content-text').height() + 'px').empty();\n                $(this).dequeue();\n            });\n            cb();\n        }\n\n        function wgMgymFunc(isNotLogin, isBlock) {\n            if (isNotLogin) //\u5982\u679c\u672a\u767b\u9646\n                dom('\u8bf7\u767b\u5f55\u540e\u67e5\u770b', '\u6211\u8981\u767b\u5f55', '\u624d\u4e0d\u7406\u4f60', true, function() {\n                    $('#mgymYes').on('click', function() {\n                        window.location.replace('https://zh.moegirl.org/index.php?title=Special:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&returnto=' + encodeURIComponent(mw.config.get('wgPageName')));\n                    });\n                });\n            else if (isBlock) //\u5982\u679c\u88ab\u5c01\u7981\n                dom('\u60a8\u5df2\u88ab\u5c01\u7981\uff0c\u65e0\u6743\u67e5\u770b~', undefined, '\u597d\u5427\u4e0d\u770b', true, $.noop);\n            else if (window.localStorage.getItem('mgym') !== '1')\n                dom('\u4f60\u662f\u5426\u6e05\u695a\u672c\u9875\u9762\u542b\u6709\u7279\u6b8a\u5185\u5bb9\uff0c\u4efb\u4f55\u5bf9\u6b64\u9875\u9762\u7684\u4e0d\u5f53\u4e3e\u52a8\u90fd\u5c06\u5bfc\u81f4\u5c01\u7981\uff1f', '\u662f', '\u5426', false, function() {\n                    $('#mgymYes').on('click', function() {\n                        window.localStorage.setItem('mgym', '1'); //\u8bb0\u5f55mgym\n                        $('#mw-content-text').animate({\n                            opacity: 1\n                        }, 370);\n                        $(\"#mgym\").animate({\n                            opacity: 0\n                        }, 370, function() {\n                            $('body').css('overflow', 'auto'); //\u5141\u8bb8\u6eda\u5c4f\n                            $(this).remove(); //\u79fb\u9664\u8b66\u544a\u4fe1\u606f\n                        });\n                    });\n                });\n            else $(\"#mgym, #mgymStyle\").remove(); //\u5982\u679c\u6709mgym\u8bb0\u5f55\n            $('#mgymNo').on('click', function() {\n                window.location.replace(window.location.origin + '/' + mw.config.get('wgMainPageTitle')); //\u4e0d\u7ed9\u4f60\u770b\n            });\n        }\n        var groups = [\"bureaucrat\", \"developer\", \"patroller\", \"steward\", \"suppress\", \"sysop\", \"\u5220\u9664\u6267\u884c\u5458\"];\n        var userGroups = mw.config.get('wgUserGroups');\n        var isPowerful = false;\n        for (var i = 0, l = userGroups.length; i < l; i++) {\n            if (groups.indexOf(userGroups[i]) !== -1) {\n                isPowerful = true;\n                break;\n            }\n        }\n        if (isPowerful) $(\"#mgym, #mgymStyle\").remove();\n        else if (mw.config.get('wgUserName') === null) wgMgymFunc(true, undefined);\n        else $.get('https://zh.moegirl.org/api.php?format=json&action=query&list=users&ususers=' + mw.config.get('wgUserName') + '&usprop=blockinfo', function(data) {\n            wgMgymFunc(false, data.query.users[0].blockid === undefined ? false : true);\n        });\n    });\n});</script>\n<style type=\"text/css\" id=\"mgymStyle\">\n#mgym {\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    top: 0;\n    background: rgba(0, 0, 0, 0.9);\n    z-index: 999;\n    opacity: 0;\n}\n\n#mgymContext {\n    position: relative;\n    margin: 0 auto;\n    margin-top: -40px;\n    top: 50%;\n    width: 20em;\n    height: 7em;\n    background: #444;\n    color: white;\n    border: solid 1px rgb(118, 195, 255);\n    border-radius: 4px;\n    box-shadow: 0 0 5px rgb(118, 195, 255);\n    padding: 1em;\n}\n\n#mgymTitle {\n    margin: 1em;\n}\n\n#mgymIcon {\n    position: relative;\n    border: 8px solid transparent;\n    border-left: 1em solid #fff;\n    float: left;\n    margin: 2px 0;\n}\n\n.mgymButton {\n    text-align: center;\n}\n\n.mgymButton div {\n    width: 72px;\n    height: 20px;\n    border-radius: 4px;\n    padding: 4px;\n    text-align: center;\n    font-size: 11pt;\n    display: inline-block;\n    cursor: pointer;\n    box-shadow: #777 0 0 22px inset;\n}\n\n.mgymButton div:nth-child(2) {\n    margin-left: 26px;\n}\n\n#mgymYes {\n    background: rgb(57, 238, 0);\n}\n\n#mgymNo {\n    background: rgb(238, 48, 0);\n}\n</style><!--{/if}--></includeonly>"}}}