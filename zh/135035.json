{"parse":{"title":"\u6a21\u5757:Summon","pageid":315562,"wikitext":{"*":"local module = {}\n\nlocal getArgs = require('Module:Arguments').getArgs\nlocal getCode = require('Module:GetPageCode')\n\nfunction _main(args, frame)\n\tlocal code = getCode('Template:\u840c\u5a18\u767e\u79d1\u7684\u82e6\u529b')\n\tlocal users = {}\n\tmw.ustring.gsub(code, '{{[Uu]ser|(.-)}}', function(name)\n\t\tusers[#users + 1] = name\n\tend)\n\t\n\tlocal except = args[1] or args['except'] or args['\u9664\u53bb'] or ''\n\texcept = mw.text.split(except, '\uff0c')\n\tfor k, v in ipairs(except) do\n\t\tfor\ti=#users, 1, -1 do\n\t\t\tif users[i] == v then\n\t\t\t\ttable.remove(users, i)\n\t\t\tend\n\t\tend\n\tend\n\t\n\tlocal result = '{{@|'..table.concat(users, '|')..'}}'\n\treturn frame:preprocess(result)\nend\n\nfunction module.main(frame)\n\tlocal args = getArgs(frame)\n\treturn _main(args, frame)\nend\n\nreturn module"}}}