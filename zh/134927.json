{"parse":{"title":"\u6a21\u5757:CGroupViewer","pageid":301522,"wikitext":{"*":"local z = {}\nlocal error = require( 'Module:Error' )\n\nlocal function makeText( frame, v )\n\tlocal text = v.text\n\tif not v.preprocessed then\n\t\ttext = frame:preprocess( text )\n\tend\n\treturn mw.text.trim( text ) .. '\\n'\nend\n\nlocal function makeItem( frame, v )\n\tlocal text = '* '\n\tif v.original then\n\t\ttext = text .. '\u539f\u6587\uff1a' .. v.original .. '\uff1b'\n\tend\n\treturn text .. '-{D|' .. v.rule .. '}-\u5f53\u524d\u663e\u793a\u4e3a\uff1a-{|' .. v.rule .. '}-\\n'\nend\n\nfunction z.main( frame )\n\tlocal name = frame.args[1]\n\tif not name or name == '' then\n\t\treturn ''\n\tend\n\tlocal data = require( 'Module:CGroup/' .. name )\n\tif type( data ) ~= 'table' or not data.name or data.name == '' then\n\t\treturn error.error{ '\u6307\u5b9a\u6a21\u5757\u201c' .. name .. '\u201d\u4e0d\u662f\u6709\u6548\u7684\u8f6c\u6362\u7ec4' }\n\tend\n\tif data.name ~= name then\n\t\treturn frame:expandTemplate{ title = 'Template:CGroup redirect', args = { 'Module:CGroup/' .. data.name } }\n\tend\n\tlocal pieces = { '<strong>\u4ee5\u4e0b\u662f[[Wikipedia:\u5b57\u8a5e\u8f49\u63db\u8655\u7406/\u516c\u5171\u8f49\u63db\u7d44|\u516c\u5171\u8f6c\u6362\u7ec4]]\u201c' .. data.description .. '\u201d\u3002</strong>\\n\\n' }\n\tfor i, v in ipairs( data.content ) do\n\t\tif v.type == 'text' then\n\t\t\ttable.insert( pieces, makeText( frame, v ) )\n\t\telseif v.type == 'item' then\n\t\t\ttable.insert( pieces, makeItem( frame, v ) )\n\t\tend\n\tend\n\ttable.insert( pieces, '[[Category:\u516c\u5171\u8f49\u63db\u7d44\u6a21\u677f|' .. name .. ']]' )\n\treturn table.concat( pieces )\nend\n\nfunction z.dialog( frame )\n\tlocal name = frame.args[1]\n\tif not name or name == '' then\n\t\treturn ''\n\tend\n\tlocal data = require( 'Module:CGroup/' .. name )\n\tlocal pieces = { '<div class=\"mw-collapsible mw-collapsed\"><span class=\"plainlinks\" style=\"float: right;\">&#91;[',\n\t\ttostring( mw.uri.fullUrl( 'Module:CGroup/' .. name, { action = 'edit' } ) ), ' \u7f16\u8f91]&#93;</span>\\n',\n\t\t'; \u672c\u6587\u4f7f\u7528[[Wikipedia:\u5b57\u8a5e\u8f49\u63db\u8655\u7406/\u516c\u5171\u8f49\u63db\u7d44|\u516c\u5171\u8f6c\u6362\u7ec4]]\u201c' .. data.description .. '\u201d\u3002\\n',\n\t\t'<div class=\"mw-collapsible-content\">\\n' }\n\tfor i, v in ipairs( data.content ) do\n\t\tif v.type == 'item' then\n\t\t\ttable.insert( pieces, makeItem( frame, v ) )\n\t\tend\n\tend\n\ttable.insert( pieces, '</div></div>' )\n\treturn table.concat( pieces )\nend\n\nfunction z.json( frame )\n\tlocal name = frame.args[1]\n\tif not name or name == '' then\n\t\treturn 'null'\n\tend\n\tlocal data = require( 'Module:CGroup/' .. name )\n\tlocal json = require( 'Module:MicroJSON' )\n\treturn json.encode_object( data, {\n\t\tname = '',\n\t\tdescription = '',\n\t\tcontent = {\n\t\t\t{ type = '', [true] = '' },\n\t\t},\n\t} )\nend\n\nreturn z"}}}