{"parse":{"title":"User:Shirrak/common.js","pageid":186610,"wikitext":{"*":"/* \u8d85\u7b80\u6613HTML\u5012\u6570\u65f6\u95f4\n * Super simple HTML countdown timer. Seriously, it couldn't get any simpler.\n * Written by Maru <maru@puella-magi.net>. Released under public domain.\n * Requires jQuery.\n *\n * <span class=\"countdown\" data-until=\"2012/12/25 00:00:00\">\n *   {DAY} days {HOUR} hours {MINUTE} minutes {SECOND} seconds\n * </span>\n */\n(function(self) {\n\t$.each(self, function(i, elem) {\n\t\tvar elem = $(elem);\n\t\tvar targetDate = new Date(elem.data('until'));\n\t\tvar template = elem.html();\n\t\tvar counter = function() {\n\t\t\tvar text = template;\n\t\t\tvar dateDiff = Math.floor((targetDate - new Date()) / 1000);\n\t\t\tif(dateDiff>=0) {\n\t\t\t\t$.each({\n\t\t\t\t\tday: (Math.floor(dateDiff/86400) % 100000),\n\t\t\t\t\thour: (Math.floor(dateDiff/3600) % 24),\n\t\t\t\t\tminute: (Math.floor(dateDiff/60) % 60),\n\t\t\t\t\tsecond: (Math.floor(dateDiff) % 60)\n\t\t\t\t}, function(k, v) {\n\t\t\t\t\ttext = text.replace(\"{\" + k.toUpperCase() + \"}\", v);\n\t\t\t\t});\n\t\t\t\telem.html(text);\n\t\t\t\tsetTimeout(counter, 1000);\n\t\t\t} else {\n\t\t\t\t$.each({\n\t\t\t\t\tday: (Math.floor(0)),\n\t\t\t\t\thour: (Math.floor(0)),\n\t\t\t\t\tminute: (Math.floor(0)),\n\t\t\t\t\tsecond: (Math.floor(0))\n\t\t\t\t}, function(k, v) {\n\t\t\t\t\ttext = text.replace(\"{\" + k.toUpperCase() + \"}\", v);\n\t\t\t\t});\n\t\t\t\telem.html(text);\n\t\t\t\tsetTimeout(counter, 1000);\n\t\t\t}\n\t\t}\n\t\tcounter();\n\t});\n})($('.countdown'));\n/* \u9006\u8ee2\u300c\u30c1\u30a7\u30f3\u30b8\u30a8\u30a2\u30d6\u30ec\u30a4\u30d6\u300d\n *\n * <span class=\"countup\" data-since=\"2012/12/25 00:00:00\">\n *   {DAY} days {HOUR} hours {MINUTE} minutes {SECOND} seconds\n * </span>\n */\n(function(self) {\n\t$.each(self, function(i, elem) {\n\t\tvar elem = $(elem);\n\t\tvar targetDate = new Date(elem.data('since'));\n\t\tvar template = elem.html();\n\t\tvar counter = function() {\n\t\t\tvar text = template;\n\t\t\tvar dateDiff = Math.floor((new Date() - targetDate) / 1000);\n\t\t\tif(dateDiff>=0) {\n\t\t\t\t$.each({\n\t\t\t\t\tday: (Math.floor(dateDiff/86400) % 100000),\n\t\t\t\t\thour: (Math.floor(dateDiff/3600) % 24),\n\t\t\t\t\tminute: (Math.floor(dateDiff/60) % 60),\n\t\t\t\t\tsecond: (Math.floor(dateDiff) % 60)\n\t\t\t\t}, function(k, v) {\n\t\t\t\t\ttext = text.replace(\"{\" + k.toUpperCase() + \"}\", v);\n\t\t\t\t});\n\t\t\t\telem.html(text);\n\t\t\t\tsetTimeout(counter, 1000);\n\t\t\t} else {\n\t\t\t\t$.each({\n\t\t\t\t\tday: (Math.floor(0)),\n\t\t\t\t\thour: (Math.floor(0)),\n\t\t\t\t\tminute: (Math.floor(0)),\n\t\t\t\t\tsecond: (Math.floor(0))\n\t\t\t\t}, function(k, v) {\n\t\t\t\t\ttext = text.replace(\"{\" + k.toUpperCase() + \"}\", v);\n\t\t\t\t});\n\t\t\t\telem.html(text);\n\t\t\t\tsetTimeout(counter, 1000);\n\t\t\t}\n\t\t}\n\t\tcounter();\n\t});\n})($('.countup'));\n\nfunction addsmkiller(){\nvar dv = document.getElementById('firstHeading');\nvar btn = document.createElement('audio');\nbtn.setAttribute('type','button');\nbtn.setAttribute('value','\u5220\u9664sm2');\nbtn.setAttribute('onclick',\"killsm2()\");\n}\nfunction killsm2(){\nvar sm2s = document.getElementsByClassName('sm2_button');\nfor(var i = 0; i < sm2s.length; i ++){\nsm2s[i].style.display=\"none\";\nvar src = sm2s[i].getAttribute('href');\nvar ado = document.createElement('audio');\nvar ado_id = 'moe_ado'+i;\nado.setAttribute('src',src);\nado.setAttribute('id',ado_id);\nsm2s[i].parentNode.appendChild(ado);\nvar btn = document.createElement('input');\nbtn.setAttribute('type','button');\nbtn.setAttribute('value','\u64ad\u653e');\nbtn.setAttribute('onclick',\"playaudio('\"+ado_id+\"')\");\nsm2s[i].parentNode.appendChild(btn);\n}\n}\nfunction playaudio(x){\nvar y = document.getElementById(x);\ny.play();\n}\n/*var x = document.getElementsByClassName('subpages');\nif(x.length > 0){x[0].remove();}*/"}}}