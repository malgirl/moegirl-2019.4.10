{"parse":{"title":"User:\u8335\u9648/js/Emoticons for Comment.js","pageid":246235,"wikitext":{"*":"// ==UserScript==\n// @name        Emoticons for Comments\n// @description \u5728\u8bc4\u8bba\u533a\u52a0\u5165\u6ce1\u6ce1\uff08\u8d34\u5427\uff09\u8868\u60c5\n// @author      User:\u8335\u9648\n// @include     moegirl.org\n// ==/UserScript==\n\n$('head').append('<style>.emos{width: 1.5em; pointer-events: none;}</style>');\n$('head').append('<style>.emolist{overflow-x: auto; position: absolute; left: 20px; bottom: 20px; width: 180px; max-height: 75px; background: #fff; box-shadow: 0 1px 4px 0 rgba(0,0,0,0.2); border-radius: 3px; transition: all 0.3s ease-out;}</style>');\n$('head').append('<style>.flowthread-btn.plus{display: inline-block; width: auto; padding: 2px; font-family: inherit;}</style>');\n$('head').append('<style>.flowthread-btn-emoticon{font-family: inherit;}</style>');\nfunction addToTextArea(n) {\n    var text= $(\".comment-body textarea\").val();\n    text+='<img clss=\"emos\" style=\"width: 1.5em; pointer-events: none;\" src=\"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon' + n + '.png\" />';\n    $(\".comment-body textarea\").val(text);\n}\nfunction emoticons() {\n    for (i=1; i<50; ++i) {\n        $(\".emolist\").prepend('<button class=\"flowthread-btn plus\" id=\"25\" onclick=\"addToTextArea(' + i + ')\"><img class=\"emos\" src=\"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon' + i + '.png\" /></button>');\n    }\n}\n$(\".comment-toolbar\").append('<button class=\"flowthread-btn flowthread-btn-emoticon\" title=\"\u8868\u60c5\">E</button>');\n$(\".flowthread-btn-emoticon\").click(function(){\n    $(this).toggleClass(\"on\");\n    if ($(this).hasClass(\"on\")) {\n        $(this).after('<div class=\"emolist\"></div>');\n        emoticons();\n    } else {\n        $(\".emolist\").hide(300);\n    }\n});"}}}