{"parse":{"title":"MediaWiki:Gadget-Twinkle.js","pageid":164856,"wikitext":{"*":"//\u672cjs\u5f15\u81ea\u4e2d\u6587\u7ef4\u57fa\u767e\u79d1[[zhwiki:Special:Permalink/35984060]]\n!function(a,b,c,d){var f,g,e={};a.Twinkle=e,e.userAuthorized=Morebits.userIsInGroup(\"autoconfirmed\")||Morebits.userIsInGroup(\"confirmed\"),e.initCallbacks=[],e.addInitCallback=function(a){e.initCallbacks.push(a)},e.defaultConfig={},e.defaultConfig.twinkle={summaryAd:\"\",deletionSummaryAd:\" ([[WP:TW|TW]])\",protectionSummaryAd:\" ([[WP:TW|TW]])\",userTalkPageMode:\"tab\",dialogLargeFont:!1,blankTalkpageOnIndefBlock:!1,openTalkPage:[],openTalkPageOnAutoRevert:!1,markRevertedPagesAsMinor:[\"vand\"],watchRevertedPages:[],offerReasonOnNormalRevert:!0,confirmOnFluff:!1,showRollbackLinks:[\"diff\",\"others\"],notifyUserOnDeli:!0,deliWatchPage:\"default\",deliWatchUser:\"default\",speedySelectionStyle:\"buttonClick\",watchSpeedyPages:[],markSpeedyPagesAsPatrolled:!0,notifyUserOnSpeedyDeletionNomination:[\"db\",\"g1\",\"g2\",\"g3\",\"g5\",\"g11\",\"g12\",\"g13\",\"g16\",\"a1\",\"a2\",\"a5\",\"a6\",\"f6\",\"r2\",\"r3\"],welcomeUserOnSpeedyDeletionNotification:[\"db\",\"g1\",\"g2\",\"g3\",\"g5\",\"g11\",\"g12\",\"g13\",\"g16\",\"a1\",\"a2\",\"a5\",\"a6\",\"f6\",\"r2\",\"r3\"],promptForSpeedyDeletionSummary:[],openUserTalkPageOnSpeedyDelete:[],deleteTalkPageOnDelete:!0,deleteRedirectsOnDelete:!0,deleteSysopDefaultToTag:!1,speedyWindowHeight:500,speedyWindowWidth:800,logSpeedyNominations:!1,speedyLogPageName:\"CSD\u65e5\u5fd7\",noLogOnSpeedyNomination:[\"o1\"],enlargeG11Input:!0,unlinkNamespaces:[\"0\",\"10\",\"100\",\"118\"],defaultWarningGroup:\"1\",showSharedIPNotice:!0,watchWarnings:!1,customWarningList:[],xfdWatchDiscussion:\"default\",xfdWatchPage:\"default\",xfdWatchUser:\"default\",markXfdPagesAsPatrolled:!0,copyvioWatchPage:\"default\",copyvioWatchUser:\"default\",markCopyvioPagesAsPatrolled:!0,revertMaxRevisions:50,batchdeleteChunks:50,batchMax:5e3,batchProtectChunks:50,batchundeleteChunks:50,proddeleteChunks:50},\"vector\"===mw.config.get(\"skin\")?(e.defaultConfig.twinkle.portletArea=\"right-navigation\",e.defaultConfig.twinkle.portletId=\"p-twinkle\",e.defaultConfig.twinkle.portletName=\"TW\",e.defaultConfig.twinkle.portletType=\"menu\",e.defaultConfig.twinkle.portletNext=\"p-search\"):(e.defaultConfig.twinkle.portletArea=null,e.defaultConfig.twinkle.portletId=\"p-cactions\",e.defaultConfig.twinkle.portletName=null,e.defaultConfig.twinkle.portletType=null,e.defaultConfig.twinkle.portletNext=null),e.defaultConfig.friendly={groupByDefault:!0,watchTaggedPages:!1,watchMergeDiscussions:!1,markTaggedPagesAsMinor:!1,markTaggedPagesAsPatrolled:!0,tagArticleSortOrder:\"cat\",customTagList:[],markTalkbackAsMinor:!0,insertTalkbackSignature:!0,talkbackHeading:\"\u56de\u590d\u901a\u544a\",mailHeading:\"\u60a8\u6709\u65b0\u90ae\u4ef6\uff01\",markSharedIPAsMinor:!0},e.getPref=function(b){var c;return\"object\"==typeof e.prefs&&\"object\"==typeof e.prefs.twinkle?c=e.prefs.twinkle[b]:\"object\"==typeof a.TwinkleConfig&&(c=a.TwinkleConfig[b]),c===d?e.defaultConfig.twinkle[b]:c},e.getFriendlyPref=function(b){var c;return\"object\"==typeof e.prefs&&\"object\"==typeof e.prefs.friendly?c=e.prefs.friendly[b]:\"object\"==typeof a.FriendlyConfig&&(c=a.FriendlyConfig[b]),c===d?e.defaultConfig.friendly[b]:c},e.addPortlet=function(a,d,f,g,h){var j,k,l,m,n,o,p,q,r,s,t,i=b.getElementById(a);if(!i)return null;if(j=b.getElementById(d))return j.parentNode&&j.parentNode===i?j:null;switch(h&&(k=b.getElementById(h)),l=mw.config.get(\"skin\"),g=\"vector\"!==l||\"menu\"!==g||\"left-navigation\"!==a&&\"right-navigation\"!==a?\"\":\"menu\",l){case\"vector\":\"portal\"!==a&&\"left-navigation\"!==a&&\"right-navigation\"!==a&&(a=\"mw-panel\"),m=\"mw-panel\"===a?\"portal\":\"menu\"===g?\"vectorMenu\":\"vectorTabs\",n=\"mw-panel\"===a?\"body\":\"menu\"===g?\"menu\":\"\";break;case\"modern\":\"mw_portlets\"!==a&&\"mw_contentwrapper\"!==a&&(a=\"mw_portlets\"),m=\"portlet\",n=\"pBody\";break;default:a=\"column-one\",m=\"portlet\",n=\"pBody\"}return o=b.createElement(\"div\"),o.className=m+\" emptyPortlet\",o.id=d,k&&k.parentNode===i?i.insertBefore(o,k):i.appendChild(o),p=b.createElement(\"h3\"),\"menu\"===g?(q=b.createElement(\"span\"),q.appendChild(b.createTextNode(f)),p.appendChild(q),r=b.createElement(\"a\"),r.href=\"#\",c(r).click(function(a){a.preventDefault(),e.userAuthorized||alert(\"\u62b1\u6b49\uff0c\u60a8\u9700\u8fbe\u81ea\u52a8\u786e\u8ba4\u540e\u65b9\u53ef\u4f7f\u7528Twinkle\u3002\")}),p.appendChild(r)):p.appendChild(b.createTextNode(f)),o.appendChild(p),s=null,\"menu\"===g&&(s=b.createElement(\"div\"),s.className=n,o.appendChild(s)),t=b.createElement(\"ul\"),(s||o).appendChild(t),o},e.addPortletLink=function(a,b,d,f){null!==e.getPref(\"portletArea\")&&e.addPortlet(e.getPref(\"portletArea\"),e.getPref(\"portletId\"),e.getPref(\"portletName\"),e.getPref(\"portletType\"),e.getPref(\"portletNext\"));var g=mw.util.addPortletLink(e.getPref(\"portletId\"),\"string\"==typeof a?a:\"#\",b,d,f);return c.isFunction(a)&&c(g).click(function(b){a(),b.preventDefault()}),c.collapsibleTabs&&c.collapsibleTabs.handleResize(),g},f=mw.util.wikiScript(\"index\")+\"?title=\",g=\"&action=raw&ctype=text/javascript&happy=yes\",c.ajax({url:f+\"User:\"+encodeURIComponent(mw.config.get(\"wgUserName\"))+\"/twinkleoptions.js\"+g,dataType:\"text\"}).fail(function(){mw.util.jsMessage(\"\u672a\u80fd\u52a0\u8f7dtwinkleoptions.js\")}).done(function(a){if(\"\"!==a){a=a.replace(/(?:^(?:\\/\\/[^\\n]*\\n)*\\n*|(?:\\/\\/[^\\n]*(?:\\n|$))*$)/g,\"\"),0===a.lastIndexOf(\"window.Twinkle.prefs = \",0)&&(a=a.replace(/(?:^window.Twinkle.prefs = |;\\n*$)/g,\"\"));try{var b=c.parseJSON(a);b&&(e.prefs=b)}catch(d){mw.util.jsMessage(\"\u672a\u80fd\u89e3\u6790twinkleoptions.js\")}}}).always(function(){c(e.load)}),e.load=function(){var a=-1===mw.config.get(\"wgNamespaceNumber\")&&\"Contributions\"!==mw.config.get(\"wgCanonicalSpecialPageName\")&&\"Prefixindex\"!==mw.config.get(\"wgCanonicalSpecialPageName\"),b=\"msie\"===c.client.profile().name;a||b||!e.userAuthorized||(Morebits.wiki.api.setApiUserAgent(\"Twinkle~zh/2.0 (\"+mw.config.get(\"wgDBname\")+\")\"),e.warn(),Morebits.userIsInGroup(\"sysop\")&&e.block(),e.talkback(),e.speedy(),e.copyvio(),e.xfd(),e.image(),e.protect(),e.tag(),e.diff(),e.unlink(),e.config.init(),e.fluff.init(),Morebits.userIsInGroup(\"sysop\")&&(e.batchdelete(),e.batchundelete(),e.close()),c(e.initCallbacks).each(function(a,b){b()}),e.addInitCallback=function(a){a()},e.getPref(\"dialogLargeFont\")&&mw.util.addCSS(\".morebits-dialog-content, .morebits-dialog-footerlinks { font-size: 100% !important; } .morebits-dialog input, .morebits-dialog select, .morebits-dialog-content button { font-size: inherit !important; }\"))}}(window,document,jQuery);"}}}