{"parse":{"title":"\u6a21\u5757:\u6218\u8230\u5c11\u5973:\u8230\u5a18\u5c5e\u6027","pageid":168696,"wikitext":{"*":"local ships = mw.loadData(\"\u6a21\u5757:\u6218\u8230\u5c11\u5973:\u8230\u5a18\u5c5e\u6027\u5217\u8868\")\n\nlocal p = {}\n\nlocal shipTypeName = {\n\tCV='\u822a\u7a7a\u6bcd\u8230', CVL='\u8f7b\u578b\u822a\u7a7a\u6bcd\u8230', BB='\u6218\u5217\u8230', BBV='\u822a\u7a7a\u6218\u5217\u8230', BC='\u6218\u5217\u5de1\u6d0b\u8230',\n\tCA='\u91cd\u5de1\u6d0b\u8230', CL='\u8f7b\u5de1\u6d0b\u8230', BM='\u6d45\u6c34\u91cd\u70ae\u8230', DD='\u9a71\u9010\u8230', SS='\u6f5c\u6c34\u8247', SC='\u91cd\u70ae\u6f5c\u8247', AP='\u8865\u7ed9\u8230'\n}\n\nlocal function getAttr(shipName, attrName)\n\tlocal ship = ships[shipName]\n\tlocal canGrow = {}\n\tfor i,v in pairs({'\u706b\u529b', '\u88c5\u7532', '\u9c7c\u96f7', '\u5bf9\u7a7a', '\u56de\u907f', '\u5bf9\u6f5c', '\u7d22\u654c'}) do\n\t\tcanGrow[v] = true\n\tend\n\tif canGrow[attrName] then\n\t\tlocal base = ship[ships.tr['\u57fa\u7840' .. attrName]]\n\t\tlocal max_ = ship[ships.tr[attrName .. '\u4e0a\u9650']]\n\t\tif base == max_ then\n\t\t\treturn base\n\t\telse\n\t\t\treturn base .. '(' .. max_ .. ')'\n\t\tend\n\telseif attrName == '\u642d\u8f7d' then\n\t\treturn ship.cap1 + ship.cap2 + ship.cap3 + ship.cap4\n\telse\n\t\tlocal ret = ship[ships.tr[attrName]]\n\t\tif ret == nil then ret = '' end\n\t\treturn ret\n\tend\nend\n\nlocal function getAttrList(shipName, attrNameList)\n\tlocal ret = ''\n\tfor i,attrName in pairs(attrNameList) do\n\t\tret = ret .. getAttr(shipName, attrName) .. '||'\n\tend\n\treturn string.sub(ret, 1, -3)\nend\n\n-- {{#invoke:\u6218\u8230\u5c11\u5973:\u8230\u5a18\u5c5e\u6027|get|\u8239\u540d|\u5c5e\u6027\u540d}} -> \u5c5e\u6027\n-- {{#invoke:\u6218\u8230\u5c11\u5973:\u8230\u5a18\u5c5e\u6027|get|\u8239\u540d|\u5c5e\u6027\u540d1,\u5c5e\u6027\u540d2,...}} -> \u5c5e\u60271||\u5c5e\u60272||...\nfunction p.get(frame)\n\tlocal shipName = frame.args[1]\n\tlocal attrNameList = mw.text.split(frame.args[2], ',', true)\n\treturn getAttrList(shipName, attrNameList)\nend\n\nfunction p.list(frame)\n\tlocal shipType = frame.args[1]\n\tlocal attrNameList = mw.text.split(frame.args[2], ',', true)\n\n\tret = '|-\\n!colspan=' .. (#attrNameList + 3) .. '|' .. shipTypeName[shipType] .. '\u5c5e\u6027\u5217\u8868\\n'\n\tret = ret .. '|-\\n!\u56fe\u9274<br>\u7f16\u53f7!!\u5934\u50cf!!\u540d\u79f0'\n\tfor i,attrName in pairs(attrNameList) do\n\t\tret = ret .. '!!'\n\t\tif mw.ustring.len(attrName) > 2 then\n\t\t\tret = ret .. mw.ustring.sub(attrName, 1, 2)\n\t\t\tlocal tmp = mw.ustring.sub(attrName, 3, -1)\n\t\t\tif tmp ~= '\u4e0a\u9650' then\n\t\t\t\tret = ret .. '<br>' .. tmp\n\t\t\tend\n\t\telse\n\t\t\tret = ret .. attrName\n\t\tend\n\tend\n\tret = ret .. '\\n'\n\n\tfor i = 1,1300 do\n\t\tlocal shipName = ships.sorted[i]\n\t\tif shipName ~= nil and ships[shipName].type == shipType then\n\t\t\tret = ret .. '|-\\n|' .. i\n\t\t\tret = ret .. '||' .. frame:expandTemplate{ title = '\u6218\u8230\u5c11\u5973:\u5934\u50cf', args = { shipName, '150px' } }\n\t\t\tret = ret .. '||' .. frame:expandTemplate{ title = '\u6218\u8230\u5c11\u5973:\u8230\u5a18', args = { shipName } }\n\t\t\tret = ret .. '||' .. getAttrList(shipName, attrNameList) ..'\\n'\n\t\tend\n\tend\n\treturn ret\nend\n\nreturn p"}}}