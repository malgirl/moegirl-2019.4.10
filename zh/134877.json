{"parse":{"title":"Widget:StringSearch","pageid":266386,"wikitext":{"*":"<noinclude> </noinclude><includeonly><!--{if !isset($wgStringSearch) || !$wgStringSearch}--><!--{assign var=\"wgStringSearch\" value=true scope=\"global\"}--><script>\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function() {\n    $(window).on('load', function() {\n        var registry = [];\n        $('.stringSearch').each(function() {\n            var selector = this.dataset.selector,\n                search = this.dataset.search,\n                regexp;\n            if (!selector || !search) return;\n            try {\n                document.body.querySelector(selector);\n            } catch (e) {\n                console.debug('widgetStringSearch', this, 'search', e);\n                return;\n            }\n            try {\n                if (/^\\/.+\\/[gimuy]*$/i.test(search)) {\n                    var match = search.match(/^\\/(.+)\\/([gimuy]*)$/);\n                    var pattern = match[1],\n                        flags = match[2];\n                    if (!/g/.test(flags)) flags += 'g';\n                    regexp = RegExp(pattern, flags);\n                } else regexp = RegExp(search, 'g');\n            } catch (e) {\n                console.debug('widgetStringSearch', this, 'regexp', e);\n                return;\n            }\n            registry.push({ selector: selector, element: this, regexp: regexp });\n        });\n        function loop(registry) {\n            registry.forEach(function(reg) {\n                $(reg.element).text(($('html').find(reg.selector).text().match(reg.regexp) || []).length);\n            });\n        }\n        setInterval(loop, 3000, registry);\n        loop(registry);\n    });\n});</script><!--{/if}--></includeonly>"}}}