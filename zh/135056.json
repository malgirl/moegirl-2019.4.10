{"parse":{"title":"\u6a21\u5757:\u4e1c\u65b9Project","pageid":293980,"wikitext":{"*":"-- \u6a21\u5757:\u4e1c\u65b9Project\n-- \u6a21\u5757:\u4e1c\u65b9Project:\u79f0\u53f7\n-- \u6a21\u5757:\u4e1c\u65b9Project:\u97f3\u4e50\n-- \u6a21\u5757:\u4e1c\u65b9Project:\u7b26\u5361\n\nlocal titleZh = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u79f0\u53f7(\u4e2d\u6587)\")\nlocal titleJp = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u79f0\u53f7(\u65e5\u6587)\")\nlocal musicZh = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u97f3\u4e50(\u4e2d\u6587)\")\nlocal musicJp = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u97f3\u4e50(\u65e5\u6587)\")\nlocal spellcardZh = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u7b26\u5361(\u4e2d\u6587)\")\nlocal spellcardJp = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u7b26\u5361(\u65e5\u6587)\")\nlocal spellcardStage = mw.loadData(\"\u6a21\u5757:\u4e1c\u65b9Project:\u7b26\u5361(\u4f4d\u7f6e)\")\nlocal p = {}\n\nlocal function getTitle(charName, workName, lang)\n    local title\n    if lang == \"zh\" then\n        title = titleZh[charName][workName]\n    elseif lang == \"jp\" then\n        title = titleJp[charName][workName]\n    else\n        return \"Invalid Input\"\n    end\n    if title then\n        return title\n    else\n        return \"Title Not Found\"\n    end\nend\n\nlocal function getMusic(workName, order, lang)\n    local music\n    if lang == \"zh\" then\n        music = musicZh[workName][order]\n    elseif lang == \"jp\" then\n        music = musicJp[workName][order]\n    else\n        return \"Invalid Input\"\n    end\n    if music then\n        return music\n    else\n        return \"Music Not Found\"\n    end\nend\n\nlocal function getSC(charName, workName, order, lang)\n    local spellcard\n    if lang == \"zh\" then\n        spellcard = spellcardZh[charName][workName][order]\n    elseif lang == \"jp\" then\n        spellcard = spellcardJp[charName][workName][order]\n    else\n        return \"Invalid Input\"\n    end\n    if spellcard then\n        return spellcard\n    else\n        return \"Spell Card Not found\"\n    end\nend\n\nlocal function printSC(charName, workName)\n    local tableprint = '<table class=\"wikitable\"><tr><th>\u7b26\u5361\u539f\u540d</th><th>\u7b26\u5361\u8bd1\u540d</th><th>\u4f7f\u7528\u573a\u5408</th></tr>'\n    local zh, jp, stage\n    local num = spellcardZh[charName][workName][\"n\"]\n    for i = 1,num do\n        zh = spellcardZh[charName][workName][i]\n        jp = spellcardJp[charName][workName][i]\n        stage = spellcardStage[charName][workName][i]\n        zh = '<td>' .. zh .. '</td>'\n        jp = '<td>' .. '<span lang=\"ja\" xml:lang=\"ja\">-{' .. jp .. '}-</span>' .. '</td>'\n        stage = '<td>' .. stage .. '</td>'\n        tableprint = tableprint .. '<tr>' .. jp .. zh .. stage .. '</tr>'\n    end\n    return tableprint\nend\n\n--\u79f0\u53f7\n--{{#invoke:\u4e1c\u65b9Project|\u79f0\u53f7|\u89d2\u8272|\u4f5c\u54c1(\u542b\u4f4d\u7f6e\u6216\u987a\u6b21)|\u8bed\u8a00}}\np[\"\u79f0\u53f7\"] = function(frame)\n    local charName = frame.args[1]\n    local workName = frame.args[2]\n    local lang = frame.args[3]\n    return getTitle(charName, workName, lang)\nend\n\n--\u97f3\u4e50\n--{{#invoke:\u4e1c\u65b9Project|\u97f3\u4e50|\u4f5c\u54c1|\u987a\u6b21(\u5b57\u7b26\u4e32)|\u8bed\u8a00}}\np[\"\u97f3\u4e50\"] = function(frame)\n    local workName = frame.args[1]\n    local order = frame.args[2]\n    local lang = frame.args[3]\n    return getMusic(workName, order, lang)\nend\n\n--\u7b26\u5361\n--{{#invoke:\u4e1c\u65b9Project|\u7b26\u5361|\u89d2\u8272|\u4f5c\u54c1|\u987a\u6b21|\u8bed\u8a00}}\np[\"\u7b26\u5361\"] = function(frame)\n    local charName = frame.args[1]\n    local workName = frame.args[2]\n    local order = tonumber(frame.args[3])\n    local lang = frame.args[4]\n    return getSC(charName, workName, order, lang)\nend\n\n--{{#invoke:\u4e1c\u65b9Project|\u7b26\u5361\u8868|\u89d2\u8272|\u4f5c\u54c1}}\np[\"\u7b26\u5361\u8868\"] = function(frame)\n    local charName = frame.args[1]\n    local workName = frame.args[2]\n    return printSC(charName, workName)\nend\n\nreturn p"}}}