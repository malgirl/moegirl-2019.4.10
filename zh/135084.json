{"parse":{"title":"\u6a21\u5757:\u6c99\u76d2/Hcmzn","pageid":225315,"wikitext":{"*":"-- \u672c\u6a21\u5757\u4e3a\u4e2a\u4eba\u6d4b\u8bd5\u7528\nlocal data = mw.loadData(\"\u6a21\u5757:\u6218\u8230\u5c11\u5973:\u7279\u6b8a\u6570\u636e\")\nlocal enemies = mw.loadData(\"\u6a21\u5757:\u6218\u8230\u5c11\u5973:\u654c\u8230\u5c5e\u6027\u5217\u8868\")\nlocal alias = mw.loadData(\"\u6a21\u5757:\u6218\u8230\u5c11\u5973:\u522b\u540d\")\nlocal ships = data.ships\nlocal equipts = data.equipts\nlocal equiptDisplay = data.equiptDisplay\nlocal byIndex = data.byIndex\nlocal p = {}\n\nlocal function fixEquiptName(name)\n\tname = string.gsub(name, '\u2162', 'III')\n\tname = string.gsub(name, '\u2165', 'VI')\n\tname = string.gsub(name, '\u65e5\u672c', 'J\u56fd')\n\tname = string.gsub(name, '\u5fb7\u56fd', 'G\u56fd')\n\tname = string.gsub(name, '\u82f1\u56fd', 'E\u56fd')\n\tname = string.gsub(name, '\u7f8e\u56fd', 'U\u56fd')\n\tname = string.gsub(name, '\u610f\u5927\u5229', 'I\u56fd')\n\tname = string.gsub(name, '\u6cd5\u56fd', 'F\u56fd')\n\tname = string.gsub(name, '\u5fb7\u56fd', 'G\u56fd')\n\tname = string.gsub(name, '\u82cf\u8054', 'S\u56fd')\n\tname = string.gsub(name, '\u4e2d\u56fd', 'C\u56fd')\n\tlocal ret = alias.equiptName[name]\n\tif ret == nil then ret = name end\n\treturn ret\nend\n\np['\u81ea\u5e26'] = function(frame)\n\tlocal equiptName = frame.args[1]\n\tequiptName = fixEquiptName(equiptName)\n\tlocal ret = ''\n\tfor i = 1,1300 do\n\t\tlocal shipName = byIndex[i]\n\t\tif shipName ~= nil then\n\t\t\tlocal eq = {ships[shipName].eq1, ships[shipName].eq2, ships[shipName].eq3, ships[shipName].eq4}\n\t\t\tfor k = 1,4 do\n\t\t\t\tif eq[k] == equiptName then\n\t\t\t\t\tif i > 1000 and i < 2000 then\n\t\t\t\t\t\tlocal shipBaseName = byIndex[i - 1000]\n\t\t\t\t\t\tret = ret .. '[[\u6218\u8230\u5c11\u5973:' .. shipBaseName .. '|' .. shipName .. ']]\u3001'\n\t\t\t\t\telse\n\t\t\t\t\t\tret = ret .. '[[\u6218\u8230\u5c11\u5973:' .. shipName .. '|' .. shipName .. ']]\u3001'\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\tend\n\tret = string.sub(ret, 1, -4)\n\tif ret == '' then return ret\n\telse return ret .. '\u81ea\u5e26' end\nend\n\np['\u7b80\u4ecbdebug'] = function()\n\tlocal ret = '{| class=\"wikitable mw-collapsible mw-collapsed\" style=\"text-align:left\"\\n|-\\n! colspan=3 | \u7b80\u4ecb\u5bf9\u6bd4\u8868\\n|-\\n!\u8239\u540d!! colspan=2 | \u7b80\u4ecb'\n\tfor i = 1,400 do\n\t\tlocal shipName = byIndex[i]\n\t\tlocal mod = byIndex[i + 1000]\n\t\tif ships[shipName] ~= nil and ships[mod] ~= nil and ships[shipName]['\u7b80\u4ecb'] ~= ships[mod]['\u7b80\u4ecb'] then\n\t\t\tret = ret .. '\\n|-\\n! rowspan=2 |[[\u6218\u8230\u5c11\u5973:' .. shipName .. '|' .. shipName .. ']]\\n|\u6539\u524d||' .. ships[shipName]['\u7b80\u4ecb'] .. '\\n|-\\n|\u6539\u540e||' .. ships[mod]['\u7b80\u4ecb']\n\t\tend\n\tend\n\treturn ret .. '\\n|}'\nend\n\nreturn p"}}}