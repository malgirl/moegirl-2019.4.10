{"parse":{"title":"Widget:PrefixindexListTable","pageid":97442,"wikitext":{"*":"<noinclude>\u672cwidget\u662f\u4e3a\u4e86\u63d0\u5347{{tl|Subpagelist}}\u7684\u53ef\u8bc6\u522b\u6027\u800c\u8bbe\u7acb\u7684\n\n\u4f5c\u8005\uff1a[[User:Nbdd0121|XYZ\u6307\u793a\u7269]]\u3001[[User:AnnAngela]]</noinclude><includeonly><style>table.mw-prefixindex-list-table td{text-align:center;border:1px solid #a7d7f9;width:33%}table.mw-prefixindex-list-table{border-collapse:collapse;margin-bottom:1em;width:100%;}</style><!--{if !isset($wgPrefixindexListTable) || !$wgPrefixindexListTable}--><!--{assign var=\"wgPrefixindexListTable\" value=true scope=\"global\"}--><script>\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function() {\n    var sort = (function() {\n        var chinesenumSort = (function() {\n            var normalizationList = {\n                \"\u4e00\": '1',\n                \"\u4e8c\": '2',\n                \"\u4e09\": '3',\n                \"\u56db\": '4',\n                \"\u4e94\": '5',\n                \"\u516d\": '6',\n                \"\u4e03\": '7',\n                \"\u516b\": '8',\n                \"\u4e5d\": '9'\n            };\n\n            function alphanum(a, b) {\n                function chunkify(t) {\n                    var tz = new Array();\n                    var x = 0,\n                        y = -1,\n                        n = 0,\n                        i, j;\n                    while (i = (j = t.charAt(x++)).charCodeAt(0)) {\n                        var m = (i == 46 || (i >= 48 && i <= 57));\n                        if (m !== n) {\n                            tz[++y] = \"\";\n                            n = m;\n                        }\n                        tz[y] += j;\n                    }\n                    return tz;\n                }\n                var aa = chunkify(a);\n                var bb = chunkify(b);\n                for (x = 0; aa[x] && bb[x]; x++) {\n                    if (aa[x] !== bb[x]) {\n                        var c = Number(aa[x]),\n                            d = Number(bb[x]);\n                        if (c == aa[x] && d == bb[x]) {\n                            return c - d;\n                        } else return (aa[x] > bb[x]) ? 1 : -1;\n                    }\n                }\n                return aa.length - bb.length;\n            }\n\n            function chineseNorm(title) {\n                title = title.replace(/([\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d])\u5341([\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d])/g, '$1$2').replace(/\u5341(?=[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d])/g, '1').replace(/\u5341/g, '10');\n                title = title.replace(/[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]/g, function(c) {\n                    return normalizationList[c];\n                });\n                return title;\n            }\n            return function chinesenumSort(a, b) {\n                var na = chineseNorm(a);\n                var nb = chineseNorm(b);\n                return alphanum(na, nb);\n            }\n        })();\n        var proposalSort = (function() {\n            var methods = ['setFullYear', 'setMonth', 'setDate'];\n\n            function parse(text) {\n                var date = new Date(0);\n                if (!text) {\n                    return -1;\n                }\n                var match = Array.from(text.match(/\\((\\d{4}\\.\\d{1,2}\\.\\d{1,2})\\)/) || []);\n                if (!match[1]) {\n                    return -1\n                }\n                match[1].split('.').forEach(function(v, i) {\n                    date[methods[i]](v);\n                });\n                return date.getTime();\n            }\n            return function proposalSort(a, b) {\n                return parse(a) - parse(b);\n            }\n        })();\n        return function sort(a, b, t) {\n            switch (t) {\n                case \"chinesenum\":\n                    return chinesenumSort(a, b);\n                case \"proposal\":\n                    return proposalSort(a, b);\n                default:\n                    throw new ReferenceError('Widget:SortSubpageList: Type is not defined');\n            }\n        };\n    })();\n    $('.subpagelist').each(function() {\n        var $table = $(this);\n        var config = $table.find('.subpagelistConfig')[0];\n        var $list = $table.find('.mw-prefixindex-list');\n        var list = $list.find('li').toArray();\n        if (config && config.dataset) {\n            if (config.dataset.sort) {\n                list.sort(function(a, b) {\n                    return sort($(a).text(), $(b).text(), config.dataset.sort);\n                });\n            }\n            if (config.dataset.blueborder) {\n                var table = $('<table/>');\n                table.addClass('mw-prefixindex-list-table');\n                list.forEach(function(li, idx) {\n                    if (idx % 3 === 0) $('<tr/>').appendTo(table);\n                    $('<td/>').append($(li).children()).appendTo(table.find('tr').last());\n                });\n                var lastRow = table.find('tr').last();\n                for (var i = 0, l = 3 - lastRow.find('td').length; i < l; i++) {\n                    lastRow.append('<td/>');\n                }\n                $table.append(table);\n                $list.remove();\n            } else {\n                list.forEach(function(li) {\n                    $list.append(li);\n                });\n                for (var i = 0, l = 3 - list.length % 3; i < l; i++) {\n                    $list.append('<br>'); // \u9ed1\u79d1\u6280\uff0c\u7528 <br> \u6765\u8c03\u6574\n                }\n            }\n        }\n    });\n});\n</script><!--{/if}--></includeonly>"}}}