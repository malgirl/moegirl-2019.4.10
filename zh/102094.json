{"parse":{"title":"MediaWiki:Gadget-Backtotop.js","pageid":133507,"wikitext":{"*":"// <pre>\n/* \u56de\u5230\u9876\u90e8 */\n$(function() {\n    var body = document.body,\n        html = document.documentElement;\n    var innerWidth = window.innerWidth;\n    var scrollbarWidth;\n    switch (\"scroll\") {\n        case getComputedStyle(body).overflowY:\n            scrollbarWidth = innerWidth - body.clientWidth;\n            break;\n        case getComputedStyle(html).overflowY:\n            scrollbarWidth = innerWidth - html.clientWidth;\n            break;\n        default:\n            var backup = body.style.overflowY;\n            body.style.overflowY = \"scroll\";\n            scrollbarWidth = innerWidth - body.clientWidth;\n            body.style.overflowY = backup;\n    }\n    var btn = $(\"<div/>\", {\n        \"text\": \"\u8fd4\u56de\u9876\u90e8\",\n        \"attr\": {\n            \"title\": \"\u8fd4\u56de\u9876\u90e8\",\n            \"class\": \"backToTop\"\n        },\n        \"css\": {\n            \"user-select\": \"none\"\n        },\n        \"on\": {\n            \"click\": function() {\n                $(\"html, body\").animate({\n                    scrollTop: 0\n                }, 120);\n            }\n        }\n    }).appendTo(document.body);\n    if (scrollbarWidth === 0) {\n        btn.css(\"right\", \"20px\"); // \u4fee\u590d\u65b0\u7248 Chrome \u7684\u81ea\u52a8\u9690\u85cf\u5f0f\u6eda\u52a8\u6761\u5bfc\u81f4\u7684\u6309\u94ae\u88ab\u8986\u76d6 chrome://flags/#overlay-scrollbars\n    }\n    $(window).on(\"scroll\", function() {\n        $(document).scrollTop() > 0 ? btn.fadeIn() : btn.fadeOut();\n    }).scroll();\n});\n// </pre>"}}}