{"parse":{"title":"\u6a21\u5757:Error","pageid":264064,"wikitext":{"*":"-- \u8fd9\u4e2a\u6a21\u5757\u5b9e\u73b0\u4e86{{error}}\u3002\n\nlocal p = {}\n\nlocal function _error(args)\n    local message = args.message or args[1] or error('\u6ca1\u6709\u6307\u5b9a\u7684-{zh-cn:\u4fe1\u606f; zh-tw:\u8cc7\u8a0a}-', 2)\n    message = tostring(message)\n    local tag = mw.ustring.lower(tostring(args.tag))\n\n    -- \u5f04\u6e05\u695a\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48html\u6807\u7b7e\u3002\n    if not (tag == 'p' or tag == 'span' or tag == 'div') then\n        tag = 'strong'\n    end\n\n    -- \u751f\u6210html\u3002\n    local root = mw.html.create(tag)\n    root\n        :addClass('error')\n        :wikitext(message)\n\n    return tostring(root)\nend\n\nfunction p.error(frame)\n    local args\n    if frame == mw.getCurrentFrame() then\n        -- \u6211\u4eec\u6b63\u5728\u901a\u8fc7#invoke\u8fdb\u884c\u8c03\u7528\u3002 \u53c2\u6570\u4f20\u9012\u7ed9\u6a21\u5757\n        -- \u4ece\u6a21\u677f\u9875\u9762\uff0c\u6240\u4ee5\u4f7f\u7528\u4f20\u9012\u5230\u6a21\u677f\u7684\u53c2\u6570\u3002\n        args = frame.args\n    else\n        -- \u6211\u4eec\u6b63\u5728\u4ece\u53e6\u4e00\u4e2a\u6a21\u5757\u6216\u4ece\u8c03\u8bd5\u63a7\u5236\u53f0\u88ab\u8c03\u7528\uff0c\u6240\u4ee5\u5047\u8bbe\n        -- \u53c2\u6570\u76f4\u63a5\u4f20\u5165\u3002\n        args = frame\n    end\n    -- \u5982\u679c\u6d88\u606f\u53c2\u6570\u5b58\u5728\u4f46\u7a7a\u767d\uff0c\u5c06\u5176\u66f4\u6539\u4e3a\u96f6\uff0c\u4ee5\u4fbfLua\u5c06\u4f1a\n    -- \u8ba4\u4e3a\u5b83\u662f\u5047\u7684\u3002\n    if args.message == \"\" then\n        args.message = nil\n    end\n    return _error(args)\nend\n\nreturn p"}}}