{"parse":{"title":"Widget:Music163","pageid":273144,"wikitext":{"*":"<noinclude>Only for {{tl|Music163}}</noinclude><includeonly><!--{if !isset($wgMusic163) || !$wgMusic163}--><!--{assign var=\"wgMusic163\" value=true scope=\"global\"}--><script>\nwindow.RLQ.push(function() {\n    $(function() {\n        var types = ['playlist', 'album', 'song', 'program', 'djradio'];\n        var reg = $('.music163').toArray();\n        var run = function run() {\n            var self = $(this);\n            var id = this.dataset.id,\n                size = this.dataset.size === 'small' ? 'small' : 'big',\n                type = this.dataset.type,\n                title = this.dataset.title,\n                float = this.dataset.float,\n                width = parseInt(this.dataset.width),\n                height = parseInt(this.dataset.height);\n            var height_type;\n            //\u68c0\u6d4bID\u662f\u5426\u5408\u6cd5\uff08\u7eaf\u6570\u5b57\uff09\uff0c\u4e0d\u5408\u6cd5\u5219\u629b\u51fa\u5f02\u5e38\u3002\n            if (!/^\\d+$/.test(id)) return self.css('color', 'red').text('Error in widget:Music163: Invalid id.');\n            //\u68c0\u6d4b\u5bbd\u5ea6\u662f\u5426\u5408\u6cd5\uff08\u7eaf\u6570\u5b57\u3001260 < width < 510\uff09\uff0c\u4e0d\u5408\u6cd5\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002\n            if (isNaN(width) || width < 260 || width > 510) width = size === 'small' ? 278 : 310;\n            //\u68c0\u6d4b\u7c7b\u578b\u662f\u5426\u5408\u6cd5\uff08\u5728\u7c7b\u578b\u8868\u5185\uff09\uff0c\u5408\u6cd5\u5219\u66ff\u6362\u4e3a\u7c7b\u578b\u4e0b\u6807\uff0c\u4e0d\u5408\u6cd5\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002\n            if (types.includes(type)) type = types.indexOf(type);\n            else if (!/^\\d+$/.test(type) || !types[+type]) type = '2';\n            //\u68c0\u6d4b\u6d6e\u52a8\u7c7b\u578b\u662f\u5426\u5408\u6cd5\uff0c\u82e5\u4e0d\u4e3aleft\u6216right\u5219\u8bbe\u5b9a\u4e3anone\n            if (!['left', 'right'].includes(float)) float = 'none';\n            //\u68c0\u6d4b\u9ad8\u5ea6\u662f\u5426\u5408\u6cd5\uff1a\n            // 1\u3001\u5982\u679c\u662f\u5355\u66f2\u7c7b\uff0c\u9ad8\u5ea6\u4e3a\u56fa\u5b9a\u503c\uff0c\u9ad8\u5ea6\u7c7b\u578b\u4e3a\u56fa\u5b9a\u503c\u51cf\u53bb20\uff1b\n            if (['2', '3'].includes(type)) {\n                height = size === 'small' ? 52 : 86;\n                height_type = height - 20;\n            }\n            // 2\u3001\u5982\u679c\u662f\u5217\u8868\u7c7b\uff0c\u5c0f\u64ad\u653e\u5668\u7684\u9ad8\u5ea6\u4e3a\u56fa\u5b9a\u503c\uff0c\u9ad8\u5ea6\u7c7b\u578b\u4e3a\u56fa\u5b9a\u503c\u51cf\u53bb20\uff1b\n            else if (size === 'small') {\n                height = 110;\n                height_type = height - 20;\n            }\n            // 3\u3001\u5927\u64ad\u653e\u5668\u7684\u9ad8\u5ea6\u5982\u679c\u4e0d\u5408\u6cd5\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\uff0c\u9ad8\u5ea6\u7c7b\u578b\u4e3a\u9ed8\u8ba4\u503c\u51cf\u53bb20\uff1b\n            else if (isNaN(width) || width < 210 || width > 520) {\n                height = size === 'small' ? 110 : 450;\n                height_type = height - 20;\n            }\n            // 4\u3001\u5982\u679c\u5408\u6cd5\u5219\u9ad8\u5ea6\u7c7b\u578b\u4e3a\u56fa\u5b9a\u503c\u3002\n            else height_type = 430;\n            self.empty().append('<iframe src=\"//music.163.com/outchain/player?type=' + type + '&id=' + id + '&auto=0&height=' + height_type + '\" style=\"width: ' + width + 'px; height: ' + height + 'px;\"></iframe><a rel=\"nofollow noreferrer noopener\" class=\"external text\" href=\"https://music.163.com/#/' + types[+type] + '?id=' + id + '\" target=\"_blank\"><img src=\"https://s1.music.126.net/music.ico\"></a>').attr('title', (this.title || 'id ' + id) + ' - \u7f51\u6613\u4e91\u97f3\u4e50');\n            if (float !== 'none') self.addClass('float-' + float);\n            if (reg.length) self.find('iframe')[0].addEventListener('load', run.bind(reg.shift()));\n        };\n        run.bind(reg.shift())();\n    });\n});\n</script><style>\n.music163 {\n    max-width: 550px;\n    position: relative;\n}\n.music163>* {\n    vertical-align: middle;\n}\n.music163 iframe {\n    border: none;\n    margin: 0;\n}\n.music163 img {\n    height: 1rem;\n    margin-left: .25rem;\n}\n.music163>a {\n    position: absolute;\n    top: 13px;\n}\n.music163[data-size=\"big\"]>a {\n    top: 23px;\n}\n.music163[data-type=\"0\"]>a,\n.music163[data-type=\"1\"]>a,\n.music163[data-type=\"4\"]>a {\n    top: 26px;\n}\n.music163.float-left {\n    float: left;\n    padding-right: 33px;\n}\n.music163.float-right {\n    float: right;\n    padding-right: 33px;\n}\n</style><!--{/if}--></includeonly>"}}}