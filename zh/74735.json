{"parse":{"title":"User:\u5546\u706b/vcep.js","pageid":269318,"wikitext":{"*":"/*\n*\u540d\u79f0\uff1aVC Editor Plus (\u7b80\u79f0VCEP)\n*\u4f5c\u8005\uff1a\u5546\u706b\n*\u7248\u672c\u53f7\uff1aBeta 1.2\n*\u529f\u80fd\u63cf\u8ff0\uff1a\u8f85\u52a9VC\u7f16\u8f91\u8005\u7684\u5de5\u5177\u96c6\u5408\n*\u5b89\u88c5\u65b9\u6cd5\uff1a\u5728\u4e2a\u4ebajs\u9875\u6dfb\u52a0\u4ee3\u7801 mw.loader.load('/index.php?title=User:\u5546\u706b/vcep.js&action=raw&ctype=text/javascript');\n*/\n\n//VC Editor Plus \u8f85\u52a9\u529f\u80fd\u90e8\u5206\n\n//\u589e\u5f3a\u641c\u7d22\u680f\n$('#p-search').after('<form action=\"http://api.bilibili.com/archive_stat/stat\" ><br /><br /><br /><input type=\"number\" name=\"aid\" size=\"20\" placeholder=\"\u8f93\u5165\u756a\u53f7\u83b7\u53d6B\u7ad9\u6570\u636e\">&nbsp;<input type=\"submit\" formtarget=\"_blank\" value=\"\u63d0\u4ea4\"></form><form action=\"http://search.bilibili.com/all\" ><input type=\"text\" name=\"keyword\" size=\"20\" placeholder=\"\u641c\u7d22Bilibili\">&nbsp;<input type=\"submit\" formtarget=\"_blank\" value=\"\u63d0\u4ea4\"></form>');\n\n//\u76d1\u89c6\u5668\u9875\u9762\n$('#n-recentchanges').after('<li id=\"vcpatroller\"><a href=\"https://zh.moegirl.org/index.php?target=Vocaloid\u4e2d\u6587\u6bbf\u5802\u66f2&showlinkedto=1&title=Special:%E7%9B%B8%E5%85%B3%E6%9B%B4%E6%94%B9\" title=\"\u67e5\u770b\u5927\u90e8\u5206VC\u76f8\u5173\u9875\u9762\u7684\u66f4\u6539\">VC\u5de1\u67e5</a></li>');\n\n//\u5373\u65f6\u6570\u636e\u67e5\u770b\nfunction imitateData(){\n\t$('.bilibiliCount').each(function(){\n\t\tvar biliAid = $(this).data(\"bilibili-count-id\");\n\t\t$(this).html('<a target=\"_blank\" href=\"http://api.bilibili.com/archive_stat/stat?aid=' + biliAid + '\">' + $(this).html() + '</a>');\n\t});\n}\n\n//VC Editor Plus \u4ee3\u7801\u5408\u6210\u5668\u90e8\u5206\n//\u4e3b\u9875\u9762\n$('#footer').after('<div id=\"vcep\" style=\"z-index:-2\"></div><div id=\"vcep_toggle\" style=\"transition:.37s all ease-in-out;width:20px;padding:5px 0;background-color:#000;color:#fff;font-size:8px;text-align:center;position:fixed;right:0;top:100px;cursor:pointer;opacity:.6;\" onclick=\"vcepmainpage()\">\u542f<br/>\u52a8<br/>V<br/>C<br/>E<br/>P</div>');\nfunction vcepmainpage(){\n\tdocument.getElementById('vcep_toggle').innerHTML=\"\u91cd<br/>\u542f<br/>V<br/>C<br/>E<br/>P</div\";\n\tdocument.getElementById('vcep').innerHTML='<div style=\"position:fixed; top:50px; right:calc(50% - 450px); width:860px; background:#fff; border:solid 1px; padding:20px\" id=\"vcepmainpage\"><h2 align=\"center\">\u6b22\u8fce\u4f7f\u7528VC Editor Plus</h2><p>VC Editor Plus\uff08\u4ee5\u4e0b\u7b80\u79f0VCEP\uff09\u662f\u840c\u767eVC\u533a\u7f16\u8f91\u7ec4\u6210\u5458<a href=\"/User:\u5546\u706b\" title=\"User:\u5546\u706b\">\u5546\u706b</a>\u5f00\u53d1\uff0c\u9762\u5411VC\u533a\u7f16\u8f91\u8005\u7684\u8f85\u52a9\u5de5\u5177\uff0c\u76ee\u524d\u4ecd\u5904\u4e8e\u5f00\u53d1\u4e0e\u6d4b\u8bd5\u72b6\u6001\u3002</p><p>VCEP\u5de5\u5177\u57fa\u4e8eJavaScript\u8bed\u8a00\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u6d4f\u89c8\u5668\u652f\u6301\u57fa\u7840\u7684JavaScript\u3002</p><p>\u5982\u679c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6709\u4efb\u4f55\u95ee\u9898\u6216\u610f\u89c1\uff08\u7a0b\u5e8f\u6216\u662f\u754c\u9762\u89c2\u611f\uff09\uff0c\u8bf7<a href=\"/User_talk:\u5546\u706b\" title=\"User_talk:\u5546\u706b\">\u8054\u7cfb\u672c\u4eba</a>\u63d0\u51fa\uff0c\u672c\u4eba\u5c06\u5c3d\u529b\u89e3\u51b3\u3002\u540c\u65f6\u7531\u4e8e\u5f00\u53d1\u8005\u662f\u4e00\u4e2a\u57fa\u672c\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u7684\u65b0\u624b\uff0c\u5e0c\u671b\u5404\u4f4d\u5927\u4f6c\u591a\u591a\u6307\u6559~</p><p>\u6d4b\u8bd5\u4e0e\u5b8c\u5584\u4e2d\u7684\u529f\u80fd\uff1a<li><button onclick=\"temple()\">\u6dfb\u52a0\u6bbf\u5802\uff08\u751f\u6210\u7528\u4e8e\u6bbf\u5802\u66f2\u4e00\u89c8\u7684wiki\u4ee3\u7801\uff09</button></li><li>\u5373\u65f6\u6570\u636e\u67e5\u770b\uff08\u81ea\u52a8\u542f\u7528\uff09</li></p><p>\u5f00\u53d1\u4e2d\u7684\u529f\u80fd\uff1a<ul><li>P\u4e3b\u4f5c\u54c1\u66f4\u65b0\uff08\u7528\u4e8eP\u4e3b\u4f5c\u54c1\u4e00\u89c8\u8868\uff09</li><li>\u521b\u5efa\u65b0\u66f2\u8bcd\u6761</li></ul></div><div style=\"position:fixed; top:50px; right:calc(50% - 450px);\" title=\"\u9690\u85cfVCEP\"><button onclick=\"hidevcep()\" style=\"border:transparent; background:transparent;\"><span style=\"font-size:120%\">\u2014</span></button></div>';\n\timitateData();\n}\nfunction exitvcep(){\n\tdocument.getElementById('vcep').innerHTML=\"\";\n}\nfunction hidevcep(){\n\t$('#vcep').hide();\n\t$('#vcep_toggle').attr(\"onclick\", \"showvcep()\").html(\"\u663e<br/>\u793a<br/>V<br/>C<br/>E<br/>P</div\");\n}\nfunction showvcep(){\n\t$('#vcep').show();\n\t$('#vcep_toggle').attr(\"onclick\", \"vcepmainpage()\").html(\"\u91cd<br/>\u542f<br/>V<br/>C<br/>E<br/>P</div\");\n}\n\n//\u6bbf\u5802\u66f2\u6dfb\u52a0\u9875\u9762\nfunction temple(){\n\tdocument.getElementById(\"vcep\").innerHTML='<div style=\"position:fixed; top:50px; right:calc(50% - 450px); width:860px; background:#fff; border:solid 1px; padding:18px\" id=\"vceptemple\"><h2 align=\"center\">\u6b22\u8fce\u4f7f\u7528VC Editor Plus\uff0c\u60a8\u73b0\u5728\u4f7f\u7528\u7684\u529f\u80fd\u662f\uff1a\u6dfb\u52a0\u6bbf\u5802</h2><form id=\"templeform\">*\u66f2\u540d\uff1a<input type=\"text\" placeholder=\"\u8f93\u5165\u6b4c\u66f2\u540d\" name=\"keyword\"/> <input type=\"submit\" value=\"\u641c\u7d22bilibili\" formtarget=\"_blank\" formaction=\"http://search.bilibili.com/all\"/><fieldset><legend>\u6b4c\u66f2\u4fe1\u606f\u8c03\u67e5\uff08\u5c06\u9f20\u6807\u79fb\u5230\u90e8\u5206\u6587\u672c\u4e0a\u53ef\u67e5\u770b\u8be6\u7ec6\u8bf4\u660e\uff09\uff1a</legend><span title=\"\u201c\u624b\u52a8\u68c0\u67e5\u201d\u5c06\u6253\u5f00\u756a\u53f7\u5bf9\u5e94\u7684\u89c6\u9891\u4fe1\u606f\u9875\uff0c\u8bf7\u52a1\u5fc5\u786e\u8ba4\u201cview\u201d\u540e\u7684\u6570\u5b57\u662f\u5426\u5927\u4e8e100000\">*\u756a\u53f7</span>\uff1a<input type=\"number\" name=\"aid\" placeholder=\"\u8f93\u5165PV\u756a\u53f7(Bilibili)\" /> <input type=\"submit\" value=\"\u624b\u52a8\u68c0\u67e5\" formtarget=\"_blank\" formaction=\"http://api.bilibili.com/archive_stat/stat\" /> *UP\u4e3b\uff1a<input type=\"text\" name=\"uploader\" placeholder=\"\u8f93\u5165UP\u4e3bID\" /> *\u6295\u7a3f\u65f6\u95f4\uff1a<input type=\"text\" name=\"time\" size=\"19\" placeholder=\"\u683c\u5f0f\uff1a2012-07-13 00:00\"/><br/><br/>*\u7b2c\u4e00\u989c\u8272\uff1a<select name=\"firstcolor\"><option>#66CCFF</option><option>#EE0000</option><option>#00FFCC</option><option>#EE82EE</option><option>#9999FF</option><option>#006666</option><option>#39C5BB</option><option>#777777</option></select> \u7b2c\u4e8c\u989c\u8272\uff1a<select name=\"secondcolor\"><option value=\"0\">(none)</option><option>#66CCFF</option><option>#EE0000</option><option>#00FFCC</option><option>#EE82EE</option><option>#9999FF</option><option>#006666</option><option>#39C5BB</option><option>#777777</option></select> <span title=\"\u6bdb\u6bdb\u866bP\u9664\u5916\">\u539f\u4f5c\u8005\uff1a</span><input type=\"text\" name=\"originalproducer\" size=\"15\" placeholder=\"\u9009\u586b\uff0c\u4ee3\u6295\u65f6\u4f7f\u7528\" /> <span title=\"\u5f53\u539f\u66f2\u76ee\u5c5e\u4e8e\u840c\u767e\u6536\u5f55\u8303\u56f4\u65f6\uff0c\u76f4\u63a5\u586b\u5165\u66f2\u76ee\u540d\uff08\u5e26\u6d88\u6b67\u4e49\uff09\uff1b\u5f53\u4e0d\u5c5e\u4e8e\u65f6\uff0c\u586b\u5165\u201cnone\u201d\u3002\u539f\u521b\u66f2\u52ff\u586b\u6b64\u9879\u3002\">\u539f\u66f2\u8bcd\u6761\uff1a</span><input type=\"text\" name=\"originalsong\" placeholder=\"\u9009\u586b\uff0c\u7ffb\u5531\u65f6\u4f7f\u7528\"/><br/><br/>\u6d88\u6b67\u4e49\uff1a<input type=\"text\" name=\"disambig\" placeholder=\"\u9009\u586b\uff0c\u8bcd\u6761\u540d\u62ec\u53f7\u4e2d\u5185\u5bb9\" /> <span title=\"\u201c\u68c0\u67e5\u56fe\u7247\u201d\u7528\u4e8e\u786e\u8ba4\u6587\u4ef6\u662f\u5426\u5b58\u5728\u4e14\u786e\u4e3a\u89c6\u9891\u5c01\u9762\">*\u5c01\u9762\u6587\u4ef6\uff1a</span><input type=\"text\" name=\"cover\" size=\"52\" placeholder=\"\u8f93\u5165\u840c\u5a18\u5171\u4eab\u6587\u4ef6\u540d\uff0c\u5e26\u540e\u7f00\" /> <input type=\"button\" onclick=\"checkpic()\" value=\"\u68c0\u67e5\u56fe\u7247\"/></fieldset><input type=\"button\" style=\"border-style:outset; color:red; border-color:red; background:transparent; padding:5px; width:100%; float:right;\" value=\"\u786e\u8ba4\u5e76\u63d0\u4ea4\" onclick=\"composer()\"></form><br/><div id=\"newwikitext\" style=\"margin-top:20px; border:dashed 1px; max-height:200px; overflow:auto; padding:10px; font-size:14px;\">Wiki\u4ee3\u7801\u5c06\u4e8e\u6b64\u5904\u8f93\u51fa</div></div><div style=\"position:fixed; top:50px; left:calc(50% - 450px);\"><button onclick=\"vcepmainpage()\" style=\"border:transparent; background:transparent;\"><span style=\"font-size:150%\" title=\"\u8fd4\u56de\u4e3b\u754c\u9762\">\u21e6</span></button></div><div style=\"position:fixed; top:50px; right:calc(50% - 450px);\"  title=\"\u9690\u85cfVCEP\"><button onclick=\"hidevcep()\" style=\"border:transparent; background:transparent;\"><span style=\"font-size:120%\">\u2014</span></button></div>';\n}\nfunction checkpic(){\n\tvar fm = document.getElementById('templeform');\n\tvar imagename = fm.elements.cover.value;\n\twindow.open('https://commons.moegirl.org/File:' + imagename);\n}\n\n//\u6bbf\u5802\u66f2\u4ee3\u7801\u5408\u6210\u5668\nfunction composer(){\n\tvar fm = document.getElementById('templeform');\n\tvar songname = fm.elements.keyword.value;\n\tvar aid = fm.elements.aid.value;\n\tvar uploadtime = fm.elements.time.value;\n\tvar uploader = fm.elements.uploader.value;\n\tvar firstcolor = fm.elements.firstcolor.value;\n\tvar secondcolor = fm.elements.secondcolor.value;\n\tvar colortext = \"\";\n\tif (secondcolor !== '0') {\n\t\tcolortext = \"|First color = \" + firstcolor + \"<br />|Second color = \" + secondcolor + \"<br/>\";\n\t}\n\t\telse {\n\t\t\tcolortext = \"|color = \" + firstcolor + \"<br/>\";\n\t\t}\n\tvar originalsong = fm.elements.originalsong.value;\n\tvar originaltext = \"\";\n\tif (originalsong) {\n\t\tif (originalsong == \"none\") {\n\t\t\toriginaltext = \" (\u7ffb)\";\n\t\t}\n\t\telse {\n\t\t\toriginaltext = \" ([[\" + originalsong + \"|\u7ffb]])\";\n\t\t}\n\t}\n\tvar disambig = fm.elements.disambig.value;\n\tvar songnametext = \"\";\n\tif (disambig) {\n\t\tsongnametext = \"[[\" + songname + \"(\" + disambig + \")|\" + songname + \"]]\";\n\t}\n\telse {\n\t\tsongnametext = \"[[\" + songname + \"]]\";\n\t}\n\tvar originalproducer = fm.elements.originalproducer.value;\n\tvar uploadertext = \"\";\n\tif (originalproducer) {\n\t\tuploadertext = \"[[\" + uploader + \"]]&lt;ref&gt;P\u4e3b\u4e3a[[\" + originalproducer + \"]]\uff0c\u7531\" + uploader + \"\u4ee3\u6295&lt;/ref&gt;\";\n\t}\n\telse {\n\t\tuploadertext = \"[[\" + uploader + \"]]\";\n\t}\n\tvar cover = fm.elements.cover.value;\n\tvar text = \"{{China Temple Song<br/>\" + colortext + \"|bb_id = av\" + aid + \"<br/>|\u66f2\u76ee = \" + songnametext + originaltext + \"<br />|UP\u4e3b = \" + uploadertext + \"<br />|\u6295\u7a3f\u65f6\u95f4 = \" + uploadtime + \"<br />|\u518d\u751f\u6570\u91cf = {{BilibiliCount|id=\" + aid + \"}}<br />|image link = {{filepath:\" + cover + \"}}}}\";\n\tdocument.getElementById('newwikitext').innerHTML = text;\n}"}}}