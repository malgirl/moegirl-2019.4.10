{"parse":{"title":"Widget:Bilibili","pageid":15916,"wikitext":{"*":"<noinclude>\n{{info\n|title=\u672cwidget\u5df2\u88ab\u6807\u8bb0\u4e3a\u201c\u5f03\u7528\u201d\uff01\n|text= \u672cwidget'''\u4e0d\u518d\u4ea7\u751f'''\u89c6\u9891\u64ad\u653e\u5668\uff0c\u6211\u4eec\u63a8\u8350\u4f60\u4f7f\u7528\u66f4\u597d\u7684\u6a21\u677f{{tl|BilibiliVideo}}\uff01\n|text-style= color: red;\n|leftimage= [[File:Dialog-error.svg|60px|link=]]\n|color= red\n}}\n\n*\u81f4\u840c\u5a18\u767e\u79d1\u5404\u4f4d\u7528\u6237\uff0c\u4ee5\u53ca\u5176\u4ed6mediawiki\u767e\u79d1\u7ad9\u70b9\u4f7f\u7528\u6216\u501f\u9274\u4e86\u8be5Widget:Bilibili\u63d2\u4ef6\u7684\u7ba1\u7406\u5458\u548c\u7528\u6237\n*\u81ea2012\u5e74\u8d77\u7b2c\u4e00\u7248Widget:Bilibili\u81f3\u4eca\uff0c\u8be5\u63d2\u4ef6\u4e00\u76f4\u643a\u5e26\u6709XSS\u6f0f\u6d1e\u3002\u5176\u8d77\u56e0\u662fescape:'html'\u88ab\u591a\u5904\u6ee5\u7528\u5e76\u4e14\u6ca1\u6709\u8fdb\u884cvalidate:int\u7b49\u8f93\u5165\u68c0\u67e5\u3002\u8be5Widget\u7684\u6700\u65b0\u7248\u4fee\u6b63\u4e86\u5927\u90e8\u5206XSS\u95ee\u9898\u3002\n*\u4e3a\u4e86\u907f\u514d\u672a\u6765\u7531\u4e8e\u591a\u4eba\u7ef4\u62a4\u9020\u6210\u65b0\u7684XSS\u6f0f\u6d1e\uff0c\u540c\u65f6\u4e5f\u4e3a\u4e86\u65b9\u4fbf\u7528\u6237\u4f7f\u7528\uff0c\u4ee5\u53ca\u7edf\u8ba1\u4f7f\u7528\u7387\u3002\u6211\u4eec\u5c06\u8be5\u63d2\u4ef6\u5206\u62c6\u6210\u4e86widget\u6838\u5fc3+\u5f15\u7528\u6a21\u677f\u6a21\u5f0f\u3002\u76f4\u63a5\u4f7f\u7528widget\u4e0d\u4f1a\u83b7\u5f97\u4efb\u4f55\u8f93\u51fa\u7ed3\u679c\uff0c\u9700\u8981\u4f7f\u7528\u6a21\u677f\u4f20\u9012\u53c2\u6570\u3002\u53c2\u6570\u901a\u8fc7\u6a21\u677f\u4f20\u9012\u671f\u95f4\u4f1a\u88abmediawiki\u81ea\u5e26\u7684\u8fc7\u6ee4\u68c0\u67e5\u5668\u8fdb\u884c\u8f6c\u6362\u8fc7\u6ee4\u3002\u8fd9\u53ef\u4ee5\u6700\u5927\u7a0b\u5ea6\u4e0a\u907f\u514d\u56e0widget\u7f16\u5199\u5931\u8bef\u9020\u6210\u7684XSS\u6f0f\u6d1e\u4ea7\u751f\u7834\u574f\u3002\n*\u8fd9\u4e2a\u65e7\u7248widget\u5728\u8fc7\u6e21\u671f\u95f4\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u90e8\u5206\u529f\u80fd\u53ef\u80fd\u56e0\u6f0f\u6d1e\u4fee\u590d\u800c\u53d7\u9650\u3002\n*\u5173\u4e8e\u65b0\u6a21\u5f0f\u4e0b\u7684BilibiliVideo\u4f7f\u7528\uff0c\u53c2\u89c1: '''[[\u6a21\u677f:BilibiliVideo]]'''\n----\n*\u8be5widget\u7ecf\u540e\u53f0\u68c0\u6d4b\u57fa\u672c\u4e0a\u5df2\u65e0\u4f7f\u7528\uff0c\u6545\u5c06\u5176\u6539\u4e3a\u81ea\u52a8\u7f16\u8f91\uff0c\u5c06\u9875\u9762\u4e2d\u7684\u300e{{#Widget:Bilibili|\u300f\u66f4\u6539\u4e3a\u300e{{BilibiliVideo|\u300f\u3002\u8bf7\u4e0d\u8981\u518d\u4f7f\u7528\u672cwidget\u3002\u2014\u2014<span style=\"opacity:0.73;font-family:Times New Roman;font-style:italic\">[[User:AnnAngela|From]] <span style=\"color:#ff00ff;\">Ann</span>Angela the [[\u840c\u5a18\u767e\u79d1:\u7ba1\u7406\u5458|sysop]]</span> <span style=\"font-family:Times New Roman;\">([[User talk:AnnAngela|Talk]])</span> 2017\u5e749\u670812\u65e5 (\u4e8c) 23:02 (CST)\n\n\n</noinclude>\n<includeonly><script>\nwindow.RLQ.push(function() {\n    mw.loader.using('mw.Api').then(function() {\n        'use strict';\n        var api = new mw.Api();\n        if (!mw.config.get('wgUserId')) return;\n        $.get('https://zh.moegirl.org/' + mw.config.get('wgPageName') + '?action=raw&debug=1&_=' + new Date().getTime(), function(d) {\n            if (!/\\{\\{\\#widget:bilibili\\|/i.test(d)) return;\n            api.postWithToken('csrf', {\n                action: 'edit',\n                format: 'json',\n                text: d.replace(/\\{\\{\\#widget:bilibili\\|/gi, '{{BilibiliVideo|') + '\\n',\n                summary: '\u624b\u52a8\u66ff\u6362\uff1a\u300e{{#Widget:Bilibili|\u300f\u2192\u300e{{BilibiliVideo|\u300f',\n                minor: true,\n                title: mw.config.get('wgPageName'),\n                nocreate: true,\n                tags: 'widgetBilibili'\n            }, {\n                timeout: 99999\n            }).then(function() {\n                var opt = {\n                    action: 'purge',\n                    format: 'json',\n                    forcelinkupdate: true,\n                    titles: mw.config.get('wgPageName')\n                };\n                api.post(opt).then(function() {\n                    setTimeout(function() {\n                        api.post(opt).then(location.reload.bind(location), console.debug.bind(console));\n                    }, 370);\n                }, console.debug.bind(console));\n            }, console.debug.bind(console));\n        });\n    });\n});\n</script>\n</includeonly>"}}}