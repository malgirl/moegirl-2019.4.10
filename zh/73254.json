{"parse":{"title":"User:Septluna/vector.js","pageid":263156,"wikitext":{"*":"//<pre>\n$(\"#p-cactions ul\").append('<li id=\"btn-deltool\" onclick=\"delfunc()\"><a title=\"\u6302\u5220\">\u6302\u5220\u6807\u8bb0</a></li>');\n$(\"#p-cactions ul\").append('<li id=\"btn-ioctool\" onclick=\"createioc()\"><a title=\"\u6ce8\u5165\u5de5\u5177\">\u6ce8\u5165\u5de5\u5177</a></li>');\n\nfunction delfunc(){\n$.ajax( {\n    url: 'https://zh.moegirl.org/api.php',\n    data: {action: 'query',meta:'tokens',format: 'json',type:'csrf|watch|patrol'},\n    dataType: 'json',\n    type: 'POST',\n    headers: { 'Api-User-Agent': 'Example/1.0' },\n    success: function(data) {\n        $.ajax( {\n            url: 'https://zh.moegirl.org/api.php',\n            data: {\n                format: 'json',action: 'edit',\n                token:data.query.tokens.csrftoken,\n                title:'User:\u4e5d\u6c5f\u6708/\u6302\u5220',\n                section:mw.config.get(\"wgUserGroups\").includes(\"patroller\")?1:2,\n                summary:\"Request from [[user:\"+ mw.config.get(\"wgUserName\")+\"]]\",\n                appendtext:\"\\n*[[\"+mw.config.get(\"wgPageName\")+\"]]--~~~~\"\n            },\n            dataType: 'json',\n            type: 'POST',\n            headers: { 'Api-User-Agent': 'Example/1.0' },\n            success: function(data) {\n                console.log(data);\n              },\n            error: function( xhr ) {\n            alert( 'Error: Edit Request failed.' );\n            }\n        });\n    },\n    error: function( xhr ) {\n        alert( 'Error: Token Request failed.' );\n    }\n} );\n}\n\n$(document).ready( function() {\nif($(\"#specialchars\").length>0){\nvar charsets = [\n//\u5728\u8fd9\u91cc\u63d2\u5165\u9b54\u672f\u5b57\uff0cstart\u662f\u5149\u6807\u524d\u6587\u672c\uff0cend\u662f\u5149\u6807\u540e\u6587\u672c\uff0cid\u8bbe\u7f6e\u5143\u7d20id\u5c5e\u6027\uff0ccss\u8bbe\u7f6e\u5143\u7d20\u6837\u5f0f\uff0ctext\u662f\u663e\u793a\u6587\u672c\uff08\u503c\u4e3apanel\u65f6=\u5bb9\u5668\u3001\u4e3a<br/>\u65f6=\u6362\u884c\u7b26\uff09\n//valfunc\u5b9a\u4e49\u53c2\u6570\u8868\u793a\u5f0f\uff0cx\u6307\u4ee3\u5faa\u73af\u6b21\u6570\uff1bparent\u5b9a\u4e49\u8be5\u5143\u7d20\u6240\u5728\u7236\u7ea7\u5143\u7d20\u5185\uff1btarget\u8868\u793a\u8be5\u5143\u7d20\u6240\u53d6\u4ee3\u4f4d\u7f6e\u53ea\u80fd\u5d4c\u51651\u4e2a\u4f4d\u7f6e\uff1bcount\u8868\u793a\u8be5\u5143\u7d20\u91cd\u590d\u6b21\u6570\uff0chyperText\u5c06\u8986\u76d6Text\u5e76\u8bbe\u7f6e\u4e3a\u9ad8\u7ea7\u6587\u672c\n{start:\"{{#vardefine:\",end:\"|}}\",text:\"\u3010\u58f0\u660e\u53d8\u91cf\u3011\"},{start:\"{{#var:\",end:\"}}\",text:\"\u3010\u5f15\u7528\u53d8\u91cf\u3011\"},\n{start:\"{{#switch:{{{1\",end:\"|}}}\\n|key=\\n|#default=}}\",text:\"\u3010switch\u3011\"},{start:\"{{#expr:\",end:\"}}\",text:\"\u3010expr\u3011\"},\n{text:\"<br/>\"},\n{start:\"{{LyricsKai|original=null\",end:\"|translated= }}\",text:\"\u3010\u6b4c\u8bcd\uff1aLyricsKai\u3011\"},\n{start:\"#\u91cd\u5b9a\u5411[[\",end:\"]]\",text:\"\u3010\u91cd\u5b9a\u5411\u3011\"},\n{text:\"<br/>\"},\n{start:\" style=\\\"\",end:\"\\\"\",text:\"\u3010\u63d2\u5165\u6837\u5f0f\u3011\"},\n{start:\"{{clear}}\",end:\"\",text:\"\u3010\u6e05\u9664\u6d6e\u52a8\u3011\"},\n{text:\"panel\",id:\"emoji-panel\",\nhyperText:'[@emoji]'},\n{start:\"{{emoji|id=[@id]}}\",end:\"\",valfunc:{id:\"x+1\",x:\"22*(x-x%10)/10\",y:\"22*(x%10)\"},\ntext:'emoji',parent:\"#emoji-panel\",target:\"emoji\",count:\"470\",css:\"border:0px;\",\nhyperText:'<div style=\"display:inline-block;width:22px;height:22px;position:relative;border:1px solid #999;border-radius:0;overflow:hidden;z-index:1\"><img style=\"position:absolute;top:-[@y]px;left:-[@x]px;\" src=\"https://static.mengniang.org/common/b/bd/EmojiNew.png\" width=\"1034px\"></div>'}\n];\nif($('#ext-charinsert').length<=0){$(\"#specialchars\").prepend(\"<p id='ext-charinsert'></p>\");}\nvar label={};\nfor(var i in charsets){\nswitch(charsets[i].text){\ncase \"<br/>\":\nlabel = document.createElement('br');\nbreak;\ncase \"panel\":\nlabel = document.createElement('div');label.setAttribute(\"class\",\"mw-ext-char-panel\");label.setAttribute(\"id\",charsets[i].id?charsets[i].id:\"\");label.setAttribute(\"style\",charsets[i].css?charsets[i].css:\"\");label.innerHTML=charsets[i].hyperText?charsets[i].hyperText:charsets[i].text;\nbreak;\ndefault:\nlabel = document.createElement('a');label.setAttribute(\"class\",\"mw-ext-char-item\");label.setAttribute(\"style\",charsets[i].css?charsets[i].css:\"\");label.setAttribute(\"href\",\"#\");label.setAttribute(\"data-mw-ext-char-start\",charsets[i].start);label.setAttribute(\"data-mw-ext-char-end\",charsets[i].end);label.innerHTML=charsets[i].hyperText?charsets[i].hyperText:charsets[i].text;\n}\nvar temp=\"\";\nif(charsets[i].count?true:false){for(var copyi = 0;copyi<charsets[i].count;copyi++){var output = label.outerHTML;\nfor(var fid in charsets[i].valfunc){output = output.replace(eval(\"/\\\\[@\"+fid+\"\\\\]/g\"),eval(charsets[i].valfunc[fid].replace(/x/g,copyi)));}\ntemp+=output;}}\nif(charsets[i].target?true:false){\nvar html = $(charsets[i].parent?charsets[i].parent:\"#ext-charinsert\")[0];\nhtml.innerHTML = html.innerHTML.replace(eval(\"/\\\\[@\"+charsets[i].target+\"\\\\]/\"),temp==\"\"?label.outerHTML:temp);\n}else{$(charsets[i].parent?charsets[i].parent:\"#ext-charinsert\").append(label);}\n}\nif ($('.mw-collapsible')[0]) mw.loader.using('jquery.makeCollapsible').then(function() {$('.mw-collapsible').makeCollapsible();});\n//this code picked from mw.ext.charinsert\n(function($,mw){\nvar addClickHandlers = function ( $content ) {\n$content.find('a.mw-ext-char-item' ).each( function () {\nvar $elm = $( this ),start = $elm.data( 'mw-ext-char-start' ),end = $elm.data( 'mw-ext-char-end' );\nif ( $elm.data( 'mw-ext-char-done' ) ) {return;}\n$elm.click(function(e){e.preventDefault();mw.toolbar.insertTags( start, end, '' );}).data( 'mw-ext-char-done', true ).attr( 'href', '#' );});};\n$(function(){addClickHandlers( $( document ) );});\nmw.hook('wikipage.content').add( addClickHandlers );\n})(jQuery,mediaWiki);}\n});\n//</pre>"}}}