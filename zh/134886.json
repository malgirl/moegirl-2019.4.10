{"parse":{"title":"Widget:TocFloat","pageid":97443,"wikitext":{"*":"<noinclude>\u8fd9\u53ea\u5e94\u7528\u5728\u6709\u8f83\u957f\u76ee\u5f55\u7684\u5730\u65b9\u3002</noinclude><includeonly><!--{if !isset($wgTocFloat) || !$wgTocFloat}--><!--{assign var=\"wgTocFloat\" value=true scope=\"global\"}--><style>\n#tocBox {\n    max-width: 37%;\n    min-width: 300px;\n    float: left;\n}\n\ndiv.toc#toc {\n    min-width: 300px;\n    box-sizing: border-box;\n    margin-right: 37px;\n    padding-right: 1em;\n    padding-left: 1em;\n}\n\ndiv.toc#toc div#toctitle h2 {\n    margin-right: 1em;\n}\n\ndiv.toc.noOrigin#toc .toctoggle {\n    display: none;\n}\n\ndiv#toc.toc #toctoggle,\ndiv#toc.toc #toggle {\n    font-size: 94%;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    -o-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n}\n\ndiv#toc.toc .toggleButton:before {\n    content: \"[\";\n    color: black;\n}\n\ndiv#toc.toc .toggleButton:after {\n    content: \"]\";\n    color: black;\n}\n\n#toc .toggleButton:first-child {\n    margin-right: 0.5em;\n}\n\ndiv#toc.toc .toggleButton:last-child {\n    margin-right: 0;\n}\n\ndiv#toc.toc .hiddenDiscussion {\n    visibility: hidden;\n    height: 0;\n    margin: 0;\n}\n\ndiv.toc#toc li.savedDiscussion a {\n    text-decoration: underline;\n}\n\n#toc div#tocText {\n    text-align:center;\n}\n\n#toc div.tocText {\n    display:inline-block;\n}\n\n/* \u8282\u64cd\u9171\u7684beg */\n#content ol,\n#content ul {\n    margin: 0 !important;\n    padding: 0.3em 0 0 1.6em !important;\n}\n\n#toc .toclevel-1 > ul {\n    padding-left: 0!important;\n}\n\n/* \u7531\u4e8e\u8282\u64cd\u9171\u7684beg\u5bfc\u81f4\u5206\u7c7b\u90a3\u8fb9\u6709\u79d8\u5236\u7a7a\u767d */\n#content #catlinks ol,\n#content #catlinks ul {\n    padding: 0 !important;\n}\n</style>\n<script>\n/* global mw */\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function() {\n    mw.loader.implement('widgetTocFloat', function() {\n        $(function() {\n            var $toc = $('#toc'),\n                $tocBox, $level2, $li, $svdDcs, $title, $toggle, $tocText,\n                appendToggleButton;\n\n            /* \u9884\u5904\u7406 */\n            //\u6807\u8bb0\u5b58\u6863\u8ba8\u8bba\u4e32\n            $('.saveNotice').each(function() {\n                var prevHeadline = $(this).prev('h2');\n                if (prevHeadline[0]) $toc.find('a[href=\"#' + prevHeadline.find('.mw-headline')[0].id + '\"]').parent().addClass(\"savedDiscussion hiddenDiscussion\");\n            });\n            //\u6574\u7406\u6807\u9898\u5217\u8868\n            $toc.append(\"<ol style='margin-left: 1.7em;'></ol>\").after('<div id=\"tocBox\"></div>');\n            $toc.children('ul').children().appendTo($toc.find('ol'));\n            $toc.find(\".toclevel-1 > a > .tocnumber\").remove();\n            $toc.appendTo(\"#tocBox\");\n\n            /* \u5b9a\u4e49\u53d8\u91cf */\n            $tocBox = $('#tocBox');\n            $level2 = $toc.find('.toclevel-2').hide();\n            $li = $toc.find('ol > li');\n            $svdDcs = $toc.find('.savedDiscussion');\n            $title = $toc.find('#toctitle').css(\"margin-right\", \"1em\").append('<span id=\"toctoggle\"></span>');\n            $toggle = $title.append('<div id=\"toggle\"></div>').find('#toggle');\n            $tocText = $title.after('<div id=\"tocText\"></div>').parents('#toc').find('#tocText');\n            appendToggleButton = function($Obj, $set, shTx, hiTx, fun) {\n                if (!$Obj[0]) return false;\n                $set.append($('<a/>', {\n                    text: function() {\n                        if ($Obj.is(':visible')) return hiTx;\n                        else return shTx;\n                    },\n                    'class': 'toggleButton',\n                    href: 'javascript:void(0);',\n                    bind: {\n                        click: function() {\n                            if ($Obj.is(':visible')) {\n                                $Obj.fadeOut();\n                                $(this).text(shTx);\n                            } else {\n                                $Obj.fadeIn();\n                                $(this).text(hiTx);\n                            }\n                        }\n                    }\n                }));\n                if (typeof fun == 'function') fun();\n            };\n\n            /* \u4e1a\u52a1\u5904\u7406*/\n            //\u6dfb\u52a0\u5b58\u6863\u8ba8\u8bba\u4e32\u6807\u9898toggle\u6309\u94ae\n            if ($svdDcs[0]) {\n                $toggle.append($('<a/>', {\n                    text: '\u663e\u793a\u5df2\u88ab\u5b58\u6863\u6807\u9898',\n                    'class': 'toggleButton',\n                    href: 'javascript:void(0);',\n                    bind: {\n                        click: function() {\n                            if ($svdDcs.hasClass('hiddenDiscussion')) {\n                                $svdDcs.removeClass('hiddenDiscussion');\n                                $(this).text('\u9690\u85cf\u5df2\u88ab\u5b58\u6863\u6807\u9898');\n                            } else {\n                                $svdDcs.addClass('hiddenDiscussion');\n                                $(this).text('\u663e\u793a\u5df2\u88ab\u5b58\u6863\u6807\u9898');\n                            }\n                        }\n                    }\n                }));\n                $tocText.append(\"<div class='tocText'>\uff08\u6709\u4e0b\u5212\u7ebf\u6807\u9898\u662f\u5df2\u88ab\u5b58\u6863\u6807\u9898\uff09</div>\");\n            }\n            //\u6dfb\u52a0\u4e8c\u4e09\u56db\u4e94\u7ea7\u6807\u9898toggle\u6309\u94ae\u548c\u6807\u9898\u6570\u91cf\n            appendToggleButton($level2, $toggle, '\u663e\u793a\u6bb5\u843d', '\u9690\u85cf\u6bb5\u843d', function() {\n                $tocText.append(\"<div class='tocText'>\uff08\u4e2d\u62ec\u53f7\u5185\u6570\u5b57\u662f\u8be5\u5927\u6bb5\u4e0b\u5c0f\u6bb5\u6570\u91cf\uff09</div>\");\n                $toc.find('.toclevel-1').each(function() {\n                    var subtitleLength = $(this).find('.toctext').length - 1;\n                    if (subtitleLength) $(this).children('a').after('[' + subtitleLength + ']');\n                });\n            });\n            //\u6dfb\u52a0\u6574\u4f53toggle\u6309\u94ae\n            appendToggleButton($toc.find('ol'), $title.find('#toctoggle'), '\u663e\u793a', '\u9690\u85cf');\n            $('#toc').addClass('noOrigin');\n        });\n    });\n});\n</script>\n<!--{/if}--></includeonly>"}}}