{"parse":{"title":"\u6a21\u5757:WikitextLC","pageid":295638,"wikitext":{"*":"local p = {}\n\n--- Construct an inline conversion from a table input.\n-- @param content table of the form\n--        { [\"zh-cn\"]='foobar', [\"zh-tw\"]='firecat', [\"zh-hk\"]='' }\n-- @returns string\n--       \"-{zh-cn:foobar;zh-tw:firecat;zh-hk:<span></span>}-\"\n--\n-- @fixme allow for generating output without \"-{\" \"}-\", so that\n--        it can be used with the last three wrappers.\nfunction p.selective( content )\n    local text = '-{'\n    for variant, value in pairs( content ) do\n        if value == '' then\n            value = '<span></span>'\n        end\n        text = text .. variant .. ':' .. value .. ';'\n    end\n    text = text .. '}-'\n    return text\nend\n\n--- Write some text with a limited set of variants to convert to\n--\n-- @param content text to be written\n-- @param variant a variant (string), or a list of variants\n--        (semicolon-deliminated string, or table of strings)\n-- @param[opt] force convert even under \"zh\" (no conversion) locale\nfunction p.converted( content, variant, force )\n    if type( variant ) == 'table' then\n        variant = table.concat( variant, ';' )\n    end\n    return '-{' .. ( force and '' or 'zh;' ) .. variant .. '|' .. content .. '}-'\nend\n\n--- Wraps some \"raw text\" to not convert.\n--\n-- @fixme Is the \"R\" flag some undocumented/undefined no-op magic?\n--        Are we using it instead of the old '-{' .. content .. '}-'\n--        to avoid confusion caused by a flag in the \"content\"?\nfunction p.raw( content )\n    return '-{R|' .. content .. '}-'\nend\n\n--- Wraps a title conversion rule.\nfunction p.title( content )\n    return '-{T|' .. content .. '}-'\nend\n\n--- Wraps a (hidden) conversion rule definition.\nfunction p.hidden( content )\n    return '-{H|' .. content .. '}-'\nend\n\nreturn p"}}}