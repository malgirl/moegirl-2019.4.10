{"parse":{"title":"\u6a21\u5757:Sandbox/D41D8CD98F/Lyrics","pageid":201531,"wikitext":{"*":"local p = {}\n\nlocal getArgs = require('Module:Arguments').getArgs\nlocal lang = require('Module:Lang')\n\nfunction p._lyrics(args)\n\tlocal orig = mw.text.split(args.original or '', '\\n')\n\tlocal tran = mw.text.split(args.translated or '', '\\n')\n\tlocal llang = args.llang or 'ja'\n\tlocal rlang = args.rlang or 'zh'\n\tlocal lstyle = args.lstyle or ''\n\tlocal rstyle = args.rstyle or ''\n\tlocal containerstyle = args.containerstyle or ''\n\n\tif args.original:match('<ruby') then\n\t\tcontainerstyle = 'line-height:2.5;' .. containerstyle\n\tend\n\n\tlocal html = mw.html.create('div')\n\thtml\n\t\t:addClass('Lyrics3')\n\t\t:cssText(containerstyle)\n\n\tfor i=1,math.max(#orig, #tran) do\n\t\tif orig[i] == '' and tran[i] == '' then\n\t\t\thtml:\n\t\t\t\ttag('div')\n\t\t\t\t\t:addClass('Lyrics3-line')\n\t\t\t\t\t:tag('br')\n\t\telse\n\t\t\thtml:\n\t\t\t\ttag('div')\n\t\t\t\t\t:addClass('Lyrics3-line')\n\t\t\t\t\t:tag('div')\n\t\t\t\t\t\t:addClass('Lyrics3-original')\n\t\t\t\t\t\t:cssText(lstyle)\n\t\t\t\t\t\t:tag('div')\n\t\t\t\t\t\t\t:node(lang.wrap(orig[i] or '', llang))\n\t\t\t\t\t\t\t:done()\n\t\t\t\t\t\t:done()\n\t\t\t\t\t:tag('div')\n\t\t\t\t\t\t:addClass('Lyrics3-translated')\n\t\t\t\t\t\t:cssText(rstyle)\n\t\t\t\t\t\t:tag('div')\n\t\t\t\t\t\t\t:node(lang.wrap(tran[i] or '', rlang))\n\t\t\t\t\t\t\t:done()\n\t\t\t\t\t\t:done()\n\t\tend\n\tend\n\n\treturn tostring(html)\nend\n\nfunction p.lyrics(frame)\n\tlocal args = getArgs(frame, {parentOnly = true})\n\treturn p._lyrics(args)\nend\n\nreturn p"}}}