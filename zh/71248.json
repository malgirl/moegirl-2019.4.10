{"parse":{"title":"User:AnnAngela/vector.js","pageid":88270,"wikitext":{"*":"// <pre>\n(function($, mw) {\n    'use strict';\n    (function run() {\n        return;\n        if (!mw || !mw.util || !mw.util.addPortletLink || !mw.Api) return setTimeout(function() {\n            run();\n        }, 1000);\n        var pagename = mw.config.get(\"wgPageName\");\n        if (/\\.[a-z\\d]+$|\\/[a-z]{1,3}-[a-z]{1,3}$/i.test(pagename)) return false;\n        var api = new mw.Api(),\n            lang = ['zh-cn', 'zh-hant', 'zh-tw', 'zh-hans'];\n        $(mw.util.addPortletLink('p-cactions', 'javascript:void(0);', '\u5c06\u672c\u9875\u9762\u6587\u5b57\u5f15\u7528\u5230\u6240\u6709\u8bed\u8a00', 'startApplying', '\u5c06\u672c\u9875\u9762\u6587\u5b57\u5f15\u7528\u5230\u6240\u6709\u8bed\u8a00')).attr('class', \"sysop-show\").on('click', function() {\n            if (!confirm('\u8981\u5e94\u7528\u5417\uff1f\\n\u57fa\u7840\u6807\u9898\uff1a' + pagename)) return false;\n            var result = [0, 0];\n            $.get('https://zh.moegirl.org/' + pagename + '?action=raw', function(raw) {\n                lang.forEach(function(l) {\n                    api.postWithToken('csrf', {\n                        action: 'edit',\n                        title: pagename + '/' + l,\n                        text: raw,\n                        summary: '\u6587\u672c\u5e94\u7528',\n                        tags: 'Automation tool',\n                        minor: true,\n                    }).then(function() {\n                        result[0]++;\n                        console.info.apply(console, arguments);\n                        if (result[0] + result[1] >= 4) alert('\u5b8c\u6210\\n\u6210\u529f\uff1a' + result[0] + '\uff0c\u5931\u8d25\uff1a' + result[1]);\n                    }, function() {\n                        result[1]++;\n                        console.info.apply(console, arguments);\n                        if (result[0] + result[1] >= 4) alert('\u5b8c\u6210\\n\u6210\u529f\uff1a' + result[0] + '\uff0c\u5931\u8d25\uff1a' + result[1]);\n                    });\n                });\n            });\n        });\n    })();\n    // Hitokoto\n    mw.config.set(\"AnnTools-Hitokoto-es2015\", true);\n    //$.getScript(\"https://annangela.github.io/MoegirlPedia-Hitokoto/code/es2015/startup.js\");\n    ///\u2193\u2193\u2193Explanations for this javaScript code in http://zh.moegirl.org/User:AnnAngela/js\u2193\u2193\u2193\n    //$.getScript(\"https://wikiplus-app.smartgslb.com/Main.js\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/SendWelcomeMessage.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/PersonalLabel.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/navbox-link.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/mwPanel.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/watchlist-toggle.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/watchlist-log.js&action=raw&ctype=text/javascript\");\n    $.getScript(\"https://zh.moegirl.org/User:AnnAngela/js/quick-save.js?action=raw&ctype=text/javascript\");\n    mw.loader.load(\"//annangela.moe/JS/AnnTools/quickSave.min.css\", \"text/css\");\n    $.getScript(\"//zh.moegirl.org/index.php?title=User:AnnAngela/js/QuickSaveDraft.es2015.js&action=raw&ctype=text/javascript\");\n    //\u2193\u2193\u2193Personal JavaScript Code for Personal Using\u2193\u2193\u2193\n    var loop;\n    loop = setInterval(function() {\n        if ([\"edit\", \"submit\"].includes(mw.config.get(\"wgAction\"))) {\n            if (!$(\"#wikiEditor-section-advanced > div.group.group-insert\").length) return;\n            clearInterval(loop);\n            $(\"#wikiEditor-section-advanced > div.group.group-insert\").append($(\"<a/>\").addClass(\"label\").css({\n                \"cursor\": \"pointer\",\n                \"float\": \"right\",\n                \"margin-left\": \"8px\",\n                \"margin-right\": \"5px\",\n            }).text(\"code&nowiki\").on(\"click\", function() {\n                var textbox = $(\"#wpTextbox1\"),\n                    start = textbox[0].selectionStart,\n                    text = textbox.val(),\n                    string = prompt(\"\u8981\u63d2\u5165\u7684\u5185\u5bb9\");\n                if (string === null) return;\n                textbox.val(text.substring(0, start) + \"<code><nowiki>\" + string + \"</nowiki></code>\" + text.substring(start));\n                textbox[0].selectionStart = textbox[0].selectionEnd = start + 30 + string.length;\n                textbox.focus();\n            }));\n        }\n    }, 1000);\n    $(function() {\n        var flag = false;\n        setTimeout(function loop(flag) {\n            if (!window.pg || !window.pg.fn || !window.pg.fn.purgePopups) return setTimeout(loop, 100, flag);\n            mw.hook(\"wikipage.content\").fire($(\"#ca-history\"));\n        }, 100, flag);\n        var mainpageContent = $(\"body.mainpage\").find(\"#mw-content-text\")[0],\n            specialPageRightNavigation = $(\".ns-special #right-navigation\")[0],\n            settings = {\n                Wikiplus_Installed: \"True\",\n                x18: \"1\",\n                mgym: \"1\",\n                Wikiplus_Settings: JSON.stringify({\n                    defaultSummary: \"function(a){switch(mw.config.get('wgNamespaceNumber')){case 274:case 8:case 8964:return' ';default:return -1!=a.sectionNumber?'/* '+a.sectionName+' */ //QuickEdit':'//QuickEdit'}}\",\n                }),\n                \"AnnTools-Hitokoto-color\": \"blue\",\n                \"AnnTools-Hitokoto-timer\": \"13070\",\n            },\n            i;\n        for (i in settings) {\n            localStorage.setItem(i, settings[i]);\n        }\n        $(\"#pt-mycontris\").before('<li id=\"pt-myWikiCode\"><a href=\"/User:AnnAngela/WikiCode\" title=\"\u4ee3\u7801\u5907\u5fd8\">\u4ee3\u7801\u5907\u5fd8</a></li>');\n        if (mainpageContent) {\n            $(mainpageContent).prepend('<table class=\"wikitable\" style=\"width:100%\"><caption>\u9996\u9875\u680f\u76ee\u2192\u6a21\u677f</caption><tr><td style=\"width:45%\">\u4f60\u597d~\u6b22\u8fce\u6765\u5230\u840c\u5a18\u767e\u79d1\uff01</td><td class=\"2Td\">\u2192</td><td style=\"width:45%\"><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E4%B8%93%E9%A2%98\" title=\"Template:\u9996\u9875/\u4e13\u9898\">\u9996\u9875/\u4e13\u9898</a></td></tr><tr><td>\u840c\u5a18\u00b7\u4f2a\u5a18</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E4%BA%BA%E7%89%A9\" title=\"Template:\u9996\u9875/\u4eba\u7269\">\u9996\u9875/\u4eba\u7269</a></td></tr><tr><td>ACGN</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/ACGN\" title=\"Template:\u9996\u9875/ACGN\">\u9996\u9875/ACGN</a></td></tr><tr><td>\u840c\u8a00\u840c\u8bed</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/meme\" title=\"Template:\u9996\u9875/meme\">\u9996\u9875/meme</a></td></tr><tr><td>\u4e13\u9898\u5bfc\u822a</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E5%AF%BC%E8%88%AA\" title=\"Template:\u9996\u9875/\u5bfc\u822a\">\u9996\u9875/\u5bfc\u822a</a></td></tr><tr><td>\u97f3\u4e50\u4e13\u533a</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E5%A4%9A%E5%AA%92%E4%BD%93\" title=\"Template:\u9996\u9875/\u591a\u5a92\u4f53\">\u9996\u9875/\u591a\u5a92\u4f53</a></td></tr><tr><td>\u5468\u8fb9\u00b7\u5176\u4ed6</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E5%91%A8%E8%BE%B9\" title=\"Template:\u9996\u9875/\u5468\u8fb9\">\u9996\u9875/\u5468\u8fb9</a></td></tr><tr><td>\u586b\u5751\u533a\uff01</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E5%A1%AB%E5%9D%91\" title=\"Template:\u9996\u9875/\u586b\u5751\">\u9996\u9875/\u586b\u5751</a></td></tr><tr><td>\u539f\u521b\u4e13\u533a</td><td>\u2192</td><td><a href=\"/Template:%E9%A6%96%E9%A1%B5/%E5%B8%AE%E5%8A%A9\" title=\"Template:\u9996\u9875/\u5e2e\u52a9\">\u9996\u9875/\u5e2e\u52a9</a></td></tr><tr><td>\u840c\u5a18\u7f51\u59ca\u59b9\u9879\u76ee</td><td>\u2192</td><td><a href=\"/Template:Moegirlsister\" title=\"Template:Moegirlsister\">Moegirlsister</a></td></tr></table>');\n        }\n        if ($(\"#mw-clearyourcache\")[0] && !$(\"#commonCodePage\")[0]) {\n            $(\"#mw-clearyourcache\").after('<div id=\"commonCodePageBox\"/>');\n            $(\"#commonCodePageBox\").load(\"//zh.moegirl.org/template:%E5%85%AC%E5%85%B1%E4%BB%A3%E7%A0%81%E9%A1%B5?action=render #commonCodePage\");\n        }\n        switch (mw.config.get(\"wgArticleId\")) {\n            case 256948:\n                $(\"#firstHeading\").append('<span class=\"sysop-show\"><a href=\"//zh.moegirl.org/Template:\u8ba8\u8bba\u7248\u9875\u9876\" targer=\"_blank\" title=\"\u6a21\u677f:\u8ba8\u8bba\u7248\u9875\u9876\" style=\"font-size:large;line-height: 1;\">\u8ba8\u8bba\u7248\u9875\u9876</a></span>');\n                break;\n\n            case 17801:\n                $(\"#firstHeading\").append('<span class=\"sysop-show\"><a href=\"//zh.moegirl.org/Template:\u63d0\u95ee\u6c42\u52a9\u533a\u9875\u9876\" targer=\"_blank\" title=\"\u6a21\u677f:\u63d0\u95ee\u6c42\u52a9\u533a\u9875\u9876\" style=\"font-size:large;line-height: 1;\">\u63d0\u95ee\u6c42\u52a9\u533a\u9875\u9876</a></span>');\n                break;\n        }\n        $(\"body\").removeClass(\"vector-animateLayout\");\n        if (specialPageRightNavigation) $(specialPageRightNavigation).append('<div class=\"right-navigation\"/>').find(\".right-navigation\").siblings().appendTo(\".right-navigation\");\n        if (navigator.userAgent.toLowerCase().indexOf(\"mobile\") > 0) $(\"body\").addClass(\"isMobile\");\n        if ($(\".mw-special-Log\")[0]) $(\"#mw-content-text > form > fieldset\").append($(\"<p>\", {\n            text: \"\u70b9\u51fb\u663e\u793a/\u9690\u85cf\u4e0a\u4f20\u65e5\u5fd7\uff1a\",\n            attr: {\n                id: \"uploadToggle\",\n            },\n        })).find(\"#uploadToggle\").append($(\"<input>\", {\n            attr: {\n                type: \"button\",\n            },\n            on: {\n                click: function click() {\n                    var li = $(\"li.mw-logline-upload\");\n                    if (li.is(\":hidden\")) {\n                        li.show();\n                        $(this).val(\"\u9690\u85cf\");\n                    } else {\n                        li.hide();\n                        $(this).val(\"\u663e\u793a\");\n                    }\n                },\n            },\n        })).find(\"input\").click();\n        $(\"a.extiw\").removeClass(\"extiw\");\n        if ($('#pagehistory .mw-history-line-updated')[0]) {\n            var start = $('#pagehistory .updatedmarker').first().closest('.mw-history-line-updated').find('input[name=\"diff\"]'),\n                end = $('#pagehistory .updatedmarker').last().closest('.mw-history-line-updated').next().find('input[name=\"oldid\"]');\n            if (start.is(':not(:checked)')) start.click();\n            if (end.is(':not(:checked)')) end.click();\n            end.trigger('click');\n        }\n    });\n})(jQuery, mediaWiki);\n// </pre>"}}}