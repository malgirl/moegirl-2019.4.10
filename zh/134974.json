{"parse":{"title":"\u6a21\u5757:LrcPlayer","pageid":212923,"wikitext":{"*":"local func = {}\n\nfunction func.emitModernSoundManagerPlaylist ( frame )\n    -- Parameters: audio, lrc, title, artist, album, autoplay, loop\n    local audioUrl = frame.args[1]\n    local lrcUrl = frame.args[2]\n    local title = frame.args[3]\n    local artist = frame.args[4]\n    local album = frame.args[5]\n    local autoplay = frame.args[6]\n    local loop = frame.args[7]\n\n    local function isempty(s)\n        return s == nil or s == ''\n    end\n\n    -- Keep compatibility with previous definitions\n    local loopEnabled = not isempty(loop);\n    local autoplayEnabled = not isempty(autoplay);\n\n    local playlistItemEntity = {\n        audioFileUrl = audioUrl,\n        lrcFileUrl = lrcUrl,\n        title = title,\n        artist = artist,\n        album = album,\n        isExplicit = false\n    }\n\n    local playlist = {\n        schemaVersion = 1,\n        loop = loopEnabled,\n        autoPlay = autoplayEnabled,\n        playlist = {\n            playlistItemEntity\n        }\n    }\n\n    return mw.text.jsonEncode(playlist)\nend\n\nfunction func.convertLegacyLrcPlayerSyntax( frame )\n\t-- Requires Sm2Shim 1800.201.531.5012 or higher version --\n    return frame:extensionTag('modernsoundmanager', func.emitModernSoundManagerPlaylist(frame), {})\nend\n\nreturn func"}}}