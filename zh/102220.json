{"parse":{"title":"MediaWiki:Gadget-twinklefluff.js","pageid":164868,"wikitext":{"*":"//\u672cjs\u5f15\u81ea\u4e2d\u6587\u7ef4\u57fa\u767e\u79d1[[zhwiki:Special:Permalink/36140905]]\n!function(a){Twinkle.fluff={auto:function(){if(parseInt(Morebits.queryString.get(\"oldid\"),10)!==mw.config.get(\"wgCurRevisionId\"))return alert(\"\u65e0\u6cd5\u56de\u9000\uff0c\u9875\u9762\u5728\u6b64\u671f\u95f4\u5df2\u88ab\u4fee\u6539\u3002\"),void 0;var b=a(\"#mw-diff-ntitle2\").find(\"a.mw-userlink\").text();Twinkle.fluff.revert(Morebits.queryString.get(\"twinklerevert\"),b,!0)},normal:function(){var c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,b=function(a,b){var c=document.createElement(\"span\");return c.style.color=a,c.appendChild(document.createTextNode(b)),c};if(-1===mw.config.get(\"wgNamespaceNumber\")&&\"Contributions\"===mw.config.get(\"wgCanonicalSpecialPageName\"))c=a(\"#contentSub\").find('a[title^=\"Special:\u65e5\u5fd7\"]').last(),c.length>0&&(d=decodeURIComponent(/wiki\\/Special:%E6%97%A5%E5%BF%97\\/(.+)$/.exec(c.attr(\"href\").replace(/_/g,\"%20\"))[1]),(-1!==Twinkle.getPref(\"showRollbackLinks\").indexOf(\"contribs\")||mw.config.get(\"wgUserName\")!==d&&-1!==Twinkle.getPref(\"showRollbackLinks\").indexOf(\"others\")||mw.config.get(\"wgUserName\")===d&&-1!==Twinkle.getPref(\"showRollbackLinks\").indexOf(\"mine\"))&&(e=a(\"#mw-content-text\").find(\"ul li:has(span.mw-uctop)\"),f=document.createElement(\"strong\"),g=document.createElement(\"a\"),g.appendChild(b(\"Black\",\"[\")),g.appendChild(b(\"SteelBlue\",\"\u56de\u9000\")),g.appendChild(b(\"Black\",\"]\")),f.appendChild(g),h=document.createElement(\"strong\"),i=document.createElement(\"a\"),i.appendChild(b(\"Black\",\"[\")),i.appendChild(b(\"Red\",\"\u7834\u574f\")),i.appendChild(b(\"Black\",\"]\")),h.appendChild(i),e.each(function(b,c){var e,d=a(c).children(\"a:eq(1)\").attr(\"href\");c.appendChild(document.createTextNode(\" \")),e=f.cloneNode(!0),e.firstChild.setAttribute(\"href\",d+\"&\"+Morebits.queryString.create({twinklerevert:\"norm\"})),c.appendChild(e),c.appendChild(document.createTextNode(\" \")),e=h.cloneNode(!0),e.firstChild.setAttribute(\"href\",d+\"&\"+Morebits.queryString.create({twinklerevert:\"vand\"})),c.appendChild(e)})));else{if(\"Undelete\"===mw.config.get(\"wgCanonicalSpecialPageName\"))return;if(j=a(\"div.firstrevisionheader\").length)return;try{if(m=document.getElementById(\"mw-diff-otitle1\"),n=document.getElementById(\"mw-diff-ntitle1\"),!m||!n)return;k=m.parentNode,l=n.parentNode}catch(o){return}if(p=a(\"#mw-diff-otitle1\").find(\"strong a\").attr(\"href\"),q=new Morebits.queryString(p.split(\"?\",2)[1]),r=q.get(\"oldid\"),s=document.createElement(\"div\"),s.setAttribute(\"id\",\"tw-revert-to-orevision\"),s.style.fontWeight=\"bold\",t=s.appendChild(document.createElement(\"a\")),t.href=\"#\",a(t).click(function(){Twinkle.fluff.revertToRevision(r)}),t.appendChild(b(\"Black\",\"[\")),t.appendChild(b(\"SaddleBrown\",\"\u6062\u590d\u6b64\u7248\u672c\")),t.appendChild(b(\"Black\",\"]\")),k.insertBefore(s,k.firstChild),document.getElementById(\"differences-nextlink\"))return u=a(\"#mw-diff-ntitle1\").find(\"strong a\").attr(\"href\"),q=new Morebits.queryString(u.split(\"?\",2)[1]),v=q.get(\"oldid\"),s=document.createElement(\"div\"),s.setAttribute(\"id\",\"tw-revert-to-nrevision\"),s.style.fontWeight=\"bold\",t=s.appendChild(document.createElement(\"a\")),t.href=\"#\",a(t).click(function(){Twinkle.fluff.revertToRevision(v)}),t.appendChild(b(\"Black\",\"[\")),t.appendChild(b(\"SaddleBrown\",\"\u6062\u590d\u6b64\u7248\u672c\")),t.appendChild(b(\"Black\",\"]\")),l.insertBefore(s,l.firstChild),void 0;-1!==Twinkle.getPref(\"showRollbackLinks\").indexOf(\"diff\")&&(w=a(\"#mw-diff-ntitle2\").find(\"a\").first().text(),x=document.createElement(\"div\"),x.setAttribute(\"id\",\"tw-revert\"),y=document.createElement(\"strong\"),z=document.createElement(\"strong\"),A=document.createElement(\"strong\"),B=document.createElement(\"a\"),C=document.createElement(\"a\"),D=document.createElement(\"a\"),B.href=\"#\",C.href=\"#\",D.href=\"#\",a(B).click(function(){Twinkle.fluff.revert(\"agf\",w)}),a(C).click(function(){Twinkle.fluff.revert(\"vand\",w)}),a(D).click(function(){Twinkle.fluff.revert(\"norm\",w)}),B.appendChild(b(\"Black\",\"[\")),B.appendChild(b(\"DarkOliveGreen\",\"\u56de\u9000\uff08AGF\uff09\")),B.appendChild(b(\"Black\",\"]\")),C.appendChild(b(\"Black\",\"[\")),C.appendChild(b(\"Red\",\"\u56de\u9000\uff08\u7834\u574f\uff09\")),C.appendChild(b(\"Black\",\"]\")),D.appendChild(b(\"Black\",\"[\")),D.appendChild(b(\"SteelBlue\",\"\u56de\u9000\")),D.appendChild(b(\"Black\",\"]\")),y.appendChild(B),z.appendChild(C),A.appendChild(D),x.appendChild(y),x.appendChild(document.createTextNode(\" || \")),x.appendChild(A),x.appendChild(document.createTextNode(\" || \")),x.appendChild(z),l.insertBefore(x,l.firstChild))}}},Twinkle.fluff.revert=function(b,c,d,e,f){var g,h,i,j,k;mw.util.isIPv6Address(c)&&(c=Morebits.sanitizeIPv6(c)),g=f||mw.config.get(\"wgPageName\"),h=e||mw.config.get(\"wgCurRevisionId\"),Morebits.status.init(document.getElementById(\"mw-content-text\")),a(\"#catlinks\").remove(),i={type:b,user:c,pagename:g,revid:h,autoRevert:!!d},j={action:\"query\",prop:[\"info\",\"revisions\"],titles:g,rvlimit:50,rvprop:[\"ids\",\"timestamp\",\"user\",\"comment\"],intoken:\"edit\"},k=new Morebits.wiki.api(\"\u6293\u53d6\u8f83\u65e9\u4fee\u8ba2\u7248\u672c\u4fe1\u606f\",j,Twinkle.fluff.callbacks.main),k.params=i,k.post()},Twinkle.fluff.revertToRevision=function(a){var b,c;Morebits.status.init(document.getElementById(\"mw-content-text\")),b={action:\"query\",prop:[\"info\",\"revisions\"],titles:mw.config.get(\"wgPageName\"),rvlimit:1,rvstartid:a,rvprop:[\"ids\",\"timestamp\",\"user\",\"comment\"],intoken:\"edit\",format:\"xml\"},c=new Morebits.wiki.api(\"\u6293\u53d6\u8f83\u65e9\u4fee\u8ba2\u7248\u672c\u4fe1\u606f\",b,Twinkle.fluff.callbacks.toRevision.main),c.params={rev:a},c.post()},Twinkle.fluff.userIpLink=function(a){return(Morebits.isIPAddress(a)?\"[[Special:Contributions/\":\"[[User:\")+a+\"|\"+a+\"]]\"},Twinkle.fluff.callbacks={toRevision:{main:function(b){var j,k,l,m,c=b.responseXML,d=parseInt(a(c).find(\"page\").attr(\"lastrevid\"),10),e=a(c).find(\"page\").attr(\"touched\"),f=a(c).find(\"page\").attr(\"starttimestamp\"),g=a(c).find(\"page\").attr(\"edittoken\"),h=a(c).find(\"rev\").attr(\"revid\"),i=a(c).find(\"rev\").attr(\"user\");return h!==b.params.rev?(b.statitem.error(\"\u6293\u53d6\u5230\u7684\u4fee\u8ba2\u7248\u672c\u4e0e\u8bf7\u6c42\u7684\u4fee\u8ba2\u7248\u672c\u4e0d\u7b26\uff0c\u53d6\u6d88\u3002\"),void 0):(j=prompt(\"\u8bf7\u8f93\u5165\u56de\u9000\u7406\u7531\uff1a                                \",\"\"),null===j?(b.statelem.error(\"\u7531\u7528\u6237\u53d6\u6d88\u3002\"),void 0):(k=Twinkle.fluff.formatSummary(\"\u56de\u9000\u5230\u7531$USER\u505a\u51fa\u7684\u4fee\u8ba2\u7248\u672c\"+h,i,j),l={action:\"edit\",title:mw.config.get(\"wgPageName\"),summary:k,token:g,undo:d,undoafter:h,basetimestamp:e,starttimestamp:f,watchlist:-1!==Twinkle.getPref(\"watchRevertedPages\").indexOf(b.params.type)?\"watch\":void 0,minor:-1!==Twinkle.getPref(\"markRevertedPagesAsMinor\").indexOf(b.params.type)?!0:void 0},Morebits.wiki.actionCompleted.redirect=mw.config.get(\"wgPageName\"),Morebits.wiki.actionCompleted.notice=\"\u4fee\u8ba2\u7248\u672c\u5b8c\u6210\",m=new Morebits.wiki.api(\"\u4fdd\u5b58\u56de\u9000\u5185\u5bb9\",l,Twinkle.fluff.callbacks.complete,b.statelem),m.params=b.params,m.post(),void 0))}},main:function(b){var j,k,l,m,n,o,p,q,r,s,t,u,c=b.responseXML,d=parseInt(a(c).find(\"page\").attr(\"lastrevid\"),10),e=a(c).find(\"page\").attr(\"touched\"),f=a(c).find(\"page\").attr(\"starttimestamp\"),g=a(c).find(\"page\").attr(\"edittoken\"),h=a(c).find(\"rev\").attr(\"user\"),i=a(c).find(\"rev\");if(i.length<1)return b.statelem.error(\"\u6ca1\u6709\u5176\u5b83\u4fee\u8ba2\u7248\u672c\uff0c\u65e0\u6cd5\u56de\u9000\"),void 0;if(j=i[0],d<b.params.revid)return Morebits.status.error(\"\u9519\u8bef\",[\"\u4ece\u670d\u52a1\u5668\u53d6\u5f97\u7684\u6700\u65b0\u4fee\u8ba2\u7248\u672cID \",Morebits.htmlNode(\"strong\",d),\" \u5c0f\u4e8e\u76ee\u524d\u6240\u663e\u793a\u7684\u4fee\u8ba2\u7248\u672cID\u3002\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u5f53\u524d\u4fee\u8ba2\u7248\u672c\u5df2\u88ab\u5220\u9664\u3001\u670d\u52a1\u5668\u5ef6\u8fdf\u3001\u6216\u6293\u53d6\u5230\u4e86\u574f\u6389\u7684\u4fe1\u606f\u3002\u53d6\u6d88\u3002\"]),void 0;if(k=1,b.params.revid!==d)if(Morebits.status.warn(\"\u8b66\u544a\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c \",Morebits.htmlNode(\"strong\",d),\" \u4e0e\u6211\u4eec\u7684\u4fee\u8ba2\u7248\u672c \",Morebits.htmlNode(\"strong\",b.params.revid),\"\u4e0d\u7b49\"]),h===b.params.user)switch(b.params.type){case\"vand\":Morebits.status.info(\"\u4fe1\u606f\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c\u7531 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u505a\u51fa\uff0c\u56e0\u6211\u4eec\u5047\u5b9a\u7834\u574f\uff0c\u7ee7\u7eed\u56de\u9000\u64cd\u4f5c\u3002\"]);break;case\"agf\":return Morebits.status.warn(\"\u8b66\u544a\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c\u7531 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u505a\u51fa\uff0c\u56e0\u6211\u4eec\u5047\u5b9a\u5584\u610f\uff0c\u53d6\u6d88\u56de\u9000\u64cd\u4f5c\uff0c\u56e0\u4e3a\u95ee\u9898\u53ef\u80fd\u5df2\u88ab\u4fee\u590d\u3002\"]),void 0;default:return Morebits.status.warn(\"\u63d0\u793a\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c\u7531 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u505a\u51fa\uff0c\u4f46\u6211\u4eec\u8fd8\u662f\u4e0d\u56de\u9000\u4e86\u3002\"]),void 0}else{if(!(\"vand\"===b.params.type&&-1!==Twinkle.fluff.whiteList.indexOf(j.getAttribute(\"user\"))&&i.length>1&&i[1].getAttribute(\"pageId\")===b.params.revid))return Morebits.status.error(\"\u9519\u8bef\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c\u7531 \",Morebits.htmlNode(\"strong\",h),\" \u505a\u51fa\uff0c\u6240\u4ee5\u8fd9\u4e2a\u4fee\u8ba2\u7248\u672c\u53ef\u80fd\u5df2\u7ecf\u88ab\u56de\u9000\u4e86\uff0c\u53d6\u6d88\u56de\u9000\u64cd\u4f5c\u3002\"]),void 0;Morebits.status.info(\"\u4fe1\u606f\",[\"\u6700\u65b0\u4fee\u8ba2\u7248\u672c\u7531 \",Morebits.htmlNode(\"strong\",h),\"\uff0c\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\u505a\u51fa\uff0c\u4e4b\u524d\u7684\u7248\u672c\u88ab\u8ba4\u4e3a\u662f\u7834\u574f\uff0c\u7ee7\u7eed\u56de\u9000\u64cd\u4f5c\u3002\"]),k=2}if(-1!==Twinkle.fluff.whiteList.indexOf(b.params.user))switch(b.params.type){case\"vand\":Morebits.status.info(\"\u4fe1\u606f\",[\"\u5c06\u5bf9 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u6267\u884c\u7834\u574f\u56de\u9000\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\uff0c\u6211\u4eec\u5047\u5b9a\u60a8\u8981\u56de\u9000\u524d\u4e00\u4e2a\u4fee\u8ba2\u7248\u672c\u3002\"]),k=2,b.params.user=i[1].getAttribute(\"user\");break;case\"agf\":return Morebits.status.warn(\"\u63d0\u793a\",[\"\u5c06\u5bf9 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u6267\u884c\u5584\u610f\u56de\u9000\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\uff0c\u53d6\u6d88\u56de\u9000\u64cd\u4f5c\u3002\"]),void 0;case\"norm\":default:l=confirm(\"\u9009\u62e9\u4e86\u5e38\u89c4\u56de\u9000\uff0c\u4f46\u6700\u65b0\u4fee\u6539\u662f\u7531\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\uff08\"+b.params.user+\"\uff09\u505a\u51fa\u7684\u3002\u60a8\u662f\u5426\u60f3\u56de\u9000\u524d\u4e00\u4e2a\u4fee\u8ba2\u7248\u672c\uff1f\"),l?(Morebits.status.info(\"\u4fe1\u606f\",[\"\u5c06\u5bf9 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u6267\u884c\u5e38\u89c4\u56de\u9000\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\uff0c\u57fa\u4e8e\u786e\u8ba4\uff0c\u6211\u4eec\u5c06\u56de\u9000\u524d\u4e00\u4e2a\u4fee\u8ba2\u7248\u672c\u3002\"]),k=2,b.params.user=i[1].getAttribute(\"user\")):Morebits.status.warn(\"\u63d0\u793a\",[\"\u5c06\u5bf9 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u6267\u884c\u5e38\u89c4\u56de\u9000\uff0c\u8fd9\u662f\u4e00\u4e2a\u53ef\u4fe1\u7684\u673a\u5668\u4eba\uff0c\u57fa\u4e8e\u786e\u8ba4\uff0c\u6211\u4eec\u4ecd\u5c06\u56de\u9000\u8fd9\u4e2a\u4fee\u8ba2\u7248\u672c\u3002\"])}for(m=!1,n=0,o=k;o<i.length;++o)if(++n,i[o].getAttribute(\"user\")!==b.params.user){m=o;break}if(!m)return b.statelem.error([\"\u672a\u627e\u5230\u4e4b\u524d\u7684\u4fee\u8ba2\u7248\u672c\uff0c\u53ef\u80fd \",Morebits.htmlNode(\"strong\",b.params.user),\" \u662f\u552f\u4e00\u8d21\u732e\u8005\uff0c\u6216\u8fd9\u4e2a\u7528\u6237\u8fde\u7eed\u505a\u51fa\u4e86\u8d85\u8fc7 \"+Twinkle.getPref(\"revertMaxRevisions\")+\" \u6b21\u7f16\u8f91\u3002\"]),void 0;if(!n)return Morebits.status.error(\"\u9519\u8bef\",\"\u6211\u4eec\u5c06\u8981\u56de\u90000\u4e2a\u4fee\u8ba2\u7248\u672c\uff0c\u8fd9\u6ca1\u6709\u610f\u4e49\uff0c\u6240\u4ee5\u53d6\u6d88\u56de\u9000\u64cd\u4f5c\u3002\u53ef\u80fd\u662f\u56e0\u4e3a\u8fd9\u4e2a\u4fee\u8ba2\u7248\u672c\u5df2\u7ecf\u88ab\u56de\u9000\uff0c\u4f46\u4fee\u8ba2\u7248\u672cID\u4ecd\u662f\u4e00\u6837\u7684\u3002\"),void 0;if(p=i[m],q=!1,\"vand\"!==b.params.type&&n>1){if(!confirm(b.params.user+\" \u8fde\u7eed\u505a\u51fa\u4e86 \"+n+\" \u6b21\u7f16\u8f91\uff0c\u662f\u5426\u8981\u56de\u9000\u6240\u6709\u8fd9\u4e9b\uff1f\"))return Morebits.status.info(\"\u63d0\u793a\",\"\u7528\u6237\u53d6\u6d88\u64cd\u4f5c\"),void 0;q=!0}switch(b.params.count=n,b.params.goodid=p.getAttribute(\"revid\"),b.params.gooduser=p.getAttribute(\"user\"),b.statelem.status([Morebits.htmlNode(\"strong\",n),\" \u4e2a\u4fee\u8ba2\u7248\u672c\u4e4b\u524d\u7531 \",Morebits.htmlNode(\"strong\",b.params.gooduser),\" \u505a\u51fa\u7684\u4fee\u8ba2\u7248\u672c \",Morebits.htmlNode(\"strong\",b.params.goodid)]),b.params.type){case\"agf\":if(s=prompt(\"\u53ef\u9009\u7684\u7f16\u8f91\u6458\u8981\uff1a                              \",\"\"),null===s)return b.statelem.error(\"\u7528\u6237\u53d6\u6d88\u64cd\u4f5c\u3002\"),void 0;q=!0,r=Twinkle.fluff.formatSummary(\"\u56de\u9000$USER\u505a\u51fa\u7684\u51fa\u4e8e[[WP:AGF|\u5584\u610f]]\u7684\u7f16\u8f91\",b.params.user,s);break;case\"vand\":r=\"\u56de\u9000[[Special:Contributions/\"+b.params.user+\"|\"+b.params.user+\"]] ([[User talk:\"+b.params.user+\"|\u8ba8\u8bba]])\"+\"\u505a\u51fa\u7684 \"+b.params.count+\" \u6b21\u7f16\u8f91\uff0c\u5230\u7531\"+b.params.gooduser+\"\u505a\u51fa\u7684\u524d\u4e00\u4e2a\u4fee\u8ba2\u7248\u672c \"+Twinkle.getPref(\"summaryAd\");break;case\"norm\":default:if(Twinkle.getPref(\"offerReasonOnNormalRevert\")){if(s=prompt(\"\u53ef\u9009\u7684\u7f16\u8f91\u6458\u8981\uff1a                              \",\"\"),null===s)return b.statelem.error(\"\u7528\u6237\u53d6\u6d88\u64cd\u4f5c\u3002\"),void 0;q=!0}r=Twinkle.fluff.formatSummary(\"\u56de\u9000$USER\u505a\u51fa\u7684\"+b.params.count+\"\u6b21\u7f16\u8f91\",b.params.user,s)}if(Twinkle.getPref(\"confirmOnFluff\")&&!q&&!confirm(\"\u56de\u9000\u9875\u9762\uff1a\u60a8\u786e\u5b9a\u5417\uff1f\"))return b.statelem.error(\"\u7528\u6237\u53d6\u6d88\u64cd\u4f5c\u3002\"),void 0;if((!b.params.autoRevert||Twinkle.getPref(\"openTalkPageOnAutoRevert\"))&&-1!==Twinkle.getPref(\"openTalkPage\").indexOf(b.params.type)&&mw.config.get(\"wgUserName\")!==b.params.user)switch(Morebits.status.info(\"\u4fe1\u606f\",[\"\u6253\u5f00\u7528\u6237 \",Morebits.htmlNode(\"strong\",b.params.user),\" \u7684\u5bf9\u8bdd\u9875\"]),t={title:\"User talk:\"+b.params.user,action:\"edit\",preview:\"yes\",vanarticle:b.params.pagename.replace(/_/g,\" \"),vanarticlerevid:b.params.revid,vanarticlegoodrevid:b.params.goodid,type:b.params.type,count:b.params.count},Twinkle.getPref(\"userTalkPageMode\")){case\"tab\":window.open(mw.util.wikiScript(\"index\")+\"?\"+Morebits.queryString.create(t),\"_blank\");break;case\"blank\":window.open(mw.util.wikiScript(\"index\")+\"?\"+Morebits.queryString.create(t),\"_blank\",\"location=no,toolbar=no,status=no,directories=no,scrollbars=yes,width=1200,height=800\");break;case\"window\":default:window.open(mw.util.wikiScript(\"index\")+\"?\"+Morebits.queryString.create(t),\"twinklewarnwindow\"===window.name?\"_blank\":\"twinklewarnwindow\",\"location=no,toolbar=no,status=no,directories=no,scrollbars=yes,width=1200,height=800\")}t={action:\"edit\",title:b.params.pagename,summary:r,token:g,undo:d,undoafter:b.params.goodid,basetimestamp:e,starttimestamp:f,watchlist:-1!==Twinkle.getPref(\"watchRevertedPages\").indexOf(b.params.type)?\"watch\":void 0,minor:-1!==Twinkle.getPref(\"markRevertedPagesAsMinor\").indexOf(b.params.type)?!0:void 0},Morebits.wiki.actionCompleted.redirect=b.params.pagename,Morebits.wiki.actionCompleted.notice=\"\u56de\u9000\u5b8c\u6210\",u=new Morebits.wiki.api(\"\u4fdd\u5b58\u56de\u9000\u5185\u5bb9\",t,Twinkle.fluff.callbacks.complete,b.statelem),u.params=b.params,u.post()},complete:function(b){var e,c=a(b.getXML()).find(\"edit\"),d=c.attr(\"spamblacklist\");d?(e=document.createElement(\"code\"),e.style.fontFamily=\"monospace\",e.appendChild(document.createTextNode(d)),b.statelem.error([\"\u4e0d\u80fd\u56de\u9000\uff0c\u56e0URL\",e,\"\u5728\u5783\u573e\u9ed1\u540d\u5355\u4e2d\u3002\"])):\"\"===c.attr(\"nochange\")?b.statelem.warn(\"\u8981\u56de\u9000\u5230\u7684\u7248\u672c\u4e0e\u5f53\u524d\u7248\u672c\u76f8\u540c\uff0c\u6ca1\u4ec0\u4e48\u8981\u505a\u7684\"):b.statelem.info(\"\u5b8c\u6210\")}},Twinkle.fluff.formatSummary=function(a,b,c){var e,f,g,h,d=a;return c?(d+=\"\uff1a\"+Morebits.string.toUpperCaseFirstChar(c),-1===c.search(/[\u3002\uff1f\uff01]$/)&&(d+=\"\u3002\")):d+=\"\u3002\",d+=Twinkle.getPref(\"summaryAd\"),e=unescape(encodeURIComponent(d.replace(\"$USER\",\"\"))).length,f=\"[[Special:Contributions/\"+b+\"|\"+b+\"]]\",g=unescape(encodeURIComponent(f)).length,255>=e+g?(h=\" ([[User talk:\"+b+\"|\u8ba8\u8bba]])\",d=e+g+unescape(encodeURIComponent(h)).length<=255?d.replace(\"$USER\",f+h):d.replace(\"$USER\",f)):d=d.replace(\"$USER\",b),d},Twinkle.fluff.init=function(){Twinkle.userAuthorized&&(Twinkle.fluff.whiteList=[],Morebits.queryString.exists(\"twinklerevert\")?Twinkle.fluff.auto():Twinkle.fluff.normal())}}(jQuery);"}}}