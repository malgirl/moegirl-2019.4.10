{"parse":{"title":"User:Nzh21/vector.js","pageid":304924,"wikitext":{"*":"mw.loader.load('/index.php?title=User:Nzh21/js/GlobalRubyToggle.js&action=raw&ctype=text/javascript');\nmw.loader.load('/index.php?title=User:Nzh21/js/CollapsibleToggle.js&action=raw&ctype=text/javascript');\nmw.loader.load('/index.php?title=User:Nzh21/js/QuickDiff.js&action=raw&ctype=text/javascript');\n// mw.loader.load('/index.php?title=User:Nzh21/js/QuickUndo.js&action=raw&ctype=text/javascript');\nif (mw.config.values.wgAction == \"edit\" || mw.config.values.wgAction == \"submit\") {\n    mw.loader.load('/index.php?title=User:Nzh21/js/LyricsKaiEditor.js&action=raw&ctype=text/javascript');\n    mw.loader.load('/index.php?title=User:\u6771\u6771\u541b/js/contentBackup.js&action=raw&ctype=text/javascript');\n} else {\n    mw.loader.load('/index.php?title=User:\u6771\u6771\u541b/js/Wikiplus-replace.js&action=raw&ctype=text/javascript');\n}\n\n\n/* \u5e26\u5f00\u5173\u7684MonacoEditor */\nif (mw.config.values.wgAction == \"edit\" || mw.config.values.wgAction == \"submit\") {\n    if (localStorage.getItem('Moegirl_MonacoEditor_Toggle') != 'false') {\n        $.getScript(\"/User:Imbushuo/MonacoEditor/MediaWikiTokenizer.js?action=raw&ctype=text/javascript\",\n            function (data, textStatus, jqxhr) {\n                $.getScript(\"/User:imbushuo/MediaWikiLint.js?action=raw&ctype=text/javascript\",\n                    function (data, textStatus, jqxhr) {\n                        // Loader for Monaco editor\n                        mw.loader.load('https://zh.moegirl.org/User:Nzh21/MonacoEditor.js?action=raw&ctype=text/javascript');\n                    });\n            });\n    }\n}\n$(function () {\n    if (mw.config.values.wgAction == \"edit\" || mw.config.values.wgAction == \"submit\") {\n        var interval = setInterval(function () {\n            if ($('.wikiEditor-ui-toolbar .tab-help').length != 0 && $('.tab.tab-MonacoEditor_Toggle').length == 0) {\n                if (localStorage.getItem('Moegirl_MonacoEditor_Toggle') != 'false') {\n                    $('.wikiEditor-ui-toolbar').find('.tabs').find('.tab-help').after('<span class=\"tab tab-MonacoEditor_Toggle\" rel=\"MonacoEditor_Toggle\"><a href=\"#.\">\u5173\u95edMonacoEditor</a></span>');\n                } else {\n                    $('.wikiEditor-ui-toolbar').find('.tabs').find('.tab-help').after('<span class=\"tab tab-MonacoEditor_Toggle\" rel=\"MonacoEditor_Toggle\"><a href=\"#.\">\u5f00\u542fMonacoEditor</a></span>');\n                }\n                $('.tab-MonacoEditor_Toggle a').click(function () {\n                    if (localStorage.getItem('Moegirl_MonacoEditor_Toggle') != 'false') {\n                        localStorage.setItem('Moegirl_MonacoEditor_Toggle', 'false');\n                        mw.notify('\u5df2\u5173\u95ed\uff0c\u8bf7\u5237\u65b0\uff01');\n                    } else {\n                        localStorage.setItem('Moegirl_MonacoEditor_Toggle', 'true');\n                        mw.notify('\u5df2\u5f00\u542f\uff0c\u8bf7\u5237\u65b0\uff01');\n                    }\n                });\n            } else {\n                clearInterval(interval);\n            }\n        }, 200);\n    }\n});\n\n/* \u7ed9wikiplus\u6dfb\u52a0\u5feb\u901f\u586b\u5199\u6458\u8981 */\n$(function () {\n    var observar = new MutationObserver(function (record) {\n        if ($('.Wikiplus-InterBox').find('#Wikiplus-Quickedit-Summary-Input').length != 0 &&\n            $('.Wikiplus-InterBox').find('#summary_list').length == 0) {\n            var list = ['\u65b0\u6761\u76ee', '\u4fee\u9970\u8bed\u53e5', '\u4fee\u6b63\u7b14\u8bef', '\u5185\u5bb9\u6269\u5145', '\u6392\u7248', '\u5185\u90e8\u94fe\u63a5', '\u5206\u7c7b', '\u6d88\u6b67\u4e49', '\u840c\u767e\u5316'];\n            var summary = $('<span />');\n            summary.attr('id', 'summary_list');\n            summary.css('marginLeft', '0.5em');\n            for (var i = 0; i < list.length; i++) {\n                if (i != 0) summary.html(summary.html() + ' | ');\n                summary.html(summary.html() + '<a href=\"#.\">' + list[i] + '</a>');\n            }\n            $('.Wikiplus-InterBox').find('#Wikiplus-Quickedit-Summary-Input').after(summary);\n            $('#summary_list').children().each(function () {\n                $(this).click(function () {\n                    var str = $('#Wikiplus-Quickedit-Summary-Input').val();\n                    if (/\\/\\/ Edit via Wikiplus\\s*$/.test(str)) {\n                        $('#Wikiplus-Quickedit-Summary-Input').val(str.replace(/^(.*?)( ?\\/\\/ Edit via Wikiplus\\s*)$/, '$1 ' + $(this).text() + ' // Edit via Wikiplus'));\n                    } else {\n                        $('#Wikiplus-Quickedit-Summary-Input').val(str + ' ' + $(this).text());\n                    }\n                });\n            });\n        }\n    });\n    observar.observe(document.body, { childList: true });\n});\n\n/* \u68c0\u6d4b\u88ab\u5220\u9664\u7684b\u7ad9\u89c6\u9891 */\n$(function () {\n    setTimeout(function () {\n        $('div.bilibili-title').each(function () {\n            var av = ($(this).find('a[href^=\"http://www.bilibili.com/video/av\"]')[0].href.match(/http:\\/\\/www.bilibili.com\\/video\\/av(\\d+)/) || ['', ''])[1];\n            if (RegExp(av).test($(this).text()) && !(/\u53ea\u6709\u4f1a\u5458\u624d\u77e5\u9053\u7684\u4e16\u754c/.test($(this).text()))) {\n                alert('\u672c\u9875\u9762\u4e0a\u53ef\u80fd\u5b58\u5728\u5931\u6548\u7684\u54d4\u54e9\u54d4\u54e9\u89c6\u9891\u94fe\u63a5');\n                return false;\n            }\n        });\n    }, 5000);\n});\n\n/* \u6d4b\u8bd5\u62fc\u97f3\u6392\u5e8f */\n/* \u66ff\u6362\u6389mediawiki\u81ea\u5e26\u7684tablesorter */\n$.getScript('https://cdn.bootcss.com/jquery.tablesorter/2.31.0/js/jquery.tablesorter.min.js', function () {\n    if ($.tablesorter.version >= '2.31.0') {\n        $.tablesorter.sortText = $.tablesorter.sortNatural = $.tablesorter.sortNaturalAsc = function (a, b) {\n            return a.localeCompare(b);\n        };\n        $.tablesorter.sortNaturalDesc = function (a, b) {\n            return b.localeCompare(a);\n        };\n        $(function () {\n            $(\".sortable\").trigger(\"destroy\");\n            $('.sortable').tablesorter({\n                cssAsc: 'headerSortUp',\n                cssDesc: 'headerSortDown',\n                cssHeader: 'headerSort'\n            });\n        });\n    }\n});"}}}