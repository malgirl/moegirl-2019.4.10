{"parse":{"title":"User:\u4e5d\u6c5f\u6708/\u5de5\u5177","pageid":233505,"wikitext":{"*":"==\u4e66\u7b7e\u5de5\u5177==\n\u6dfb\u52a0\u5230\u767e\u5ea6\u9996\u9875\uff1a\n<pre>\njavascript:((function(s, d, e) {var u=location;var f = 'http://s.share.baidu.com?click=1&to=bdhome&from=addtobaidu&url='+e(u.href)+'&title='+e(d.title)+'&uid=&type=text&pic=&key=&sign=on&desc=&comment=&searchPic=&relatedUid=&l=&linkid=&sloc=&_t='+new Date().getTime();function a() {if (!window.open(f, 'bdshare', 'toolbar=0,status=0,resizable=1,width=700,height=450,left='+(s.width - 700) / 2+',top='+(s.height - 650) / 2)) u.href = f;};if (/Firefox/.test(navigator.userAgent)) setTimeout(a, 0);else a();})(screen, document, encodeURIComponent));\n</pre>\n\u6ce8\u5165\u5de5\u5177\uff1a\n<pre>\njavascript:( function create(){var parent = document.getElementById('content');if(!parent){parent=document.getElementById('main');};var div = document.createElement('div');div.setAttribute('id','tools');var tools = document.getElementById('tools');if(tools){tools.parentNode.removeChild(tools)};var phase = document.createElement('textarea');phase.setAttribute('id','my-code');var btn = document.createElement('input');btn.setAttribute('type','button');btn.setAttribute('value','excute');btn.setAttribute('onclick','javascript:(function(){var txt = document.getElementById(\"my-code\").value;eval(txt);})();');div.appendChild(phase);div.appendChild(btn);parent.insertBefore(div,parent.firstChild);} )();\n</pre>\n\u7f16\u8bd1\u5de5\u5177\uff1a\n<pre>javascript:(function ovo(){\n$('#bodyContent h2').each((i,item)=>{\n$(item).next().attr('id','rescode'+i);\n$('<input type=\"button\" id=\"code'+i+'\" value=\"\u8fd0\u884c\" onclick=\"'+$(item).next().text()+'\"/>').insertAfter($(item).next()); \n});\n})();\n</pre>\n\u83b7\u53d6\u5361\u7247\u4fe1\u606f\uff1a\n<pre>\njavascript:( function gethead(){ var heads = document.getElementsByClassName('detail')[0].getElementsByClassName('head'); var vals = document.getElementsByClassName('detail')[0].getElementsByClassName('val'); var as = document.getElementsByTagName('a'); for(var i = 0; i < as.length; i++) {as[i].parentNode.removeChild(as[i]);} var j = 0; var text=\"\u5361\u7247\u4fe1\u606f\\n\"; text+=\"\\n{{\u6e38\u620f\u738b/\u5361\u7247\\n|image=\\n\"; var marksign = {'7':'\u2196','8':'\u2191','9':'\u2197','4':'\u2190','5':'\u25cf','6':'\u2192','1':'\u2199','2':'\u2193','3':'\u2198',}; var attrs = {'\u5149':'LIGHT_','\u6697':'DARK','\u6c34':'WATER','\u5730':'EARTH','\u708e':'FIRE','\u98ce':'WIND','\u795e':'DIVINE'}; var colos = {'\u6548\u679c':'9b5245','\u901a\u5e38':'c5a664','\u540c\u8c03':'dae1ea','\u878d\u5408':'9060b3','\u4eea\u5f0f':'5071bc','\u8d85\u91cf':'373733','\u8fde\u63a5':'003a8c','\u9b54\u6cd5':'46a89d','\u9677\u9631':'ab4996'};var infoc='ffffff';var linkmark = false; for(var i = 0;i<heads.length-1; i++){if(i==6){j++;}; var thead = heads[i].innerHTML.replace(/ |\\n/g,''); var tcell = vals[j].innerHTML.replace(/ |\\n/g,''); if(thead=='\u5361\u7247\u79cd\u7c7b'){tcell=''; var tags = vals[j].getElementsByTagName('span'); for(var k = tags.length-1;k>=0;k--){tcell+=tags[k].innerText; infoc=colos[tags[k].innerText]?colos[tags[k].innerText]:infoc;linkmark = linkmark?linkmark:tags[k].innerText=='\u8fde\u63a5'?true:false;} } if(thead=='\u5c5e\u6027'){tcell='[[File:'+attrs[tcell]+'.png|25px]]';j=linkmark?j+1:j;} if(thead=='LINK'){j=linkmark?j+1:j;} if(thead=='\u661f\u7ea7'){tcell=tcell.replace(/\\d+/g,'{{#loop:star|1|'+tcell+'|[[File:CG_Star.png|20px]]}}')} if(thead=='%E9%98%B6%E7%BA%A7'){tcell=tcell.replace(/\\d+/g,'{{#loop:star|1|'+tcell+'|[[File:RANK_Star.png|20px]]}}')} text+='|'+thead+'='+tcell+'\\n';j++;} if(linkmark){var marks = '|%E8%BF%9E%E6%8E%A5%E6%A0%87%E5%BF%97='; for(var index = 1;index<=9;index++){ marks += document.getElementsByClassName('mark-linkmarker_'+index+'_on')[0]?'['+marksign[index]+']':''; }text+=marks+'\\n';} text+='|color=#'+infoc+'\\n|textcolor=\\n}}'; console.log(text); var phase = document.createElement('p'); phase.setAttribute('id','moe-phase'); phase.innerHTML = text.replace(/\\n/g,'<br />'); if(document.getElementById('moe-phase')){ document.getElementById('moe-phase').innerHTML = phase.innerHTML; }else{ document.getElementsByClassName('detail')[0].appendChild(phase);} } )();\n</pre>\n\u83b7\u53d6\u5361\u5305\u5217\u8868\uff1a\n<pre>\njavascript:( function(){ $('#result').remove(); var text ='{| border=\"1\" cellspacing=\"1\"'; text+='<br/>|-<br/>!colspan=\"2\"|%E5%8D%A1%E5%8C%85!!%E7%BD%95%E8%A7%81%E5%BA%A6'; $('.packtable table tr').each(function(){ var temp = \"<br/>|-<br/>|\"; $(this).find('td').each(function(){ var time = $(this).find('small').text(); time = $(this).text().replace(time,time==\"\"?time:\"&lt;br\\&gt;\"+time); if(temp==\"<br/>|-<br/>|\"){temp += time;}else{temp +=\"||\"+ time;} }); if(temp!=\"<br/>|-<br/>|\"){text += temp;} }); text+=\"<br/>|}\"; $('<p id=\"result\" style=\"width:800px;margin: 0 auto;background-color:#fff;overflow:scroll;\">'+text+'</p>').insertBefore('#main'); })();\n</pre>\n\n==Eval\u5de5\u5177==\n\u53d6\u5361\u5305\u5de5\u5177\n<pre>\nfunction main(){\nvar output = \"==\u7b80\u4ecb==\\n==\u5361\u5305\u5217\u8868==\\n{|class='wikitable' style='text-align:center;'\\n! width='80px'|\u7f16\u53f7 !! width='20%'|\u4e2d\u6587 !! width='20%'|\u82f1\u8bed !! width='20%'|\u65e5\u8bed !! \u7a00\u6709\u5ea6(\u7f55\u89c1\u5ea6) !! width='70px'|\u5361\u7247\u7c7b\u578b\\n\";\n$('.tabbertab').not('.tabbertabhide').find('.card-list tr').each(function(){\nvar temp=\"|-\\n|\";var i = 0;\n$(this).find('td').each(function(){\nvar text=$(this).text().replace(/\\n/g,'');\nif(i>0){\nif(i===2){\nvar ruby =text;\n$(this).find('ruby').each(function(){\nvar rb = $(this).find('rb').text();\nvar rt = $(this).find('rt').text();\nruby=ruby.replace(eval(\"/\"+rb+\"/g\"),\"{{ruby|\"+rb);\nruby=ruby.replace(eval(\"/\uff08\"+rt+\"\uff09/g\"),\"|\"+rt+\"|ja}}\");\nruby=ruby.replace(/{{ruby\\|{{ruby\\|/g,\"{{ruby|\");\n});\ntemp+=\"||<div>\"+ruby+\"</div>\";\n}else{temp+=\"||\"+text;}\n}else{temp+=text+\"||\u4e2d\u6587\u540d\";};\ni++;\n});\noutput+=temp+\"\\n\";\n});\noutput=output.replace(/Normal Monster/g,\"\u901a\u5e38\u602a\u517d\");\noutput=output.replace(/Effect Monster/g,\"\u6548\u679c\u602a\u517d\");\noutput=output.replace(/Gemini monster/g,\"\u4e8c\u91cd\u602a\u517d\");\noutput=output.replace(/Flip monster/g,\"\u53cd\u8f6c\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Tuner Monster/g,\"\u8c03\u6574\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Tuner monster/g,\"\u8c03\u6574\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Ritual Monster/g,\"\u4eea\u5f0f\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Fusion Monster/g,\"\u878d\u5408\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Synchro Monster/g,\"\u540c\u8c03\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Xyz Monster/g,\"\u8d85\u91cf\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Pendulum Monster/g,\"\u7075\u6446\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Effect Link Monster/g,\"\u8fde\u63a5\u602a\u517d\uff08\u6548\u679c\uff09\");\n\noutput=output.replace(/Tuner Monster/g,\"\u8c03\u6574\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Tuner monster/g,\"\u8c03\u6574\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Ritual Monster/g,\"\u4eea\u5f0f\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Fusion Monster/g,\"\u878d\u5408\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Synchro Monster/g,\"\u540c\u8c03\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Xyz Monster/g,\"\u8d85\u91cf\u602a\u517d\uff08\u6548\u679c\uff09\");\noutput=output.replace(/Pendulum Monster/g,\"\u7075\u6446\u602a\u517d\uff08\u6548\u679c\uff09\");\n\noutput=output.replace(/Normal Spell Card/g,\"\u901a\u5e38\u9b54\u6cd5\u5361\");\noutput=output.replace(/Quick-Play Spell Card/g,\"\u901f\u653b\u9b54\u6cd5\u5361\");\noutput=output.replace(/Continuous Spell Card/g,\"\u6c38\u7eed\u9b54\u6cd5\u5361\");\noutput=output.replace(/Ritual Spell Card/g,\"\u4eea\u5f0f\u9b54\u6cd5\u5361\");\noutput=output.replace(/Equip Spell Card/g,\"\u88c5\u5907\u9b54\u6cd5\u5361\");\noutput=output.replace(/Field Spell Card/g,\"\u573a\u5730\u9b54\u6cd5\u5361\");\noutput=output.replace(/Normal Trap Card/g,\"\u901a\u5e38\u9677\u9631\u5361\");\noutput=output.replace(/Continuous Trap Card/g,\"\u6c38\u7eed\u9677\u9631\u5361\");\noutput=output.replace(/Counter Trap Card/g,\"\u53cd\u51fb\u9677\u9631\u5361\");\n\noutput=output.replace(/Common/g,\"\u5e73\u5361N\");\noutput=output.replace(/Normal Parallel Rare/g,\"\u5e73\u7206NPR\");\noutput=output.replace(/Normal Rare/g,\"\u5e73\u7f55NR\");\noutput=output.replace(/Parallel Rare/g,\"\u7206\u95eaPR\");\noutput=output.replace(/Super Rare/g,\"\u9762\u95eaSR\");\noutput=output.replace(/Ultra Rare/g,\"\u91d1\u5b57UR\");\noutput=output.replace(/Secret Rare/g,\"\u94f6\u788eSER\");\noutput=output.replace(/Ultra-Secret Rare/g,\"\u91d1\u788eUSR\");\noutput=output.replace(/Ultimate Rare/g,\"\u7acb\u4f53UTR\");\noutput=output.replace(/Holographic Rare/g,\"\u5168\u606fHR\");\noutput=output.replace(/Rare/g,\"\u94f6\u5b57R\");\n\noutput=output.replace(/-JP/g,\"-\");\nconsole.log(output+\"|}\\n{{\u6e38\u620f\u738b\u5361\u5305|\u589e\u5f3a\u5305}}\\n==\u5916\u90e8\u94fe\u63a5==\\n[[Category:\u6e38\u620f\u738b]][[Category:\u6e38\u620f\u738b:\u5361\u5305]]\");\n}\nmain();\n</pre>\n\u751f\u6210\u5bb9\u5668\uff1a\n<pre>\nvar y = ()=>{\n  $(`<textarea id='my-text'></textarea>`).insertAfter('#my-code');\n};\ny();\n</pre>\n\u5361\u540d\u7ffb\u8bd1\uff1a\n<pre>\nvar z =()=>{\nvar i=1;\n $('.card-item h2 a').each(\n function(){\nvar index = i<10?'00'+i:'0'+i;\n$('#my-text').val($('#my-text').val().replace(index+\"||\u4e2d\u6587\u540d\",index+\"||[[\"+$(this).text()+']]'));\n console.log(index+'||'+$(this).text());i++;\n});\n};\nz();\n</pre>\n\u6b4c\u8bcd\u5206\u79bb\u5de5\u5177\uff1a\n<pre>\nvar x =()=> {\nvar text = $('#my-text p').html();\nvar textsets = text.split('<br>');\nvar text0=\"\";var text1=\"\";\nfor(var i=0;i<textsets.length;i++){\ntext0 += textsets[i];\ni++;\n}\nfor(var i=1;i<textsets.length;i++){\ntext1 += textsets[i];\ni++;\n}\nconsole.log(text0+\"\\n\\n\"+text1);\n}\nx();\n</pre>\n\n==\u5c0f\u5de5\u5177==\n===\u8349\u7a3f===\n<pre>\nfunction moetable(){\n    this.alertdata=\"\";\n    this.datatable={};this.obj = {};\n    this.set=function(obj){this.obj=obj;};\n    this.get=function(){return this.obj;};\n    this.init=function(){this.datatable=this.boxtable();};\n    this.init=function(obj){this.set(obj)};\n//dom to json\n    this.boxtable=() =>\n    {\n        return function(__this){\nvar trs = __this.get().getElementsByTagName('tr');\nvar boxed = [];\nfor (var i in trs){\nif (i < trs.length){\n  var item = function(obj){\nvar nodes = obj.childNodes;//.getElementsByTagName('td');\nvar boxed = [];\nfor (var i in nodes){\nif (i < tds.length)\n{                \n  var item = function(obj){\nconsole.log(obj);//+++++++++++++++++++++++++++++++++++++++++++++\nvar boxed = {\n//setup box template\nclassName:obj.className,\n//values: (obj.innerHTML.indexOf('<input ') < 0 ? obj.innerHTML : \"@input\"),\nrowspan: obj.rowSpan,\ncolspan: obj.colSpan,\n//color: obj.style.color,\n//bgcolor: obj.style.backgroundColor,\n//align: obj.style.textAlign\n};\n  return boxed;\n  }(nodes[i]);boxed.push(item);\n}\n}\n  return boxed;\n  }(trs[i]);boxed.push(item);\n}\n}     \n  return __this.datatable=boxed;\n        }(this);\n    };\n//json to dom\n    this.unboxtable=()=>{\n        return function(__this){\nvar unboxed = document.createElement('table');\nfor (var i in __this.datatable)\n{\n  var item = function(obj){\nvar unboxed = document.createElement('tr');\nfor (var i in obj)\n{\nvar item = function(obj){\nvar unboxed = document.createElement('td');\n        unboxed.className = obj.className;\n        unboxed.innerHTML = obj.values == \"@input\" ? '<input type=\"button\" value=\"+\" onclick=\"moetable.addtd(this)\" />' : obj.values;\n        unboxed.rowSpan = obj.rowspan;\n        unboxed.colSpan = obj.colspan;\n        unboxed.style.color = obj.color;\n        unboxed.style.backgroundColor = obj.bgcolor;\n        unboxed.style.textAlign = obj.align;\n        //unboxed.setAttribute('onclick', 'moetable.active(this)');\n        return unboxed;\n  }(obj[i]);unboxed.appendChild(item);\n}\n  return unboxed;\n  }(__this.datatable[i]);unboxed.appendChild(item);\n}\n  return unboxed;\n        }(this);\n    };\n//json to wikicode\nthis.encodetable=() =>{\nvar str = '{| class=\"wikitable\"\\n';\nstr += function(obj){\nvar str = \"\";\nfor (var i in obj)\n{\nstr += \"|-\\n\" + function(obj){\nvar str = \"\";\nfor (var i in obj)\n{\nstr += \"item\"+\"\\n\";//moetable.encodeitem(obj[i]) + \"\\n\";\n}\nreturn str;\n}(obj[i]);\n}\nreturn str;\n}(this.datatable);\n//str = str.replace(new RegExp(/(\\n)/g), \"<br>\");\nstr += '|}';\nreturn str;\n};\n//end function\n}\n\nfunction test(){\nvar mt = new moetable();\nmt.init($('.wikitable')[0]);\nconsole.log(mt.boxtable());\n//console.log(mt.unboxtable());\nconsole.log(mt.encodetable());\n}\n\ntest();\n</pre>\n\n==\u9875\u9762\u5de5\u5177==\n===\u751f\u6210Eval\u5de5\u5177===\n<pre>\njavascript:( function create(){var parent = document.getElementById('content');if(!parent){parent=document.getElementById('main');};var div = document.createElement('div');div.setAttribute('id','tools');var tools = document.getElementById('tools');if(tools){tools.parentNode.removeChild(tools)};var phase = document.createElement('textarea');phase.setAttribute('id','my-code');var btn = document.createElement('input');btn.setAttribute('type','button');btn.setAttribute('value','excute');btn.setAttribute('onclick','javascript:(function(){var txt = document.getElementById(\\x22my-code\\x22).value;eval(txt);})();');div.appendChild(phase);div.appendChild(btn);parent.insertBefore(div,parent.firstChild);} )();\n</pre>\n\n===\u6d4b\u8bd5\u9875\u9762===\n<pre>\njavascript:(function hello(){console.log('hello world!');})();\n</pre>"}}}