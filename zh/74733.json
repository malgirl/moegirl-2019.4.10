{"parse":{"title":"User:\u5546\u706b/pxruler.js","pageid":269320,"wikitext":{"*":"/*\n*\u540d\u79f0\uff1a\u5c4f\u5e55\u50cf\u7d20\u6d4b\u8ddd\u5668\n*\u4f5c\u8005\uff1a\u5546\u706b\n*\u7248\u672c\u53f7\uff1a1.1\n*\u529f\u80fd\u63cf\u8ff0\uff1a\u5c31\u662f\u7b97\u4e24\u4e2a\u70b9\u7684\u50cf\u7d20\u5dee\n*\u5b89\u88c5\u65b9\u6cd5\uff1a\u5728\u4e2a\u4ebajs\u9875\u6dfb\u52a0\u4ee3\u7801 mw.loader.load('/index.php?title=User:\u5546\u706b/pxruler.js&action=raw&ctype=text/javascript');\n*/\n$('#footer').after('<div id=\"pxrulerpoint\"></div><div id=\"pxruler_toggle\" style=\"transition:.37s all ease-in-out;width:20px;padding:5px 0;background-color:#000;color:#fff;font-size:8px;text-align:center;position:fixed;left:0;top:100px;cursor:pointer;opacity:.6;\" onclick=\"pxruler()\">\u50cf<br/>\u7d20<br/>\u6d4b<br/>\u8ddd</div>');\nvar x1, y1, x2 = null, y2 = null, x3 = null, y3 = null;\n\n//\u64cd\u4f5c\u9875\u9762\nfunction pxruler(){\n\tdocument.body.setAttribute(\"onmousedown\", \"setpoint1(event)\");\n\tdocument.body.setAttribute(\"onmousemove\", \"selecting(event)\");\n\tdocument.body.setAttribute(\"onmousewheel\", \"selecting(event)\");\n\tdocument.getElementById('pxrulerpoint').innerHTML='<div id=\"pxrulertable\" style=\"position:fixed; bottom:30px; left:10px; border:; padding:5px; background:#F6F6F6; opacity:.8;\"><p id=\"point1xy\">x1:-- y1:--</p><p id=\"point2xy\">x2:-- y2:--</p><p id=\"deltaxy\">\u0394x:-- \u0394y:--</p><hr/><p id=\"point3xy\">x:--\u3000y:--</p></div><div id=\"point1\" style=\"position:absolute; top:; left:; width:8px; height:8px; background-color:#ee0000; border-radius:50%\"></div><div id=\"point2\" style=\"position:absolute; top:; left:; width:8px; height:8px; background-color:#66ccff; border-radius:50%\"></div><div id=\"point3\" style=\"position:absolute; top:; left:; width:8px;height:8px;background-color:#ee0000;border-radius:50%; opacity:.6\"></div>';\n\tdocument.getElementById('pxruler_toggle').setAttribute(\"onclick\", \"exitpxruler()\");\n}\nfunction exitpxruler(){\n\tdocument.getElementById('pxrulerpoint').innerHTML='';\n\tdocument.getElementById('pxruler_toggle').setAttribute(\"onclick\", \"pxruler()\");\n\tdocument.body.removeAttribute(\"onmousedown\");\n\tdocument.body.removeAttribute(\"onmousemove\");\n\tdocument.body.removeAttribute(\"onmousewheel\");\n}\n//\u70b9\u51fb\u65f6\u8bb0\u5f55\u4f4d\u7f6e\uff0c\u5e76\u5207\u6362\u64cd\u4f5c\u70b9\nfunction selecting(event){\n\tx3 = event.clientX || window.event.clientX;\n\tx3 += document.documentElement.scrollLeft || document.body.scrollLeft;\n\ty3 = event.clientY || window.event.clientY;\n\ty3 += document.documentElement.scrollTop || document.body.scrollTop;\n\tdocument.getElementById(\"point3\").style.left = x3 -4 + \"px\";\n\tdocument.getElementById(\"point3\").style.top = y3 -4 + \"px\";\n\tdocument.getElementById('point3xy').innerHTML='x3:' + x3 + '\u3000y3:' + y3;\n}\nfunction setpoint1(event){\n\tx1 = x3;\n\ty1 = y3;\n\tdocument.getElementById('point1').style.left = x1 - 4 + \"px\";\n\tdocument.getElementById('point1').style.top = y1 - 4 + \"px\";\n\tdocument.getElementById('point3').style.backgroundColor = \"#66ccff\";\n\tdocument.body.setAttribute(\"onmousedown\", \"setpoint2(event)\");\n\tdocument.getElementById('point1xy').innerHTML='x1:' + x1 + ' y1:' + y1;\n\tdocument.getElementById('deltaxy').innerHTML='\u0394x:' + (x2-x1) + ' \u0394y:'+ (y2-y1);\n}\nfunction setpoint2(event){\n\tx2 = x3;\n\ty2 = y3;\n\tdocument.getElementById('point2').style.left = x2 - 4 + \"px\";\n\tdocument.getElementById('point2').style.top = y2 - 4 + \"px\";\n\tdocument.getElementById('point3').style.backgroundColor = \"#ee0000\";\n\tdocument.body.setAttribute(\"onmousedown\", \"setpoint1(event)\");\n\tdocument.getElementById('point2xy').innerHTML='x2:' + x2 + ' y2:' + y2;\n\tdocument.getElementById('deltaxy').innerHTML='\u0394x:' + (x2-x1) + ' \u0394y:'+ (y2-y1);\n}"}}}