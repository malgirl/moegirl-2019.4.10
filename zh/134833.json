{"parse":{"title":"Widget:ColorToggle","pageid":146519,"wikitext":{"*":"<noinclude>Only for {{tl|ColorToggle}}</noinclude><includeonly><!--{if !isset($wgColorToggle) || !$wgColorToggle}--><!--{assign var=\"wgColorToggle\" value=true scope=\"global\"}--><script>\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function() {\n    mw.loader.implement(\"widgetColorToggle\", function($, jQuery) {\n        $(function() {\n            function remember(flag) {\n                if (flag == false || flag) {\n                    var exp = new Date();\n                    exp.setTime(exp.getTime() + 12450 * 24 * 60 * 60 * 1000);\n                    if (window.localStorage) localStorage.setItem('widgetColorToggleFlag', !!flag);\n                    else document.cookie = 'widgetColorToggleFlag=' + !!flag + \";expires=\" + exp.toGMTString();\n                } else {\n                    if (window.localStorage) return localStorage.getItem('widgetColorToggleFlag') == 'true' ? true : false;\n                    else {\n                        var arr = document.cookie.match(/(^| )widgetColorToggleFlag=([^;]*)(;|$)/)\n                        if (arr) return arr[2] == 'true' ? true : false\n                        else return false;\n                    }\n                }\n            }\n            var button = $('.colorToggleButton:first'),\n                block = $('.colorToggleBlock');\n            if (!button[0]) {\n                block.first().before('<span class=\"colorToggleButton\"></span>');\n                button = $('.colorToggleButton:first');\n            }\n            button.append($('<input/>', {\n                attr: {\n                    'type': 'button'\n                },\n                val: '\u4e00\u952e\u53bb\u9664\u6b4c\u8bcd\u989c\u8272',\n                bind: {\n                    'click': function() {\n                        if (block.first().attr('style')) {\n                            block.removeAttr('style');\n                            $(this).val('\u4e00\u952e\u8fd8\u539f\u6b4c\u8bcd\u989c\u8272');\n                            remember(true);\n                        } else {\n                            block.each(function(_, ele) {\n                                $(ele).css('color', ele.dataset.color);\n                            });\n                            $(this).val('\u4e00\u952e\u53bb\u9664\u6b4c\u8bcd\u989c\u8272');\n                            remember(false);\n                        }\n                    }\n                }\n            }));\n            if (remember()) button.find('input').click();\n        });\n    });\n});\n</script><style>\n.colorToggleBlock {\n    transition: 0.37s all linear;\n}\n.colorToggleButton input{\n    display:block;\n}</style><!--{/if}--></includeonly>"}}}