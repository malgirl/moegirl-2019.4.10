{"parse":{"title":"User:\u4e5d\u6c5f\u6708/vector.js","pageid":260056,"wikitext":{"*":"//<pre>\n$(\"#p-cactions ul\").append('<li id=\"btn-deltool\" onclick=\"pagefunc(1)\"><a title=\"\u6302\u5220\">\u6302\u5220\u6807\u8bb0</a></li>');\n$(\"#p-cactions ul\").append('<li id=\"btn-deltool\" onclick=\"pagefunc(2)\"><a title=\"\u6536\u85cf\">\u6dfb\u52a0\u6536\u85cf</a></li>');\n$(\"#p-cactions ul\").append('<li id=\"btn-clock\" onclick=\"setclock()\"><a title=\"\u542f\u52a8\u65f6\u949f\">\u542f\u52a8\u65f6\u949f</a></li>');\n$(\"#p-cactions ul\").append('<li id=\"btn-ioctool\" onclick=\"createioc()\"><a title=\"\u6ce8\u5165\u5de5\u5177\">\u6ce8\u5165\u5de5\u5177</a></li>');\n$(\"#p-cactions ul\").append('<li id=\"btn-clock\" onclick=\"cutoff()\"><a title=\"\u6b4c\u8bcd\u5206\u79bb\">\u6b4c\u8bcd\u5206\u79bb</a></li>');\n\nfunction createioc(){var parent = document.getElementById('content');if(!parent){parent=document.getElementById('main');};var div = document.createElement('div');div.setAttribute('id','tools');var tools = document.getElementById('tools');if(tools){tools.parentNode.removeChild(tools)};var phase = document.createElement('textarea');phase.setAttribute('id','my-code');var btn = document.createElement('input');btn.setAttribute('type','button');btn.setAttribute('value','excute');btn.setAttribute('onclick','javascript:(function(){var txt = document.getElementById(\"my-code\").value;eval(txt);})();');div.appendChild(phase);div.appendChild(btn);parent.insertBefore(div,parent.firstChild);}\n\nfunction cutoff() {\nvar text = $('#my-text p').html();var textsets = text.split('<br>');var text0=\"\";var text1=\"\";\nfor(var i=0;i<textsets.length;i++){text0 += textsets[i];i++;}\nfor(var i=1;i<textsets.length;i++){text1 += textsets[i];i++;}\nconsole.log(text0+\"\\n\\n\"+text1);\n}\n\nfunction pagefunc(page){\nvar fs = function(name,args){\nvar sw = {\ntest:function(args){console.log(args);},\ninit:function(args){return (args>=0?false:true);},\npage:function(args){var temp = [\"null\",\"\u6302\u5220\",\"\u6536\u85cf\u5939\"];return (args>=temp.length||args<=0?temp[0]:temp[args]);},\nreason:function(args){var temp = [\"null\",\"\u7406\u7531\",\"\u5206\u7ec4\"];return (args>=temp.length||args<=0?temp[0]:temp[args]);},\ncheck:function(args){return (function(args,reason,callback){\n\t$.ajax( {url: 'https://zh.moegirl.org/api.php',dataType: 'json',type: 'POST',\n\tdata: {format: 'json',action: 'parse',page:args,prop:'sections'},\n\terror: function( xhr ) {alert( 'Error: get Content Request failed.' );},\n\tsuccess: function(data) {console.log(data);ret = data;\n\tvar favindex = {};\n\tfor(i in data.parse.sections){\n\t  var item = data.parse.sections[i];\n\t  if(!favindex[item.line]){favindex[item.line] = {};}\n\t  favindex[item.line].id = i;\n\t}\n\tcallback(reason,favindex[reason]?Number(favindex[reason].id)+1:\"new\");}\n\t});\n  });\n},\nfunc:function(args){return 0},\neditfunc:function(args){return (function(reason,content){\n$.ajax( {\n    url: 'https://zh.moegirl.org/api.php',\n    data: {action: 'query',meta:'tokens',format: 'json',type:'csrf|watch|patrol'},\n    dataType: 'json',type: 'POST',headers: { 'Api-User-Agent': 'Example/1.0' },\n    error: function( xhr ) {alert( 'Error: Token Request failed.' );},\n    success: function(data) {\n        $.ajax( {\n            url: 'https://zh.moegirl.org/api.php',\n            dataType: 'json',type: 'POST',headers: { 'Api-User-Agent': 'Example/1.0' },\n            data: {\n                format: 'json',action: 'edit',\n                token:data.query.tokens.csrftoken,\n                title:'User:\u4e5d\u6c5f\u6708/'+fs(\"page\",page),\n                section:(content!=\"delmark\"?content:(mw.config.get(\"wgUserGroups\").includes(\"patroller\")?1:2)),\n                sectiontitle:(content===\"new\"?reason:\"\"),\n                summary:\"Request from [[user:\"+ mw.config.get(\"wgUserName\")+\"]]\",\n                appendtext:\"\\n*[[\"+mw.config.get(\"wgPageName\")+\"]]\"+(content===\"delmark\"?\"\u3002\u7406\u7531\uff1a\"+reason+\"\u3002by--~~~~\":\"\")\n            },\n            error: function( xhr ) {alert( 'Error: Edit Request failed.' );},\n            success: function(data) {alert( '\u53cd\u9988\u6210\u529f\uff01' );console.log(data);}\n        });\n    }\n} );\n})}\n};\nreturn (sw[name]?sw[name]:sw[\"func\"])(args);\n};\nif(fs(\"init\",page)){return 0;}//\u65e0\u6548\u51fd\u6570\nvar reason=prompt(fs(\"reason\",page),\"\");\nif(reason==\"\"||reason==null){return 0}//\u53d6\u6d88\u6253\u65ad\nif(page===1){fs(\"editfunc\")(reason,\"delmark\")}else{fs(\"check\")(\"User:\u4e5d\u6c5f\u6708/\u6536\u85cf\u5939\",reason,fs(\"editfunc\"));}\n}\n\n$(document).ready( function() {\nif($(\"#specialchars\").length>0){\nvar charsets = [\n//\u5728\u8fd9\u91cc\u63d2\u5165\u9b54\u672f\u5b57\uff0cstart\u662f\u5149\u6807\u524d\u6587\u672c\uff0cend\u662f\u5149\u6807\u540e\u6587\u672c\uff0cid\u8bbe\u7f6e\u5143\u7d20id\u5c5e\u6027\uff0ccss\u8bbe\u7f6e\u5143\u7d20\u6837\u5f0f\uff0ctext\u662f\u663e\u793a\u6587\u672c\uff08\u503c\u4e3apanel\u65f6=\u5bb9\u5668\u3001\u4e3a<br/>\u65f6=\u6362\u884c\u7b26\uff09\n//valfunc\u5b9a\u4e49\u53c2\u6570\u8868\u793a\u5f0f\uff0cx\u6307\u4ee3\u5faa\u73af\u6b21\u6570\uff1bparent\u5b9a\u4e49\u8be5\u5143\u7d20\u6240\u5728\u7236\u7ea7\u5143\u7d20\u5185\uff1btarget\u8868\u793a\u8be5\u5143\u7d20\u6240\u53d6\u4ee3\u4f4d\u7f6e\u53ea\u80fd\u5d4c\u51651\u4e2a\u4f4d\u7f6e\uff1bcount\u8868\u793a\u8be5\u5143\u7d20\u91cd\u590d\u6b21\u6570\uff0chyperText\u5c06\u8986\u76d6Text\u5e76\u8bbe\u7f6e\u4e3a\u9ad8\u7ea7\u6587\u672c\n{start:\"\",end:\"\",text:'<a target=\"_blank\" rel=\"nofollow noreferrer noopener\" class=\"external text\" href=\"https://zh.moegirl.org/%E8%90%8C%E5%A8%98%E7%99%BE%E7%A7%91:%E7%94%A8%E6%88%B7%E4%BA%A4%E6%B5%81%E7%94%A8%E8%AF%AD%E6%A0%B7%E6%9D%BF\">\u7528\u6237\u4ea4\u6d41\u7528\u8bed\u6837\u677f</a>'},\n{start:\"--{{subst:user:\u4e5d\u6c5f\u6708/sign}}~~~~~\",end:\"\",text:'<a target=\"_blank\" rel=\"nofollow noreferrer noopener\" class=\"external text\" href=\"https://zh.moegirl.org/User:%E4%B9%9D%E6%B1%9F%E6%9C%88/sign\">\u3010\u5f15\u7528\u7b7e\u540d\u3011</a>'},\n{start:\"{{lj|\",end:\"}}\",text:\"\u3010\u65e5\u8bed\u6807\u7b7e\u3011\"},{start:\"<references />\",end:\"\",text:\"\u3010\u5206\u7c7b\u5f15\u7528\u3011\"},\n{text:\"<br/>\"},\n{start:\"{{#vardefine:\",end:\"|}}\",text:\"\u3010\u58f0\u660e\u53d8\u91cf\u3011\"},{start:\"{{#var:\",end:\"}}\",text:\"\u3010\u5f15\u7528\u53d8\u91cf\u3011\"},\n{start:\"{{#switch:{{{1\",end:\"|}}}\\n|key=\\n|#default=}}\",text:\"\u3010switch\u3011\"},{start:\"{{#expr:\",end:\"}}\",text:\"\u3010expr\u3011\"},\n{text:\"<br/>\"},\n{start:\"{{LyricsKai|original=null\",end:\"|translated= }}\",text:\"\u3010\u6b4c\u8bcd\uff1aLyricsKai\u3011\"},\n{start:\"[[Category:\",end:\"]]\",text:\"\u3010\u58f0\u660e\u5206\u7c7b\u3011\"},\n{start:\"#\u91cd\u5b9a\u5411[[\",end:\"]]\",text:\"\u3010\u91cd\u5b9a\u5411\u3011\"},\n{text:\"<br/>\"},\n{start:\"{{BilibiliVideo|id=\",end:\"|t=}}\",text:\"\u3010\u63d2\u5165\u89c6\u9891\u3011\"},\n{start:\"<flashmp3>http://music.163.com/song/media/outer/url?id=\",end:\"</flashmp3>\",text:\"\u3010\u63d2\u5165\u6b4c\u66f2\u3011\"},\n{start:\"<poem id='my-text'>\",end:\"  </poem>\",text:\"\u3010\u6b4c\u8bcd\u5206\u79bb\u3011\"},\n{text:\"panel\",id:\"emoji-panel\",\nhyperText:'[@emoji]'},\n{start:\"{{emoji|id=[@id]}}\",end:\"\",valfunc:{id:\"x+1\",x:\"22*(x-x%10)/10\",y:\"22*(x%10)\"},\ntext:'emoji',parent:\"#emoji-panel\",target:\"emoji\",count:\"470\",css:\"border:0px;\",\nhyperText:'<div style=\"display:inline-block;width:22px;height:22px;position:relative;border:1px solid #999;border-radius:0;overflow:hidden;z-index:1\"><img style=\"position:absolute;top:-[@y]px;left:-[@x]px;\" src=\"https://static.mengniang.org/common/b/bd/EmojiNew.png\" width=\"1034px\"></div>'}\n];\nif($('#ext-charinsert').length<=0){$(\"#specialchars\").prepend(\"<p id='ext-charinsert'></p>\");}\nvar label={};\nfor(var i in charsets){\nswitch(charsets[i].text){\ncase \"<br/>\":\nlabel = document.createElement('br');\nbreak;\ncase \"panel\":\nlabel = document.createElement('div');label.setAttribute(\"class\",\"mw-ext-char-panel\");label.setAttribute(\"id\",charsets[i].id?charsets[i].id:\"\");label.setAttribute(\"style\",charsets[i].css?charsets[i].css:\"\");label.innerHTML=charsets[i].hyperText?charsets[i].hyperText:charsets[i].text;\nbreak;\ndefault:\nlabel = document.createElement('a');label.setAttribute(\"class\",\"mw-ext-char-item\");label.setAttribute(\"style\",charsets[i].css?charsets[i].css:\"\");label.setAttribute(\"href\",\"#\");label.setAttribute(\"data-mw-ext-char-start\",charsets[i].start);label.setAttribute(\"data-mw-ext-char-end\",charsets[i].end);label.innerHTML=charsets[i].hyperText?charsets[i].hyperText:charsets[i].text;\n}\nvar temp=\"\";\nif(charsets[i].count?true:false){for(var copyi = 0;copyi<charsets[i].count;copyi++){var output = label.outerHTML;\nfor(var fid in charsets[i].valfunc){output = output.replace(eval(\"/\\\\[@\"+fid+\"\\\\]/g\"),eval(charsets[i].valfunc[fid].replace(/x/g,copyi)));}\ntemp+=output;}}\nif(charsets[i].target?true:false){\nvar html = $(charsets[i].parent?charsets[i].parent:\"#ext-charinsert\")[0];\nhtml.innerHTML = html.innerHTML.replace(eval(\"/\\\\[@\"+charsets[i].target+\"\\\\]/\"),temp==\"\"?label.outerHTML:temp);\n}else{$(charsets[i].parent?charsets[i].parent:\"#ext-charinsert\").append(label);}\n}\nif ($('.mw-collapsible')[0]) mw.loader.using('jquery.makeCollapsible').then(function() {$('.mw-collapsible').makeCollapsible();});\n//this code picked from mw.ext.charinsert\n(function($,mw){\nvar addClickHandlers = function ( $content ) {\n$content.find('a.mw-ext-char-item' ).each( function () {\nvar $elm = $( this ),start = $elm.data( 'mw-ext-char-start' ),end = $elm.data( 'mw-ext-char-end' );\nif ( $elm.data( 'mw-ext-char-done' ) ) {return;}\n$elm.click(function(e){e.preventDefault();mw.toolbar.insertTags( start, end, '' );}).data( 'mw-ext-char-done', true ).attr( 'href', '#' );});};\n$(function(){addClickHandlers( $( document ) );});\nmw.hook('wikipage.content').add( addClickHandlers );\n})(jQuery,mediaWiki);}\n});\n//</pre>"}}}