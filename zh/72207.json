{"parse":{"title":"User:Imbushuo/HideSubpageParentNavigationBar.js","pageid":225509,"wikitext":{"*":"// <pre>\n// Resolve some fucking issues caused by somebody\n\nwindow._unsubpage = true;\nwindow.RLQ = window.RLQ || [];\nwindow.RLQ.push(function () {\n\n    mw.loader.implement(\"widgetNoSubpageIbImpl\", function ($, jQuery) {\n\n        if (mw.config.values.wgPageName.indexOf('/') != -1 && $('#noSubpage')[0]) {\n            var unsubpageVars = $('#noSubpage')[0].dataset.vars.split('|');\n            if (!unsubpageVars.length || (unsubpageVars[0] === '' && unsubpageVars.length === 1)) {\n                // We would like to remove parent page navigation bar in such circumstance.\n                $('.subpages').remove();\n                return;\n            }\n\n            function compare(a) {\n                var l = unsubpageVars.length\n                for (i = 0; i < l; i++) {\n                    if (a.indexOf(unsubpageVars[i]) + unsubpageVars[i].indexOf(a) !== -2) return true;\n                }\n                return false;\n            }\n\n            $(function () {\n                    var links = mw.config.values.wgPageName.split('/'),\n                        link = '',\n                        subpages = $('.subpages')[0] ? $('.subpages').remove().empty() : $('<span class=\"subpages\"/>').text('<'),\n                        length = links.length - 1,\n                        index,\n                        prependText;\n                    for (index = 0, prependText = ''; index < length; index++) {\n                        if (compare(links[index] + '/' + links[index + 1])) {\n                            prependText += links[index] + '/';\n                            continue;\n                        }\n                        links[index] = prependText + links[index];\n                        prependText = '';\n                        link += '/' + links[index];\n                        subpages.append(' ').append($('<a/>', {\n                            text: links[index],\n                            href: link\n                        }));\n                        if (length - index > 1) subpages.append(\" |\");\n                    }\n                    if (subpages.find('a')[0]) $('#contentSub').prepend(subpages);\n            });\n        }\n\n    });\n\n});\n// </pre>"}}}