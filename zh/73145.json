{"parse":{"title":"User:Ricknator/common.js","pageid":267718,"wikitext":{"*":"mw.loader.load('https://wikiplus-app.com/Main.min.js');\nvar selfusing = mw.util.addPortletLink;\nselfusing('p-personal','/User:Ricknator/Sandbox','\u6e2c\u8a66',\n\t\tnull,null,null,'#pt-userpage');\n$('#wpDiff').after('<input type=\"button\" title=\"\u60f3\u8aaa\u4ec0\u9ebc [ctrl-option-u]\" accesskey=\"u\" name=\"wpSay\" id=\"wpSay\" value=\"\u60f3\u8aaa\u4ec0\u9ebc\uff1f\" class=\"oo-ui-buttonElement-button\">');\n$('#wpSay').click(function(){I_want_to_say()});\nfunction I_want_to_say(){\n\t mw.notify('\u4f60\u60f3\u8aaa\u4ec0\u9ebc\uff1f');\n\t $('<div id=\"\u60f3\u8aaa\u4ec0\u9ebc\" title=\"\u60f3\u8aaa\u4ec0\u9ebc\">' +\n    '<label for=\"\u4f60\u60f3\u8aaa\u4ec0\u9ebc\">\u4f60\u60f3\u8aaa\u4ec0\u9ebc\uff1f</label> <br/>' +\n    '<input id=\"\u4f60\u60f3\u8aaa\u4ec0\u9ebc\" type=\"text\" size=\"50\"  maxlength=\"100\" /><br /></div>'\n    ).dialog({\n       modal: false,\n       autoOpen: true,\n       width: 500,\n       buttons:{\n       \t\t\"\u958b\u59cb\u8aaa\": function() {\n       \t\t\tSayEditApi(mw.config.get('wgPageName'),'User:Ricknator/Sandbox','*\u65bc~~'+'~~'+'~\u7531~'+'~~\u958b\u59cb\u8aaa\uff1a'+$('#\u4f60\u60f3\u8aaa\u4ec0\u9ebc').val(),'\u6211\u8aaa\u4e86\uff01by Ricknator Saying Editor');\n       \t\t\tsetTimeout(function(){window.location.href=mw.util.getUrl('User:Ricknator/Sandbox')},5000);\n       \t\t\t}\n       }  \n    });\n}\nfunction SayEditApi(tracePage,destinationPage,edittext,editsummary){\n\tvar api = new mw.Api();\n\tapi.get( {\n\t\t'action' : 'query',\n\t\t'titles' : tracePage,\n\t\t'prop'   : 'revisions|info',\n\t\t'intoken' : 'edit',\n\t\t'rvprop' : 'content',\n\t\t'indexpageids' : 1\n\t} ).done( function (result) {\n\t\tresult = result.query;\n\t\tvar page = result.pages[result.pageids[0]];\n\t\n\t\tapi.post( {\n\t\t\t'action' : 'edit',\n\t\t\t'title' : destinationPage,\n\t\t\t'appendtext' :'\\n'+edittext,\n\t\t\t'summary' :editsummary,\n\t\t\t'token' : page.edittoken\n\t\t} ).done( function () {\n\t\t\tmw.notify('\u8aaa\u51fa\u7684\u53f0\u8a5e\u5df2\u50b3\u9001\u6210\u529f');\n\t\t} );\n\t} );\n}"}}}