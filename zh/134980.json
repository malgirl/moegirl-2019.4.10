{"parse":{"title":"\u6a21\u5757:Lyrics/colors/hover","pageid":305260,"wikitext":{"*":"    local module = {}\n\n    local getArgs = require('Module:Arguments').getArgs\n    local lang = require('Module:Lang')\n\n    function module.main(frame)\n        local args = getArgs(frame, {wrappers='Template:LyricsKai/colors/hover'})\n        local lyricshtml = frame:expandTemplate{ title = 'LyricsKai/colors', args = args }\n        lyricshtml = mw.ustring.gsub(lyricshtml, '(<div%s-class=\"Lyrics%-line\">)', '/unprocessed/%1')..'/unprocessed/'\n        -- \u5047\u8bbe\u4e00\u4e2aLyrics-line\u540e\u4e00\u5b9a\u662f\u53e6\u4e00\u4e2aLyrics-line\uff08\u4e8b\u5b9e\u7684\u786e\u5982\u6b64\uff09\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u7528\u5199\u5f88\u96be\u770b\u7684\u5e73\u8861\u5339\u914d\u4e86\n        local HoverWithNextLine_state = 0\n        while mw.ustring.match(lyricshtml, '/unprocessed/<div%s-class=\"Lyrics%-line\">') ~= nil do\n            lyricshtml = mw.ustring.gsub(lyricshtml, '/unprocessed/(<div%s-class=\"Lyrics%-line\">.-)/unprocessed/', function(line)\n                        if(mw.ustring.match(line, '#NoHover') ~= nil) then\n                            return line..'/unprocessed/'\n                        else \n                            if (mw.ustring.match(line, '#HoverWithNextLine') ~= nil) then\n                                if (HoverWithNextLine_state == 0) then\n                                    HoverWithNextLine_state = 1;\n                                    return'<div class=\"bg_hover\">'..line..'/unprocessed/'\n                                else \n                                    if (HoverWithNextLine_state == 1) then\n                                        return line..'/unprocessed/'\n                                    end\n                                end\n                            end \n                            if (HoverWithNextLine_state ~= 0) then\n                                HoverWithNextLine_state = 0\n                                return line..'</div>'..'/unprocessed/'\n                            end\n                            return '<div class=\"bg_hover\">'..line..'</div>'..'/unprocessed/'\n                        end\n            end, 1 )\n        end\n        lyricshtml = lyricshtml:gsub('#NoHover', ''):gsub('#HoverWithNextLine', ''):gsub('/unprocessed/$', '')\n        return lyricshtml\n    end\n\n    return module"}}}