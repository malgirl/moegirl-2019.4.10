{"parse":{"title":"User:Ki9039/common.js","pageid":265600,"wikitext":{"*":"// <pre>\n// wikEd From https://en.wikipedia.org/wiki/User:Cacycle/wikEd\n(function ()\n{\n\tvar script = document.createElement('script');\n\tscript.src = '//en.wikipedia.org/w/index.php?title=User:Cacycle/wikEd.js&action=raw&ctype=text/javascript';\n\tscript.async = true;\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\n }\n) ();\n// Wordcount From https://zh.wikipedia.org/wiki/MediaWiki:Gadget-Wordcount.js\n    (function($) {\n        function bytecount(text) {\n            text = text.replace(/[\\u0000-\\u007F]/g, '.');\n            text = text.replace(/[\\u0080-\\u07FF\\uD800-\\uDFFF]/g, '..');\n            text = text.replace(/[\\u0800-\\uD7FF\\uE000-\\uFFFF]/g, '...');\n            return text.length;\n        };\n        function cjkcount(text) {\n            text = text.replace(/\\./g, '');\n            text = text.replace(/[\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u3005\\u3007\\u3021-\\u3029\\u3038-\\u303B\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uF900-\\uFA6D\\uFA70-\\uFAD9]|[\\uD840-\\uD868][\\uDC00-\\uDFFF]|\\uD869[\\uDC00-\\uDED6\\uDF00-\\uDFFF]|[\\uD86A-\\uD86C][\\uDC00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D]|\\uD87E[\\uDC00-\\uDE1D]/g, '.');\n            text = text.replace(/[^\\.]/g, '');\n            return text.length;\n        };\n        function getwcbytext(text) {\n            return text.length + ' character(s) (' + cjkcount(text) + ' CJK)<br />' +\n                bytecount(text) + ' byte(s) in UTF-8 encoding';\n        };\n        function getsel() {\n            if (!window.getSelection) return '';\n            return getSelection().toString();\n        };\n        function dowc(event) {\n            $('.wordcount').remove(); // or remove after text.length == 0 checking?\n            var text = getsel();\n            if (text.length == 0) return;\n            var divj = $('<div />').html(getwcbytext(text))\n                .css({\n                    'position': 'fixed',\n                    'right': '0',\n                    'bottom': '0',\n                    'margin': '4px',\n                    'padding': '6px'\n                })\n                .addClass('wordcount ui-state-highlight ui-corner-all')\n                .appendTo('body');\n                // we hook keyup, so this may make it flickering\n                // eg when shift, ctrl.etc key up\n                //.hide().fadeIn('slow');\n            setTimeout(function() {\n                divj.fadeOut('slow');\n            }, 5000);\n        };\n        $(document).mouseup(dowc).keyup(dowc);\n    })(jQuery);\n// </pre>"}}}