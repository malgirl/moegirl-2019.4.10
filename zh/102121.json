{"parse":{"title":"MediaWiki:Gadget-Force preview.js","pageid":63925,"wikitext":{"*":"(function($, mw) {\n    if (!mw.config.get('wgPermittedGroups')) mw.config.set('wgPermittedGroups', ['autoconfirmed']); //\u9ed8\u8ba4\u53ea\u5141\u8bb8\u81ea\u52a8\u786e\u8ba4\u7528\u6237\u7ed5\u8fc7\u5f3a\u5236\u9884\u89c8\u3002\n    //\u68c0\u6d4b\u4e24\u4e2a\u6570\u7ec4\u662f\u5426\u6709\u91cd\u590d\u5143\u7d20\n    function intersects(arr1, arr2) {\n        if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n        for (var i1 = 0, l1 = arr1.length; i1 < l1; i1++) {\n            if (arr1.indexOf(arr1[i1]) === -1) continue; // \u68c0\u6d4b\u662f\u5426\u4e3a\u7a7a\u4f4d\n            for (var i2 = 0, l2 = arr2.length; i2 < l2; i2++) {\n                if (arr2.indexOf(arr2[i2]) === -1) continue;\n                if (arr1[i1] === arr2[i2]) return true;\n            }\n        }\n        return false;\n    }\n    $(function() {\n        if (mw.config.get('wgAction') !== 'edit' || intersects(mw.config.get(\"wgUserGroups\"), mw.config.get(\"wgPermittedGroups\"))) return;\n        var saveButton = $('#wpSave') || $(window.wpSave);\n        if (!saveButton[0]) return;\n        saveButton.attr('disabled', 'disabled').val('\u9884\u89c8\u4e00\u6b21\u540e\u624d\u53ef\u4fdd\u5b58\u5185\u5bb9').css('font-weight', 'normal').closest('.oo-ui-widget-enabled').removeClass('oo-ui-widget-enabled oo-ui-flaggedElement-primary');\n        Object.defineProperty(window, \"wpSave\", {\n            get: function() {\n                return undefined;\n            },\n            set: function() {\n                return true;\n            },\n            configurable: false,\n            enumerable: true,\n        });\n        Object.defineProperty(saveButton[0], \"disabled\", {\n            get: function() {\n                return true;\n            },\n            set: function() {\n                return true;\n            },\n            configurable: false,\n            enumerable: true,\n        });\n        $('#wpPreview').closest('.oo-ui-buttonElement-framed').addClass('oo-ui-flaggedElement-primary oo-ui-flaggedElement-progressive');\n    });\n})(jQuery, mediaWiki);"}}}