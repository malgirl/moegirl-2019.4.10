{"parse":{"title":"MediaWiki:Gadget-anti-notoc.js","pageid":106423,"wikitext":{"*":"// <pre>\n!function(a,b){if($(\"#notoc\")[0])return;return a(\"body\").hasClass(\"mw-mobile-mode\")||-1!=window.navigator.userAgent.toLowerCase().indexOf(\"mobile\")?console.debug(\"\u79fb\u52a8\u7248\u4e0d\u9002\u7528\u76ee\u5f55\u751f\u6210\"):(\"undefined\"==typeof b.config.get('gadgetAntiNotoc')&&(b.config.set(\"gadgetAntiNotoc\",\"on\"),a(function(){!a(\"#toc\")[0]&&a(\"#mw-content-text h2 .mw-headline\").length>2&&(a(\"#mw-content-text > .mw-parser-output > h2\").first().before('<div id=\"NOTOC\" class=\"toc NOTOC\" />'),a(\"#NOTOC\").prepend('<div id=\"toctitle\"><h2>\u76ee\u5f55</h2><span class=\"toctoggle\">&nbsp;[<a href=\"javascript:void(0);\" id=\"togglelinkTOC\">\u9690\u85cf</a>]&nbsp;</span></div>'),a(\"#toctitle\").after('<ul id=\"tocul\" />'),a(\"#mw-content-text h2\").each(function(){var b,c=a(this).find(\".mw-headline\");a(\"#tocul\").append('<li class=\"toclevel-1 tocsection-1\"><a><span class=\"toctext\" /></a></li>'),b=a(\"#tocul\").find(\"li\").last(),b.find(\"a\").attr(\"href\",\"#\"+c.attr(\"id\")),b.find(\".toctext\").text(c.text())}),a(\".toclevel-1.tocsection-1\").length-20?a(\"#togglelinkTOC\").click(function(){\"none\"==a(\"#tocul\").css(\"display\")?a(\"#togglelinkTOC\").text(\"\u663e\u793a\")&&a(\"#tocul\").show()&&a(\"#NOTOC\").addClass(\"show\"):a(\"#togglelinkTOC\").text(\"\u9690\u85cf\")&&a(\"#tocul\").hide()&&a(\"#NOTOC\").removeClass(\"show\")}):a(\"#togglelinkTOC\").click(function(){a(\"#tocul\").toggle(\"fast\",function(){\"none\"==a(\"#tocul\").css(\"display\")?a(\"#togglelinkTOC\").text(\"\u663e\u793a\"):a(\"#togglelinkTOC\").text(\"\u9690\u85cf\")})})),hidetoc()&&(a(\"#tocul\").hide(),a(\"#togglelinkTOC\").text(\"\u9690\u85cf\")),a(\"#tocul\").append('<div class=\"AntiNOTOCNotice\">Anti-NOTOC</div>'),a('.AntiNOTOCNotice').css({'text-align':'right','font-size':'7px','color':'#aaa','cursor':'default','user-select':'none'})})),void 0)}(jQuery,mediaWiki);\n//\u4ee5\u4e0b\u662f\u5224\u65ad\u9875\u9762\u662f\u5426\u9ed8\u8ba4\u9690\u85cf\u76ee\u5f55\u7684\u65b9\u5f0f\uff1a\n//\u7b2c\u4e00\u4e2a\u662f\u5224\u65ad\u662f\u5426\u5728\u3010\u7279\u6b8a\u3011\u540d\u5b57\u7a7a\u95f4\uff0c\n//\u800c\u7b2c\u4e8c\u4e2a\u662f\u5224\u65ad\u662f\u5426\u52a8\u753b\u5bfc\u822a\u9875\u9762\u3010\u6bd4\u5982\u201c\u65e5\u672c2015\u5e74\u6625\u5b63\u52a8\u753b\u201d\u3001\u201c\u65e5\u672c2001\u5e74\u91cc\u756a\u52a8\u753b\u201d\u3011\nfunction hidetoc() {\n    return $(\".ns--1\").length || RegExp(/^\u65e5\u672c\\d*?\u5e74.*?\u52a8\u753b$/).test(mw.config.get('wgTitle')) || $('[data-notoc=\"true\"]')[0];\n}\n// </pre>"}}}